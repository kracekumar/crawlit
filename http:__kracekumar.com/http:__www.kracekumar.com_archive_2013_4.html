<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta http-equiv="x-dns-prefetch-control" content="off"/><title>Random stream: Archive</title><link rel="icon" href="http://31.media.tumblr.com/avatar_08684c9830f1_128.png" type="image/png"/><link rel="stylesheet" media="screen" href="http://assets.tumblr.com/assets/styles/archive.css?_v=1a390aecdf722e6e2e0fb6f3af9e51ca"><script src="http://assets.tumblr.com/assets/scripts/vendor/jquery_backbone_lodash.js?_v=aa764db8ca893a8defe92009f39ecb6b"></script><script src="http://assets.tumblr.com/assets/scripts/polyfills.js?_v=b5be1e10a97269713227159704f665ec"></script><script src="http://assets.tumblr.com/assets/scripts/archive/archive.js?_v=753f1b877593cc8e4bc8e294c3ac40cb"></script><script>
            var l10n_str = l10n_str || {},
            just_clicked_browse_months = false,
            is_mobile = RegExp(" Mobile/").test(navigator.userAgent);
        </script><!--[if lt IE 9]><script>
              document.createElement('header');
              document.createElement('nav');
              document.createElement('section');
              document.createElement('article');
              document.createElement('aside');
              document.createElement('footer');
           </script><![endif]--></head><body id="body"><header id="nav_archive" class="blue_bar"><a href="/" class="title"><span id="back_to_blog"></span><img class="avatar" src="http://25.media.tumblr.com/avatar_08684c9830f1_40.png" alt="" /><h1 class="blog_title">Random stream</h1></a><div id="browse_months"><div id="jump_to_month"><span class="month">Month </span><span class="arrow"></span></div></div><nav id="register" class="nav_right"><iframe scrolling="no" frameborder="0" id="tumblr_controls" src="http://assets.tumblr.com/assets/html/archive_iframe.html?_v=00adce6fb7285572a2a2a7f10d87e867#src=http%3A%2F%2Fkracekumar.com%2Farchive%2F2013%2F4&amp;name=kracekumar" width="400" height="28" style="border:0; background-color:transparent; overflow:hidden; "></iframe></nav></header><div id="content"><!-- START CONTENT --> 
                    <header class="heading" style="display:none;"><h2 class="date">April 2013</h2><h3 class="post_count">2 posts</h3></header><section id="posts_201304" class="posts loading" style="display:none;"><div class="post post_micro is_regular post_tumblelog_2ea1319dd6a30cd913dfb6ccbc8de88a not_mine is_original with_permalink no_source has_hover" id="post_micro_47845987199"  data-post-id='47845987199' data-root-id='47845987199' data-tumblelog-name='kracekumar' data-tumblelog-key='mcD32QRLz' data-reblog-key='A4mow5jJ' data-type='regular' data-json='{"post-id":"47845987199","root-id":"47845987199","tumblelog-name":"kracekumar","tumblelog-key":"mcD32QRLz","reblog-key":"A4mow5jJ","type":"regular","json":"{\u0022post-id\u0022:\u002247845987199\u0022,\u0022root-id\u0022:\u002247845987199\u0022,\u0022tumblelog-name\u0022:\u0022kracekumar\u0022,\u0022tumblelog-key\u0022:\u0022mcD32QRLz\u0022,\u0022reblog-key\u0022:\u0022A4mow5jJ\u0022,\u0022type\u0022:\u0022regular\u0022}"}'><div class="post_header"></div><div class="post_content"><div class="post_content_inner"><div class="post_title">Six senses</div><p>Everybody must have known about <a href="http://en.wikipedia.org/wiki/Sense" target="_blank">Six Senses</a> first reference is found in Tamil literature <a href="http://en.wikipedia.org/wiki/Tholkappiyam" target="_blank">Tholkappiyam</a>.</p>

<pre><code>ஒன்று அறிவதுவே உற்று அறிவதுவே
இரண்டு அறிவதுவே அதனொடு நாவே
மூன்று அறிவதுவே அவற்றொடு மூக்கே
நான்கு அறிவதுவே அவற்றொடு கண்ணே
ஐந்து அறிவதுவே அவற்றொடு செவியே
ஆறு அறிவதுவே அவற்றொடு மனனே
நேரிதின் உணர்ந்தோர் நெறிப்படுத்தினரே
நூல் – தொல்காப்பியம்
அதிகாரம் – பொருளதிகாரம்
திணை – மரபியல்
</code></pre>

<p><a href="http://4varinote.wordpress.com/2013/04/13/133/" target="_blank">4varinote - Tamil</a> and <a href="http://omtamil.com/home/6-senses-in-tholkappiyam/" target="_blank">Omtamil - English</a> has detailed explanation on this.</p></div></div><div class="post_glass post_micro_glass" 
     title=""><a target="_blank" class="hover"
               title=""
               href="http://kracekumar.com/post/47845987199/six-senses"><div class="hover_inner"><span class="post_date">Apr 13, 2013</span><span class="post_notes"
                        data-notes="2">2 notes</span></div>  

            <div class="hover_tags"><span class="tags">                        #tamil #science</span></div></a></div>
</div><div class="post post_micro is_regular post_tumblelog_2ea1319dd6a30cd913dfb6ccbc8de88a not_mine is_original with_permalink no_source no_notes has_hover" id="post_micro_47806200096"  data-post-id='47806200096' data-root-id='47806200096' data-tumblelog-name='kracekumar' data-tumblelog-key='mcD32QRLz' data-reblog-key='ULmocIqZ' data-type='regular' data-json='{"post-id":"47806200096","root-id":"47806200096","tumblelog-name":"kracekumar","tumblelog-key":"mcD32QRLz","reblog-key":"ULmocIqZ","type":"regular","json":"{\u0022post-id\u0022:\u002247806200096\u0022,\u0022root-id\u0022:\u002247806200096\u0022,\u0022tumblelog-name\u0022:\u0022kracekumar\u0022,\u0022tumblelog-key\u0022:\u0022mcD32QRLz\u0022,\u0022reblog-key\u0022:\u0022ULmocIqZ\u0022,\u0022type\u0022:\u0022regular\u0022}"}'><div class="post_header"></div><div class="post_content"><div class="post_content_inner"><div class="post_title">hardest feature request </div><p>I was working on <a href="http://hasgeek.tv" target="_blank">Hgtv</a> feature, syncing <code>slides</code> and <code>videos</code>, when video is viewed slide changes automatically. Seems easy but guess what someone has to take pain to watch entire video and collect the details about timings of the video and slide number . Then pass on the info to <a href="https://github.com/ffissore/presentz.js" target="_blank">presentz.js</a> which syncs video and slides.</p>

Iframe

<p>If you look into source code how slide show and video is inserted, it is iframe. All videos are from <code>youtube</code>, slides are from <code>speakerdeck</code>, <code>slideshare</code>. Now to sync video and slide, I need to fetch the  slide number and current time of video. <code>Youtube</code> has js api, which was easy to figure, but speakerdeck and slideshare inserts images into iframe. When next button is clicked image is changed. If I can access DOM I am done, but unfortunately you cannot access the DOM of an Iframe for a Cross Origin Request. I found this info after one whole day of tinkering and trying all answers in stackoverflow. Then I looked into presentz JS how it handles slide changing. Speakerdeck receives postMessage, it accepts <code>nextSlide</code>, <code>previousSlide</code>, <code>goToSlide</code> messages. Once speakerdeck processed the messages and sends message to originator, and the received message has to be processed(<code>window.addEventListener</code>). Before figuring above messages I was brute forcing to get figure out how to get current slide. Once I figured it only accepts three message, then it was easy. Below is the code.</p>

<pre><code>    var receiveMessage = function(event){
    var data;
    if (event.origin.indexOf("speakerdeck.com") === -1){
      if (event.origin.indexOf("slideshare.net") === -1){
        return;
      }
    }
    data = $.parseJSON(event.data);
    if (data[1]) {
      slideno = data[1].number;
    }};
</code></pre>

<p>Then register event listener</p>

<pre><code>window.addEventListener("message", receiveMessage, false);
</code></pre>

<p>Then slideshare was bit out of track. Slideshare had js api which requires swfobject and swfobject_playerapi. Then it was bit easier still took me some time to figure out missing <code>swfobject_playerapi</code> is required.</p>

<p>It took me five days to finally get this feature and <a href="https://github.com/hasgeek/hasgeek.tv/pull/86" target="_blank">pull</a> is ready.</p>

Learning:

<ul><li>I learned coffeescript.</li>
<li>Parsing DOM of Iframe is not possible for CORS.</li>
<li><code>postMessage</code></li>
</ul><p>This feature was so far the hardest one.</p>

Root Cause

<p>The root cause for this problem, is my **Ass u mption **. I was trying to use presentz.js to get current slide and video player timings.</p></div></div><div class="post_glass post_micro_glass" 
     title=""><a target="_blank" class="hover"
               title=""
               href="http://kracekumar.com/post/47806200096/hardest-feature-request"><div class="hover_inner"><span class="post_date">Apr 13, 2013</span></div>  

            <div class="hover_tags"><span class="tags">                        #javascript #facepalm #iframe</span></div></a></div>
</div></section><!-- END CONTENT --></div><div id="pagination"><div id="next_page" style="display:none"><a id="next_page_link" href="/archive/2013/4?before_time=1365801128">Next page &rarr;</a></div></div><iframe onload="javascript:this.contentWindow.postMessage(['tick_google_analytics', '/archive/2013/4?route=%2Farchive%2F%3Ayear%2F%3Amonth'].join(';'), this.src.split('/analytics.html')[0]);  " src="http://assets.tumblr.com/analytics.html?dfe9b9d3e783ff1f12fd8ce1b733bdc0" scrolling="no" width="1" height="1" frameborder="0" style="background-color:transparent; overflow:hidden; position:absolute; top:0; left:0 z-index:9999;" id="ga_target"></iframe><script>
        window.setTimeout(function() {
            COMSCORE = true; 
            var analytics_frame = document.getElementById('ga_target');
            analytics_frame.contentWindow.postMessage('enable_comscore;' + window.location, analytics_frame.src.split('/analytics.html')[0]);
        }, 1000);
    </script><script type="text/javascript">
      var _qevents = _qevents || [];

      (function() {
       var elem = document.createElement('script');

       elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
       elem.async = true;
       elem.type = "text/javascript";
       var scpt = document.getElementsByTagName('script')[0];
       scpt.parentNode.insertBefore(elem, scpt);
      })();
    </script><script type="text/javascript">
        _qevents.push( { qacct: 'p-19UtqE8ngoZbM' } );
    </script><noscript><div style="display: none;"><img src="//pixel.quantserve.com/pixel/'p-19UtqE8ngoZbM'.gif" height="1" width="1" alt="Quantcast"/></div></noscript><script type="text/javascript">!function(s){s.src='http://www.tumblr.com/impixu?T=1386356571&J=eyJ0eXBlIjoidXJsIiwidXJsIjoiaHR0cDpcL1wva3JhY2VrdW1hci5jb21cL2FyY2hpdmVcLzIwMTNcLzQiLCJyZXF0eXBlIjowLCJyb3V0ZSI6IlwvYXJjaGl2ZVwvOnllYXJcLzptb250aCJ9&U=FGJCPMHBMN&K=31606a2f1e9062df4fd773d6b63f90243cd5570e7b54c18a17bd10536609f972&R='.replace(/&R=[^&$]*/,'').concat('&R='+escape(document.referrer)).slice(0,2000).replace(/%.?.?$/,'');}(new Image());</script><noscript><img style="position:absolute;z-index:-3334;top:0px;left:0px;visibility:hidden;" src="http://www.tumblr.com/impixu?T=1386356571&J=eyJ0eXBlIjoidXJsIiwidXJsIjoiaHR0cDpcL1wva3JhY2VrdW1hci5jb21cL2FyY2hpdmVcLzIwMTNcLzQiLCJyZXF0eXBlIjowLCJyb3V0ZSI6IlwvYXJjaGl2ZVwvOnllYXJcLzptb250aCIsIm5vc2NyaXB0IjoxfQ==&U=FGJCPMHBMN&K=53cd835e115330683c1f642924d36637721ea5f4f2b3900ac791f1a7fd305586&R="></noscript><script type="text/javascript" src="http://l.yimg.com/ss/rapid-3.9.js"></script><script>
                    (function(YAHOO) {
                        if (YAHOO) {
                            YAHOO.i13n.beacon_server = 'nol.yahoo.com';
                            var keys = { pd:'/archive/:year/:month', _li:0, i_rad:0, i_strm:0 };
                            YAHOO.rapid = new YAHOO.i13n.Rapid({spaceid:1197719231, oo:1, client_only:1, yql_enabled:false, keys:keys});
                        }
                    })(window.YAHOO);
                </script><div id="browse_months_widget" class="popover popover_gradient" style="display:none"><div class="popover_inner"><section id="year_2013" class="year" style="display:block"><header class="year_navigation"><a class="previous_year" href="#"><span>2012</span></a><span class="current_year">2013</span><div class="next_year"><span></span></div><div class="clear"></div></header><nav class="months"><ul><li><a href="/archive/2013/1">January</a><span class="count">3</span></li><li><a href="/archive/2013/2">February</a><span class="count">1</span></li><li><a href="/archive/2013/3">March</a><span class="count">8</span></li><li><a href="/archive/2013/4">April</a><span class="count">2</span></li><li><a href="/archive/2013/5">May</a><span class="count">3</span></li><li><a href="/archive/2013/6">June</a><span class="count">4</span></li><li><a href="/archive/2013/7">July</a><span class="count">5</span></li><li><a href="/archive/2013/8">August</a><span class="count">2</span></li><li><a href="/archive/2013/9">September</a><span class="count">2</span></li><li><a href="/archive/2013/10">October</a><span class="count">4</span></li><li><a href="/archive/2013/11">November</a><span class="count">2</span></li><li class="empty"><span>December</span></li></ul></nav></section><section id="year_2012" class="year" style="display:none"><header class="year_navigation"><a class="previous_year" href="#"><span>2011</span></a><span class="current_year">2012</span><a class="next_year" href="#"><span>2013</span></a><div class="clear"></div></header><nav class="months"><ul><li class="empty"><span>January</span></li><li class="empty"><span>February</span></li><li><a href="/archive/2012/3">March</a><span class="count">5</span></li><li><a href="/archive/2012/4">April</a><span class="count">1</span></li><li><a href="/archive/2012/5">May</a><span class="count">1</span></li><li><a href="/archive/2012/6">June</a><span class="count">2</span></li><li><a href="/archive/2012/7">July</a><span class="count">2</span></li><li><a href="/archive/2012/8">August</a><span class="count">1</span></li><li><a href="/archive/2012/9">September</a><span class="count">3</span></li><li><a href="/archive/2012/10">October</a><span class="count">3</span></li><li><a href="/archive/2012/11">November</a><span class="count">10</span></li><li><a href="/archive/2012/12">December</a><span class="count">4</span></li></ul></nav></section><section id="year_2011" class="year" style="display:none"><header class="year_navigation"><a class="previous_year" href="#"><span>2010</span></a><span class="current_year">2011</span><a class="next_year" href="#"><span>2012</span></a><div class="clear"></div></header><nav class="months"><ul><li class="empty"><span>January</span></li><li class="empty"><span>February</span></li><li class="empty"><span>March</span></li><li class="empty"><span>April</span></li><li class="empty"><span>May</span></li><li class="empty"><span>June</span></li><li class="empty"><span>July</span></li><li class="empty"><span>August</span></li><li class="empty"><span>September</span></li><li class="empty"><span>October</span></li><li class="empty"><span>November</span></li><li class="empty"><span>December</span></li></ul></nav></section><section id="year_2010" class="year" style="display:none"><header class="year_navigation"><div class="previous_year"><span></span></div><span class="current_year">2010</span><a class="next_year" href="#"><span>2011</span></a><div class="clear"></div></header><nav class="months"><ul><li class="empty"><span>January</span></li><li class="empty"><span>February</span></li><li class="empty"><span>March</span></li><li class="empty"><span>April</span></li><li class="empty"><span>May</span></li><li><a href="/archive/2010/6">June</a><span class="count">5</span></li><li class="empty"><span>July</span></li><li class="empty"><span>August</span></li><li class="empty"><span>September</span></li><li class="empty"><span>October</span></li><li class="empty"><span>November</span></li><li class="empty"><span>December</span></li></ul></nav></section></div></div></body></html>