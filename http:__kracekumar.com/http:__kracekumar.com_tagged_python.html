<!DOCTYPE html>
<script>var __pbpa = true;</script><script>var translated_warning_string = 'Warning: Never enter your Tumblr password unless \u201chttps://www.tumblr.com/login\u201d\x0ais the address in your web browser.\x0a\x0aYou should also see a green \u201cTumblr, Inc.\u201d identification in the address bar.\x0a\x0aSpammers and other bad guys use fake forms to steal passwords.\x0a\x0aTumblr will never ask you to log in from a user\u2019s blog.\x0a\x0aAre you absolutely sure you want to continue?';</script><script type="text/javascript" language="javascript" src="http://assets.tumblr.com/assets/scripts/pre_tumblelog.js?_v=001b252f920c60cde4c95b898217994e"></script>
<!DOCTYPE html>
<html>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# blog: http://ogp.me/ns/blog#">
    <meta charset="UTF-8">
    <title>Random stream</title>
    <link rel="shortcut icon" href="http://31.media.tumblr.com/avatar_08684c9830f1_128.png">
	<link rel="alternate" type="application/rss+xml" href="http://kracekumar.com/rss">
    
    <meta name="description" content="" />
          
	<meta name="if:Show notes" content="1">
	<meta name="text:Disqus Shortname" content="" />
	<meta name="color:Link Color" content="#EB374B">
	<meta name="color:Link Hover" content="#05b2c2">
	<meta name="color:Post Background" content="#F2F2F2" />
	<link rel="stylesheet" href="http://static.tumblr.com/26l8vc7/X7wmf3p9v/style.css">
	<style type="text/css">
		.post, .cover{background: #F2F2F2;}
		a{color: #EB374B;}
		a:hover, #header h1 a:hover{color:#05b2c2;}
		.date p, .shadow{background: #EB374B;}
		 
	</style>
    <!-- start Mixpanel --><script type="text/javascript">(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==
typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]);
b._i.push([a,e,d])};b.__SV=1.2}})(document,window.mixpanel||[]);
mixpanel.init("4787390884cf94ee4ef5b161840cae15");mixpanel.track(document.title);
</script><!-- end Mixpanel -->

<!-- BEGIN TUMBLR FACEBOOK OPENGRAPH TAGS --><!-- If you'd like to specify your own Open Graph tags, define the og:url and og:title tags in your theme's HTML. --><!-- Read more: http://ogp.me/ --><meta property="fb:app_id" content="48119224995" /><meta property="og:title" content="Random stream" /><meta property="og:url" content="http://kracekumar.com/?og=1" /><meta property="og:description" content="kracekumar - Geek" /><meta property="og:type" content="tumblr-feed:tumblelog" /><meta property="og:image" content="http://31.media.tumblr.com/avatar_08684c9830f1_128.png" /><!-- END TUMBLR FACEBOOK OPENGRAPH TAGS -->


<!-- TWITTER TAGS --><meta charset="utf-8"><meta name="twitter:site" content="tumblr" /><meta name="twitter:card" content="summary" /><meta name="twitter:title" content="kracekumar" /><meta name="twitter:description" content="kracekumar - Geek" /><meta name="twitter:creator" content="kracetheking" /><meta name="twitter:app:name:iphone" content="Tumblr" /><meta name="twitter:app:name:ipad" content="Tumblr" /><meta name="twitter:app:name:googleplay" content="Tumblr" /><meta name="twitter:app:id:iphone" content="305343404" /><meta name="twitter:app:id:ipad" content="305343404" /><meta name="twitter:app:id:googleplay" content="com.tumblr" /><meta name="twitter:app:url:iphone" content="tumblr://x-callback-url/blog?blogName=kracekumar&amp;referrer=twitter-cards" /><meta name="twitter:app:url:ipad" content="tumblr://x-callback-url/blog?blogName=kracekumar&amp;referrer=twitter-cards" /><meta name="twitter:app:url:googleplay" content="tumblr://x-callback-url/blog?blogName=kracekumar&amp;referrer=twitter-cards" />

<script src="http://assets.tumblr.com/assets/scripts/tumblelog.js?_v=5f870c646bc8380d871857a3aa781cf3"></script>
<meta http-equiv="x-dns-prefetch-control" content="off"/>
<meta name="keywords" content="python,tip,tamil,why-this-kolaveri-di,ssl" />
</head>
<body>
	<div id="wrapper">
		<div id="header" role="banner">
			<h1><a href="/">Random stream</a></h1>
			
			
			<div id="description">
				<p>kracekumar - Geek</p>
			</div>
			
		</div>
		
		<div id="navigation">			
			<div class="wrapper">
				 
				<ul class="pages links" role="navigation">
					
					<li><a href="/aboutme">self.__intro__</a></li>
					
					<li><a href="/resume">Resume</a></li>
					                    
				</ul>
				
				
				<form id="search" role="search" action="/search" method="get">
					<input type="text" name="q" class="search" value="Search" onfocus="if(this.value == this.defaultValue) this.value = ''" onblur="if(!this.value) this.value = this.defaultValue" />
				</form>
			</div>
		</div>
		
		<div id="content" role="main">
    		
    
    
    
    
			
			
					
					<div class="post text">
						 
						<div class="date">
							<p><span class="day">22</span> 11 / 2013</p>
						</div>
						
						
						<div class="content">
							
							<h2 class="link"><a href="http://kracekumar.com/post/67761708966/easy-install-broken-in-os-x-mavericks">easy_install broken in os x mavericks  </a></h2>
							
		
							<p>I hardly use <code>easy_install</code>. Nowadays all the python requirements are installed via <code>pip</code>.</p>

<p>IPython is my primary python console. After installing mavericks, I installed IPython and fired IPython console. Following warning message appeared</p>

<pre><code>➜  ~  ipython
/Library/Python/2.7/site-packages/IPython/utils/rlineimpl.py:94: RuntimeWarning: 
******************************************************************************
libedit detected - readline will not be well behaved, including but not limited to:
   * crashes on tab completion
   * incorrect history navigation
   * corrupting long-lines
   * failure to wrap or indent lines properly
It is highly recommended that you install readline, which is easy_installable:
     easy_install readline
Note that `pip install readline` generally DOES NOT WORK, because
it installs to site-packages, which come *after* lib-dynload in sys.path,
where readline is located.  It must be `easy_install readline`, or to a custom
location on your PYTHONPATH (even --user comes after lib-dyload).
******************************************************************************
  RuntimeWarning)
Python 2.7.5 (default, Aug 25 2013, 00:04:04) 
Type "copyright", "credits" or "license" for more information.
</code></pre>

<p>IPython complains <code>readline</code> is missing and insisting to use <code>easy_install</code>. Then I tried</p>

<pre><code>➜   ~  sudo easy_install-2.7 --upgrade setuptools
Traceback (most recent call last):
  File "/usr/bin/easy_install-2.7", line 7, in &lt;module&gt;
    from pkg_resources import load_entry_point
  File "/Library/Python/2.7/site-packages/pkg_resources.py", line 2797, in &lt;module&gt;
    parse_requirements(__requires__), Environment()
  File "/Library/Python/2.7/site-packages/pkg_resources.py", line 576, in resolve
    raise DistributionNotFound(req)
pkg_resources.DistributionNotFound: setuptools==0.6c12dev-r88846
</code></pre>

<p>I know I can&#8217;t use pip, but <code>distribute</code> is already installed.</p>

<p>Now only way to install readline is to use <code>easy_install</code> in Python site-packages. Normally <code>easy_install</code> is installed in <code>/usr/bin</code>.</p>

<pre><code>➜   ~  which easy_install
/usr/bin/easy_install
➜  ~  sudo python /Library/Python/2.7/site-packages/easy_install.py readline
Searching for readline
Reading <a href="https://pypi.python.org/simple/readline/" target="_blank">https://pypi.python.org/simple/readline/</a>
Best match: readline 6.2.4.1
Downloading <a href="https://pypi.python.org/packages/2.7/r/readline/readline-6.2.4.1-py2.7-macosx-10.7-intel.egg#md5=6ede61046a61219a6d97c44a75853c23" target="_blank">https://pypi.python.org/packages/2.7/r/readline/readline-6.2.4.1-py2.7-macosx-10.7-intel.egg#md5=6ede61046a61219a6d97c44a75853c23</a>
Processing readline-6.2.4.1-py2.7-macosx-10.7-intel.egg
creating /Library/Python/2.7/site-packages/readline-6.2.4.1-py2.7-macosx-10.7-intel.egg
Extracting readline-6.2.4.1-py2.7-macosx-10.7-intel.egg to /Library/Python/2.7/site-packages
Adding readline 6.2.4.1 to easy-install.pth file

Installed /Library/Python/2.7/site-packages/readline-6.2.4.1-py2.7-macosx-10.7-intel.egg
Processing dependencies for readline
Finished processing dependencies for readline

➜  ~  ipython 
Python 2.7.5 (default, Aug 25 2013, 00:04:04) 
Type "copyright", "credits" or "license" for more information.

IPython 1.1.0 -- An enhanced Interactive Python.
?         -&gt; Introduction and overview of IPython's features.
%quickref -&gt; Quick reference.
help      -&gt; Python's own help system.
object?   -&gt; Details about 'object', use 'object??' for extra details.
</code></pre>

<p>Whenever issue pops up with <code>easy_install</code> and <code>setuptools</code>, remember using <code>easy_install</code> from <code>site packages</code> like <code>sudo python /Library/Python/2.7/site-packages/easy_install.py</code></p>
						</div>
						
						<div class="info">							
							 
								<div>
									<p class="tags-label">Tags:</p>
									<ul class="tags">
										<li><a href="http://kracekumar.com/tagged/python">python</a></li><li><a href="http://kracekumar.com/tagged/easy_install">easy_install</a></li><li><a href="http://kracekumar.com/tagged/setuptools">setuptools</a></li>
									</ul>
								</div>
							
							<p><a href="http://kracekumar.com/post/67761708966/easy-install-broken-in-os-x-mavericks">Permalink</a>  <span style="float: right;"><a class="dsq-comment-count" href="http://kracekumar.com/post/67761708966/easy-install-broken-in-os-x-mavericks#disqus_thread"></a></span></p>
						</div>
						 
						<!--[if IE]><div class="date-shadow ie-rotate"><![endif]-->
						<!--[if !IE]><!--><div class="date-shadow"><!--<![endif]-->
							<span class="cover"></span>
							<span class="shadow"></span>
							<span class="darker"></span>
						</div>
						
					</div>
					

					
					
					
					
					

					
					
					
					
					
					

		
		
		
		
		
					

					
					
					
					

					
					
					
					
					

					
					
					
					
					
					

					
					
					
					
					


            
                
            
			
						
			
			
					
					<div class="post text">
						 
						<div class="date">
							<p><span class="day">12</span> 10 / 2013</p>
						</div>
						
						
						<div class="content">
							
							<h2 class="link"><a href="http://kracekumar.com/post/63834696015/check-tamil-word-or-sentence-is-palindrome">Check Tamil word or sentence is palindrome</a></h2>
							
		
							<p>How to check given text is palindrome or not</p>

<pre><code>def sanitize(text):
    for char in [" ", ".", ",", ";", "\n"]:
        text = text.replace(char, "")
    return text

def palindrome(word):
    # This approach is o(n), problem can be solved with o(n/2)
    # I am using this approach for brevity
    return word == word[::-1]

palindrome(sanitize("madam")) # True
palindrome(sanitize(u"விகடகவி")) # False
</code></pre>

<p>Here is the hand made version for Tamil</p>

<pre><code># Assign the variable meal the value 44.50 on line 3!
# hex values from க..வ
def sanitize(text):
    for char in [" ", ".", ",", ";", "\n"]:
        text = text.replace(char, "")
    return text

dependent_vowel_range = range(0xbbe, 0xbce)

def palindrome_tamil(text):
    front, rear = 0, len(text) - 1
    while True:
        #We will start checking from both ends
        #If code reached centre exit
        if front == rear or abs(front - rear) == 1:
            return True
        else:
            if ord(text[front+1]) in dependent_vowel_range and ord(text[rear]) in dependent_vowel_range:
                if text[front] == text[rear-1] and text[front+1] == text[rear]:
                    front += 2
                    rear -= 2
                else:
                    return False
            else:
                if text[front] == text[rear]:
                    front += 1
                    rear -= 1
                else:
                    return False




print palindrome_tamil(sanitize(u"விகடகவி")) == True
text = u"""
யாமாமாநீ யாமாமா யாழீகாமா காணாகா
காணாகாமா காழீயா மாமாயாநீ மாமாயா
"""
print palindrome_tamil(sanitize(text)) == True

#output
True
True
</code></pre>
						</div>
						
						<div class="info">							
							 
								<div>
									<p class="tags-label">Tags:</p>
									<ul class="tags">
										<li><a href="http://kracekumar.com/tagged/python">python</a></li><li><a href="http://kracekumar.com/tagged/tamil">tamil</a></li><li><a href="http://kracekumar.com/tagged/palindrome">palindrome</a></li>
									</ul>
								</div>
							
							<p><a href="http://kracekumar.com/post/63834696015/check-tamil-word-or-sentence-is-palindrome">Permalink</a> <a href="http://kracekumar.com/post/63834696015/check-tamil-word-or-sentence-is-palindrome#notes"><span class="notes">3 notes</span></a> <span style="float: right;"><a class="dsq-comment-count" href="http://kracekumar.com/post/63834696015/check-tamil-word-or-sentence-is-palindrome#disqus_thread"></a></span></p>
						</div>
						 
						<!--[if IE]><div class="date-shadow ie-rotate"><![endif]-->
						<!--[if !IE]><!--><div class="date-shadow"><!--<![endif]-->
							<span class="cover"></span>
							<span class="shadow"></span>
							<span class="darker"></span>
						</div>
						
					</div>
					

					
					
					
					
					

					
					
					
					
					
					

		
		
		
		
		
					

					
					
					
					

					
					
					
					
					

					
					
					
					
					
					

					
					
					
					
					


            
                
            
			
						
			
			
					
					<div class="post text">
						 
						<div class="date">
							<p><span class="day">12</span> 10 / 2013</p>
						</div>
						
						
						<div class="content">
							
							<h2 class="link"><a href="http://kracekumar.com/post/63832712202/how-tamil-unicode-works">How Tamil Unicode works</a></h2>
							
		
							<p>Tamil has 247 characters. No panic. It is simple. 12 uyir eluthu(அ,ஆ..ஔ)
, 18 mei eluthu(க்,ங்..)  , 216 uyirmei eluthu(12 * 18 க,ங ).1 ayutham(ஃ).</p>

<p>I assume you know what is unicode. If not read <a href="http://www.joelonsoftware.com/articles/Unicode.html" target="_blank">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets</a> and then read wikipedia page. You will understand most of it. Back to the post.</p>

<p>Every character or letter in unicode has value called <code>code point</code>. This is similar to ASCII where value of <code>a</code> is 97. All code point value is represented in hexadecimal. Tamil unicode character range starts from <code>0B80 - 0BFF</code>. Unicode consortium has a <a href="http://www.unicode.org/charts/PDF/U0B80.pdf" target="_blank">complete mappings</a>. So value of அ is <code>0B85</code>.</p>

<p>You don&#8217;t believe me&#160;? I will show you the code. Fireup <code>python2</code> console(I am using ipython).</p>

<pre><code>In [343]: print(unichr(0x0b85))
அ
</code></pre>

<p>How to find hex of a character&#160;?</p>

<pre><code>In [344]: print(hex(ord(u'க')))
0xb95
</code></pre>

<p>What is the code point of  கி?</p>

<pre><code>In [345]: print(hex(ord(u'கி')))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-345-9e02bf5958df&gt; in &lt;module&gt;()
----&gt; 1 print(hex(ord(u'கி')))

TypeError: ord() expected a character, but string of length 2 found
</code></pre>

<p>Python says len of the unicode character <code>கி</code> is 2. Lets check.</p>

<pre><code>In [346]: print(len(u'கி'))
2

In [348]: print(len(unichr(0x0b85)))
1

In [349]: print(unichr(0x0b85))
அ
</code></pre>

<p>So clearly <code>கி</code> is composed of two characters.<code>கி</code>=
<code>க்</code>+ <code>இ</code> from language point of view. Lets see what program says.</p>

<pre><code>In [355]: for c in u'கி':
    print c, hex(ord(c))
   .....:
க 0xb95
 ி 0xbbf
</code></pre>

<p>When you are typing in browser or editor, you use <code>க</code> + <code>இ</code>  after that it is the work of font and others work to replace it.</p>

<p>Below is the javascript code executed in chrome console.</p>

<pre><code>chr = "கி"
for (var i in chr){console.log(chr[i]);}
க
ி
undefined
</code></pre>

<p>So irrespective of the programming language or console or browser unicode is stored in the same way.</p>

<p><code>ி</code>is dependent vowel sign. Let me list all of them.</p>

<pre><code>In [362]: for c in range(0xbbe, 0xbce):
    print c, unichr(c)
   .....:
3006 ா
3007 ி
3008 ீ
3009 ு
3010 ூ
3011 ௃
3012 ௄
3013 ௅
3014 ெ
3015 ே
3016 ை
3017 ௉
3018 ொ
3019 ோ
3020 ௌ
3021 ்
</code></pre>

<p><code>௅</code> is a placeholder and that hex value doesn&#8217;t have any symbol or character. Dependent vowel will be used for replacing uyir eluthu.</p>

<p>Now lets read character by character in a word .</p>

<pre><code>In [366]: for i in u'விகடகவி':
        print i, hex(ord(i))
   .....:
வ 0xbb5
 ி 0xbbf
க 0xb95
ட 0xb9f
க 0xb95
வ 0xbb5
 ி 0xbbf
</code></pre>

<p>Well above logic holds true for english but not for Tamil.</p>

<pre><code>In [395]: word = u'விகடகவி'

In [396]: dependent_vowel_range = range(0xbbe, 0xbce)

In [397]: pos, stop = 0, len(word) - 1

In [398]: while not pos &gt;= stop:
    #check if next char is dependent vowel if so, print together
    if ord(word[pos+1]) in dependent_vowel_range:
        print word[pos], word[pos+1]
        pos += 2
    else:
        print word[pos]
        pos += 1
வ ி
க
ட
க
வ ி
</code></pre>

<p>Now try to write a program that will find a tamil word is palindrome or not and see the fun.</p>

<p>Note: I need to figure font that will club dependent vowel and print properly in terminal.</p>
						</div>
						
						<div class="info">							
							 
								<div>
									<p class="tags-label">Tags:</p>
									<ul class="tags">
										<li><a href="http://kracekumar.com/tagged/unicode">unicode</a></li><li><a href="http://kracekumar.com/tagged/python">python</a></li><li><a href="http://kracekumar.com/tagged/Tamil">Tamil</a></li>
									</ul>
								</div>
							
							<p><a href="http://kracekumar.com/post/63832712202/how-tamil-unicode-works">Permalink</a>  <span style="float: right;"><a class="dsq-comment-count" href="http://kracekumar.com/post/63832712202/how-tamil-unicode-works#disqus_thread"></a></span></p>
						</div>
						 
						<!--[if IE]><div class="date-shadow ie-rotate"><![endif]-->
						<!--[if !IE]><!--><div class="date-shadow"><!--<![endif]-->
							<span class="cover"></span>
							<span class="shadow"></span>
							<span class="darker"></span>
						</div>
						
					</div>
					

					
					
					
					
					

					
					
					
					
					
					

		
		
		
		
		
					

					
					
					
					

					
					
					
					
					

					
					
					
					
					
					

					
					
					
					
					


            
                
            
			
						
			
			
					
					<div class="post text">
						 
						<div class="date">
							<p><span class="day">13</span> 9 / 2013</p>
						</div>
						
						
						<div class="content">
							
							<h2 class="link"><a href="http://kracekumar.com/post/61125040813/coverage-py-to-test-web-application-coverage-without">coverage.py to test web application coverage without writing tests</a></h2>
							
		
							<p>Tests are mandatory for packages, modules, web apps. If you are lazy to write unit tests but wanted to see the coverage for web app here is the short cut.</p>

<p>Lets consider a Python web app uses Flask, <code>runserver.py</code> runs the development web server. Normally server is started by the command <code>python runserver.py</code>. Now use <code>coverage run runserver.py</code>.</p>

<p><code>coverage</code> python package will run the python program til program exits or user halts. Once web app testing is complete via browser, run <code>coverage report -m</code> this will produce big list of lines covered in modules during execution.</p>

<p>One more handy feature is  <code>coverage html</code>. This produces html file containing python code highlighting executed line and other. All the html files is produced inside <code>hmtlcov</code> directory.</p>

<p>Coverage <a href="http://nedbatchelder.com/code/coverage/" target="_blank">documentation</a>.</p>

<h2>Sample Output</h2>

<pre><code>➜ hacknight git:(issue-249) ✗ coverage run --source=hacknight runserver.py
/Library/Python/2.7/site-packages/flask_cache/__init__.py:100:   UserWarning: Flask-Cache: CACHE_TYPE is set to null, caching is  effectively disabled.
warnings.warn("Flask-Cache: CACHE_TYPE is set to null, "
* Running on <a href="http://0.0.0.0:8100/" target="_blank">http://0.0.0.0:8100/</a>
* Restarting with reloader
/Library/Python/2.7/site-packages/flask_cache/__init__.py:100: UserWarning: Flask-Cache: CACHE_TYPE is set to null, caching is effectively disabled.
warnings.warn("Flask-Cache: CACHE_TYPE is set to null, "
127.0.0.1 - - [13/Sep/2013 23:08:31] "GET / HTTP/1.1" 200 -
127.0.0.1 - - [13/Sep/2013 23:08:34] "GET /kracekumar HTTP/1.1" 200 -
127.0.0.1 - - [13/Sep/2013 23:08:36] "GET /kracekumar/jsfoo-hackday HTTP/1.1" 200 -
^C%                                                                                       
➜  hacknight git:(issue-249) ✗ coverage report -m
Name                           Stmts   Miss  Cover   Missing
------------------------------------------------------------
hacknight/__init__                28      0   100%
hacknight/_version                 3      0   100%
hacknight/forms/__init__           0      0   100%
hacknight/forms/comment           12      0   100%
hacknight/forms/event             42      5    88%   58-59, 62-72
hacknight/forms/participant       12      0   100%
hacknight/forms/profile            6      0   100%
hacknight/forms/project            9      0   100%
hacknight/forms/sponsor            9      0   100%
hacknight/forms/venue             16      0   100%
hacknight/models/__init__         10      0   100%
hacknight/models/_profile         21     21     0%   3-37
hacknight/models/comment          61     18    70%   34-35, 41, 71-72, 78-91, 95, 98
hacknight/models/event           110     43    61%   45, 48-51, 84, 87-88, 91-93, 96-97, 100-109, 112-133
hacknight/models/participant      31      5    84%   34-37, 41
hacknight/models/project          72     31    57%   42-46, 50, 55, 58, 63, 68-85, 101-105
hacknight/models/sponsor          17      2    88%   25-26
hacknight/models/user             21      5    76%   20, 24, 28, 32, 35
hacknight/models/venue            21      2    90%   26-27
hacknight/models/vote             38     16    58%   17-18, 21-30, 33-36, 39
hacknight/tests/__init__           0      0   100%
hacknight/tests/test_data          3      3     0%   3-7
hacknight/tests/test_models       17     17     0%   4-93
hacknight/views/__init__           8      0   100%
hacknight/views/event            244    192    21%   28-33, 41-56, 70-87, 97-116, 131, 140-145, 155-182, 191-222, 231-260, 269-276, 285-301, 310-313, 325-344, 354-373
hacknight/views/index             36     23    36%   13-15, 20, 25, 30, 35, 40, 45-53, 58-65
hacknight/views/login             28     12    57%   15, 21-22, 28-30, 36-37, 42-45
hacknight/views/profile           36     22    39%   17-23, 30-47
hacknight/views/project          323    256    21%   30-49, 61-73, 85-108, 118, 127-240, 252-259, 270-277, 288-295, 306-315, 327-336, 346-357, 369-378, 387-397, 406-416, 426-440, 451-464, 475-501, 514
hacknight/views/sponsor           45     26    42%   18-30, 42-53, 65-68, 81
hacknight/views/venue             47     29    38%   15-16, 22, 28-38, 45-56, 64-66
hacknight/views/workflow          84     30    64%   42-46, 52, 57, 62, 67, 72, 77, 80, 114-119, 127-128, 136, 144, 152, 160, 168, 176, 182, 188, 194, 200, 206, 209
------------------------------------------------------------
TOTAL                           1410    758    46%
</code></pre>
						</div>
						
						<div class="info">							
							 
								<div>
									<p class="tags-label">Tags:</p>
									<ul class="tags">
										<li><a href="http://kracekumar.com/tagged/python">python</a></li><li><a href="http://kracekumar.com/tagged/coverage">coverage</a></li><li><a href="http://kracekumar.com/tagged/unit-testing">unit testing</a></li>
									</ul>
								</div>
							
							<p><a href="http://kracekumar.com/post/61125040813/coverage-py-to-test-web-application-coverage-without">Permalink</a>  <span style="float: right;"><a class="dsq-comment-count" href="http://kracekumar.com/post/61125040813/coverage-py-to-test-web-application-coverage-without#disqus_thread"></a></span></p>
						</div>
						 
						<!--[if IE]><div class="date-shadow ie-rotate"><![endif]-->
						<!--[if !IE]><!--><div class="date-shadow"><!--<![endif]-->
							<span class="cover"></span>
							<span class="shadow"></span>
							<span class="darker"></span>
						</div>
						
					</div>
					

					
					
					
					
					

					
					
					
					
					
					

		
		
		
		
		
					

					
					
					
					

					
					
					
					
					

					
					
					
					
					
					

					
					
					
					
					


            
                
            
			
						
			
			
					
					<div class="post text">
						 
						<div class="date">
							<p><span class="day">20</span> 8 / 2013</p>
						</div>
						
						
						<div class="content">
							
							<h2 class="link"><a href="http://kracekumar.com/post/58802831892/observations-from-handling-python-workshop-in">Observations from handling python workshop in engineering colleges</a></h2>
							
		
							<p><em>Observations from handling python workshop in engineering colleges</em></p>

<p>I handled 5 python workshop/sessions for novices from 8th march to 20th august, each one stretching from 1 hour to 2 days. It was worth the time.</p>

<p>Students who participated in the workshop where from Computer Science, Electronics background of Under Graduate and Post Graduate level. Minimum strength was 60 and maximum was close to 100.</p>

<ol><li>When handling the strength of 60 students in lab, remember every one have their own pace of picking up.</li>
<li>Distribute the material in html or pdf format so students can look into it. Some students in the workshop start doing the examples as soon as they receive the material and these students will learn on their own, now you have segmented the students who need instructor support. These students also help their friends when stuck. </li>
<li>Go slow and repeat twice every concept. Students from engineering college use C, C++. Python&#8217;s ease is difficult to digest at first.</li>
<li>Make sure you don&#8217;t stand near your laptop for more than 20 minutes. Teach topic, show the example and move around so the students can approach you and you will get to know the difficulties of students. Not everyone will ask questions.</li>
<li>Give problems for them to solve and don&#8217;t give problems which takes more than 10 minutes to solve. Spend the time in front of students terminal and help the struggling students. At the end of 10 minutes you will know how the students approached the problem and also you can get an insight how much students grasped. This gives you the signal whether your explanation understandable or not.</li>
<li>Write the code for the problem in front of the students, please don&#8217;t show already written code. Discuss what are the approaches for the same problem and how others students solved.</li>
<li>Having few volunteers to help during workshops is great. Students will start approaching them for hurdles.</li>
<li>Don&#8217;t flood students with too much of data in a single day. Make sure workshop is for only 6 - 7 hours per day. They need to time to digest.</li>
<li>When you are teaching list comprehensions make sure students write the same example using for loop and show them the one liner. Here most students gets confused with syntax. Now give them more problems to solve using list comprehension.</li>
<li>Be careful in using variable names, students will use the same variable names in their code.</li>
<li>Don&#8217;t teach <code>classes</code> for beginners, you will waste lot of time explaining public, private method, <code>__init__</code>, <code>self</code>. Instead use the time to solve problems.</li>
<li>Spend enough time in writing small programs(use text editor) using <code>if</code>, <code>else</code>, <code>elif</code>, <code>for</code> so that they get used to indentation. </li>
<li>Give problems like greatest of three numbers to show them the use case of <code>a &gt; b &gt; c</code> rather than using <code>a &gt; b and b &gt; c</code>.</li>
<li>Give problems like finding total number of lines, words in a file. This helps in getting rid of <code>for loop with counter</code>, rather encourages to use <code>len(f.readlines())</code>.</li>
<li>Don&#8217;t teach <code>*args</code>, <code>**kwargs</code> but spend time in making them understand function can accept functions as parameters, so it becomes easy for them to digest <code>len(f.readlines())</code>. </li>
<li>Make sure to teach <code>dir</code> and <code>help</code> this helps people who are interested to explore further.</li>
<li>If you want to enforce pythonic way of writing code like list comprehension, passing function to function show few examples comparing pythonic and non pythonic way. Advocate the advantage. </li>
<li>Leave your email id with students and collect the feedback via google forms or physical form make sure it is anonymous. </li>
<li>Students will ask recommendation for books, projects etc &#8230; Be prepared to handle. </li>
<li>Don&#8217;t teach <code>raw_input</code> or <code>input</code> teach them how to accept command line parameters.</li>
</ol><p><code>There's no such thing as a bad student, only a bad teacher</code> - Unknown</p>
						</div>
						
						<div class="info">							
							 
								<div>
									<p class="tags-label">Tags:</p>
									<ul class="tags">
										<li><a href="http://kracekumar.com/tagged/python">python</a></li><li><a href="http://kracekumar.com/tagged/tip">tip</a></li><li><a href="http://kracekumar.com/tagged/training">training</a></li><li><a href="http://kracekumar.com/tagged/teaching">teaching</a></li><li><a href="http://kracekumar.com/tagged/college">college</a></li>
									</ul>
								</div>
							
							<p><a href="http://kracekumar.com/post/58802831892/observations-from-handling-python-workshop-in">Permalink</a>  <span style="float: right;"><a class="dsq-comment-count" href="http://kracekumar.com/post/58802831892/observations-from-handling-python-workshop-in#disqus_thread"></a></span></p>
						</div>
						 
						<!--[if IE]><div class="date-shadow ie-rotate"><![endif]-->
						<!--[if !IE]><!--><div class="date-shadow"><!--<![endif]-->
							<span class="cover"></span>
							<span class="shadow"></span>
							<span class="darker"></span>
						</div>
						
					</div>
					

					
					
					
					
					

					
					
					
					
					
					

		
		
		
		
		
					

					
					
					
					

					
					
					
					
					

					
					
					
					
					
					

					
					
					
					
					


            
                
            
			
						
			
			
					
					<div class="post text">
						 
						<div class="date">
							<p><span class="day">20</span> 8 / 2013</p>
						</div>
						
						
						<div class="content">
							
							<h2 class="link"><a href="http://kracekumar.com/post/58766042678/avoid-accessing-wrong-column-in-csv">avoid accessing wrong column in csv</a></h2>
							
		
							<p><em>Avoid accessing wrong column in csv</em></p>

<p>I was parsing few csv files. All were from same provider. Format is
<code>Date, Name, Email, Company, City</code> etc in one file. I made an assumption all the downloaded files are in the same format. For my surprise few files had same format and others din&#8217;t.</p>

<pre><code>with open(filename, 'rb') as f:
    reader = csv.reader(f)
    reader.next() # first row contains column names
    for row in reader:
        name, email, company = row[1], row[2], row[3]
        #save to db
</code></pre>

<p>In the above code the fundamental mistake is fixing the position of the columns in csv file. What happens if <code>email</code> and <code>company</code> position is interchanged? In simple <code>screwed</code>.</p>

<p><em>How can I avoid these situations&#160;?</em></p>

<pre><code> with open(filename, 'rb') as f:
     reader = csv.reader(f)
     header = reader.next() #reader is not list
     name_pos, email_pos, company_pos =          header.index("Name"),header.index("Email"),header.index("Company")

 with open(filename, 'rb') as f:
     reader = csv.reader(f)
     reader.next()
     for row in reader:
         name, email, company = row[name_pos], row[email_pos], row[company_pos]
         #save to db
</code></pre>

<p>The code is bit longer here, but robost. The above snippet doesn&#8217;t rely on column position but only relies on column name in the first line. Ofcourse <code>header.index</code> will raise <code>ValueError</code> you can wrap the exception. First all the required column positions are retrieved, file is reopened, first row is omitted and other details are accessed.</p>
						</div>
						
						<div class="info">							
							 
								<div>
									<p class="tags-label">Tags:</p>
									<ul class="tags">
										<li><a href="http://kracekumar.com/tagged/csv">csv</a></li><li><a href="http://kracekumar.com/tagged/python">python</a></li><li><a href="http://kracekumar.com/tagged/tip">tip</a></li>
									</ul>
								</div>
							
							<p><a href="http://kracekumar.com/post/58766042678/avoid-accessing-wrong-column-in-csv">Permalink</a>  <span style="float: right;"><a class="dsq-comment-count" href="http://kracekumar.com/post/58766042678/avoid-accessing-wrong-column-in-csv#disqus_thread"></a></span></p>
						</div>
						 
						<!--[if IE]><div class="date-shadow ie-rotate"><![endif]-->
						<!--[if !IE]><!--><div class="date-shadow"><!--<![endif]-->
							<span class="cover"></span>
							<span class="shadow"></span>
							<span class="darker"></span>
						</div>
						
					</div>
					

					
					
					
					
					

					
					
					
					
					
					

		
		
		
		
		
					

					
					
					
					

					
					
					
					
					

					
					
					
					
					
					

					
					
					
					
					


            
                
            
			
						
			
			
					
					<div class="post text">
						 
						<div class="date">
							<p><span class="day">28</span> 7 / 2013</p>
						</div>
						
						
						<div class="content">
							
							<h2 class="link"><a href="http://kracekumar.com/post/56633639978/funny-experience-of-using-trace-module-to-trace">Funny experience of using trace module to trace function call</a></h2>
							
		
							<p>I came across this issue in <a href="https://github.com/jkbr/httpie/issues/128" target="_blank">httpie</a> and started my investigation.</p>

<p>The problem is while pretty printing the json, output is alpha sorted because keys are hashed and user wanted to preserve the order. Then I made 3 comments to the issue. <a href="https://github.com/jkbr/httpie/issues/128#issuecomment-21661339" target="_blank">First comment</a> was half correct and explained why it isn&#8217;t possible to get the desired output, quickly I figured my assumptions were wrong and <a href="https://github.com/jkbr/httpie/issues/128#issuecomment-21661648" target="_blank">second comment</a> explained what is actually happening, finally I proposed the <a href="https://github.com/jkbr/httpie/issues/128#issuecomment-21661700" target="_blank">solution</a>. Since I made wrong assumptions and to make further debugging easy, I want to find easiest way to trace all functions/methods invocations.</p>

<p>I remember <a href="http://nibrahim.net.in/" target="_blank">Noufal</a> sharing small snippet in twitter, but I wanted to use <a href="http://docs.python.org/2/library/trace.html" target="_blank">trace</a> and wrote small snippet(final one).</p>

<pre><code> #! -*- coding: utf-8 -*-

 from httpie.core import main
 #import pdb
 import sys
 #import os
 #import trace

 #pdb.set_trace()
 main(args=sys.argv[1:])
</code></pre>

<p>First I ran the command <code>python -m trace --trace httpie_test.py --pretty=all <a href="http://httpbin.org/get" target="_blank">http://httpbin.org/get</a></code> and it printed some 20 million lines. Then I got clever idea of using <a href="http://pythonconquerstheuniverse.wordpress.com/2009/09/10/debugging-in-python/" target="_blank">pdb</a>.</p>

<p>I debugged with pdb for half an hour pressing <code>s</code> key and fed up. The pdb was beautiful like her, I was enjoying each line it was printing, it was like watching her speak and I was mesemerized. After half an hour I gave up and went back to trace command. Finally I figured out I can use <code>--ignore-module</code> from command line.</p>

<p>After one hour of spending time, final command looked like(scroll completely)</p>

<pre><code> ➜  snippets  python -m trace --trace --ignore- module=os,sre_compile,sre_parse,zipfile,text_file,sysconfig,pkg_resources,re,posixpath,genericpath,decoder,hex_codec,socket,httplib,pkgutil,stat,token,style,calendar,spawn,util,collections,abc,decimal,lexer,StringIO,plist,argparse,_abcoll,structures,Queue,threading,_collections,urlparse,cookielib,platform,cookielib,terminal256,formatter,__init__,stringprep,_weakrefset,filter,encoder,codecs,latin,connectionpool,plugin,html,pygmentplugin,htmlentitydefs,__future__,weakref,UserDict,atexit,functools,base64,struct,hashlib,ssl,textwrap,six,exceptions,warnings,mimetools,tempfile,random,tempfile,rfc822,urllib,filepost,uuid,_endian,dyld,dylib,framework,io,poolmanager,pyopenssl,utils,cgi,netrc,shlex,compat,copy,numbers,locale,locale,unicode_escape,urllib2,Cookie,_LWPCookieJar,_MozillaCookieJar,ordered_dict,cookies,certs,ascii,status_codes,gettext,scanner,config,minicompat,domreg,minidom,xmlbuilder,NodeFilter,shutil,copy_reg,string,plistlib,_mapping,bbcode,img,Image,FixTk,ImageMode,ImagePalette,ImageColor,ImageDraw,ImageFont,latex,other,console,rtf,svg,terminal,solarized,getpass,pprint,downloads,idna,agile,web,unistring,functional,jvm,compiled,mimetypes httpie_test.py --pretty=all --verbose <a href="http://headers.jsontest.com/" target="_blank">http://headers.jsontest.com/</a> &gt;&gt; op.txt
 ➜  snippets  wc -l op.txt
     2344 op.txt
</code></pre>

<p>The essay is 1269 characters to terminal and the result of it is <a href="https://github.com/jkbr/httpie/pull/151" target="_blank">pull request</a>.</p>
						</div>
						
						<div class="info">							
							 
								<div>
									<p class="tags-label">Tags:</p>
									<ul class="tags">
										<li><a href="http://kracekumar.com/tagged/python">python</a></li><li><a href="http://kracekumar.com/tagged/trace">trace</a></li><li><a href="http://kracekumar.com/tagged/httpie">httpie</a></li>
									</ul>
								</div>
							
							<p><a href="http://kracekumar.com/post/56633639978/funny-experience-of-using-trace-module-to-trace">Permalink</a>  <span style="float: right;"><a class="dsq-comment-count" href="http://kracekumar.com/post/56633639978/funny-experience-of-using-trace-module-to-trace#disqus_thread"></a></span></p>
						</div>
						 
						<!--[if IE]><div class="date-shadow ie-rotate"><![endif]-->
						<!--[if !IE]><!--><div class="date-shadow"><!--<![endif]-->
							<span class="cover"></span>
							<span class="shadow"></span>
							<span class="darker"></span>
						</div>
						
					</div>
					

					
					
					
					
					

					
					
					
					
					
					

		
		
		
		
		
					

					
					
					
					

					
					
					
					
					

					
					
					
					
					
					

					
					
					
					
					


            
                
            
			
						
			
			
					
					<div class="post text">
						 
						<div class="date">
							<p><span class="day">18</span> 7 / 2013</p>
						</div>
						
						
						<div class="content">
							
							<h2 class="link"><a href="http://kracekumar.com/post/55796363713/why-this-kolaveri-di-song-words-language">Why This Kolaveri Di song words language </a></h2>
							
		
							<p>I was wondering how many words in <a href="https://www.youtube.com/watch?v=JJpCV31n7T8" target="_blank">why this kolaveri di</a> song belongs to english. So I wrote this code to evaluate.</p>

<pre><code>#! /usr/bin/env
#! -*- coding: utf-8 -*-

lyrics = """
yo boys i am singing song
soup song
flop song
why this kolaveri kolaveri kolaveri di
why this kolaveri kolaveri kolaveri di
rhythm correct
why this kolaveri kolaveri kolaveri di
maintain please
why this kolaveri di

distance la moon-u moon-u
moon-u color-u white-u
white background night-u night-u
night-u color-u black-u

why this kolaveri kolaveri kolaveri di
why this kolaveri kolaveri kolaveri di

white skin-u girl-u girl-u
girl-u heart-u black-u
eyes-u eyes-u meet-u meet-u
my future dark

why this kolaveri kolaveri kolaveri di
why this kolaveri kolaveri kolaveri di

maama notes eduthuko
apdiye kaila snacks eduthuko
pa pa paan pa pa paan pa pa paa pa pa paan
sariya vaasi
super maama ready
ready 1 2 3 4

whaa wat a change over maama

ok maama now tune change-u

kaila glass
only english

hand la glass
glass la scotch
eyes-u full-a tear-u
empty life-u
girl-u come-u
life reverse gear-u
love-u love-u
oh my love-u
you showed me bouv-u
cow-u cow-u holy cow-u
i want you hear now-u
god i am dying now-u
she is happy how-u

this song for soup boys-u
we dont have choice-u

why this kolaveri kolaveri kolaveri di
why this kolaveri kolaveri kolaveri di
why this kolaveri kolaveri kolaveri di
why this kolaveri kolaveri kolaveri di

flop song
"""
dict_file_path = "/usr/share/dict/words"


def sanitize(words):
    for index, word in enumerate(words):
        if word.endswith("-u") or word.endswith("-a"):
            words[index] = word[:-2]


if __name__ == "__main__":
    # Get all words
    words = [word for line in lyrics.split("\n") for word in line.split(" ") if word != ""]
    # Load english words
    dictionary_words = open(dict_file_path).readlines()
    # Remove \n in dictionary words
    dictionary_words = [word.split("\n")[0] for word in dictionary_words]
    # Add missing words
    dictionary_words.append("boys")
    dictionary_words.append("snacks")
    dictionary_words.append("eyes")
    dictionary_words.append("english")
    dictionary_words.append("1")
    dictionary_words.append("2")
    dictionary_words.append("3")
    dictionary_words.append("4")
    dictionary_words.append("notes")
    dictionary_words.append("ok")
    dictionary_words.append("showed")
    # Remove -u which sounds like Tamil words
    sanitize(words)
    # Find unique words
    unique_words = set(words)
    # Find english words
    eng_words = [word for word in unique_words if word in dictionary_words]
    non_eng_words = unique_words - set(eng_words)
    # Remove empty element
    non_eng_words = [word for word in non_eng_words if word != ""]
    print("==English Words==")
    print(eng_words)
    print("==Non English Words==")
    print(non_eng_words)
    print("Total unique words: %d,\n English words: %d,\n Non English words: %d,\n percentage of english words: %f" % (len(unique_words), len(eng_words), len(non_eng_words), float(len(eng_words))/len(unique_words) * 100))
</code></pre>

<p><em>Output</em></p>

<pre><code>➜  lua  python why_this_kolaveri_di.py
==English Words==
['over', 'skin', 'la', 'only', 'black', '4', 'rhythm', 'yo', 'di', 'choice', 'dark', 'background', '2', 'now', 'tear', 'notes', 'she', 'night', 'girl', 'for', 'god', 'please', 'moon', '3', 'correct', 'we', 'full', 'how', 'super', 'change', 'ok', 'reverse', 'cow', 'oh', 'love', 'dont', 'color', 'singing', 'come', 'pa', 'white', 'wat', 'empty', 'happy', 'eyes', 'gear', 'holy', 'boys', 'hear', 'me', 'distance', 'showed', 'this', 'soup', 'future', 'meet', 'my', 'heart', 'have', 'snacks', 'is', 'am', 'want', 'ready', 'dying', 'song', '1', 'you', 'hand', 'why', 'tune', 'a', 'glass', 'i', 'scotch', 'flop', 'life', 'maintain', 'english']
==Non English Words==
['kaila', 'sariya', 'paa', 'apdiye', 'eduthuko', 'vaasi', 'maama', 'whaa',  'bouv', 'paan', 'kolaveri']
Total unique words: 90,
English words: 79,
Non English words: 11,
Percentage of english words: 87.777778
</code></pre>

<p>It turns out, song contains <code>90</code> unqiue words, <code>79</code> words are <code>english</code> and <code>11</code> are <code>non english</code>(Tamil). <code>87.8%</code> words are english. So here after call <code>why this kolaveri di</code> song as <code>Tanglish(Tamil + English)</code> song.</p>

<p>Gist: <a href="https://gist.github.com/kracekumar/6031683" target="_blank">https://gist.github.com/kracekumar/6031683</a></p>
						</div>
						
						<div class="info">							
							 
								<div>
									<p class="tags-label">Tags:</p>
									<ul class="tags">
										<li><a href="http://kracekumar.com/tagged/python">python</a></li><li><a href="http://kracekumar.com/tagged/why-this-kolaveri-di">why-this-kolaveri-di</a></li><li><a href="http://kracekumar.com/tagged/tanglish">tanglish</a></li><li><a href="http://kracekumar.com/tagged/tamil">tamil</a></li>
									</ul>
								</div>
							
							<p><a href="http://kracekumar.com/post/55796363713/why-this-kolaveri-di-song-words-language">Permalink</a> <a href="http://kracekumar.com/post/55796363713/why-this-kolaveri-di-song-words-language#notes"><span class="notes">1 note</span></a> <span style="float: right;"><a class="dsq-comment-count" href="http://kracekumar.com/post/55796363713/why-this-kolaveri-di-song-words-language#disqus_thread"></a></span></p>
						</div>
						 
						<!--[if IE]><div class="date-shadow ie-rotate"><![endif]-->
						<!--[if !IE]><!--><div class="date-shadow"><!--<![endif]-->
							<span class="cover"></span>
							<span class="shadow"></span>
							<span class="darker"></span>
						</div>
						
					</div>
					

					
					
					
					
					

					
					
					
					
					
					

		
		
		
		
		
					

					
					
					
					

					
					
					
					
					

					
					
					
					
					
					

					
					
					
					
					


            
                
            
			
						
			
			
					
					<div class="post text">
						 
						<div class="date">
							<p><span class="day">02</span> 7 / 2013</p>
						</div>
						
						
						<div class="content">
							
							<h2 class="link"><a href="http://kracekumar.com/post/54437887454/ssl-for-flask-local-development">SSL for flask local development </a></h2>
							
		
							<p>Recently at <a href="https://blog.hasgeek.com/2013/https-everywhere-at-hasgeek" target="_blank">HasGeek</a> we moved all our web application to <code>https</code>. So I wanted to have all my development environment urls to have <code>https</code>.</p>

<p><em>How to have <code>https</code> in <a href="http://flask.pocoo.org" target="_blank">flask</a> app</em></p>

<p><em>Method 1</em></p>

<pre><code>from flask import Flask
app = Flask(__name__)
app.run('0.0.0.0', debug=True, port=8100, ssl_context='adhoc')
</code></pre>

<p>In the above piece of code, <code>ssl_context</code> variable is passed to <code>werkezug.run_simple</code> which creates SSL certificates using <code>OpenSSL</code>, you may need to install <code>pyopenssl</code>. I had issues with this method, so I generated self signed certificate.</p>

<p><em>Method 2</em></p>

<ul><li><p>Generate a private key<br/><code>openssl genrsa -des3 -out server.key 1024</code></p></li>
<li><p>Generate a CSR<br/><code>openssl req -new -key server.key -out server.csr</code></p></li>
<li><p>Remove Passphrase from key<br/><code>cp server.key server.key.org</code>
<code>openssl rsa -in server.key.org -out server.key</code></p></li>
<li><p>Generate self signed certificate<br/><code>openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt</code></p></li>
</ul><p><em>code</em></p>

<pre><code>from flask import Flask    
app = Flask(__name__)    
app.run('0.0.0.0', debug=True, port=8100, ssl_context=('/Users/kracekumarramaraju/certificates/server.crt', '/Users/kracekumarramaraju/certificates/server.key'))    
</code></pre>

<p><code>ssl_context</code> can take option <code>adhoc</code> or <code>tuple of the form (cert_file, pkey_file)</code>.</p>

<p>In case you are using <code>/etc/hosts</code>, add something similar <code>127.0.0.1    <a href="https://hacknight.local" target="_blank">https://hacknight.local</a></code> for accessing the web application locally.</p>

<p>Here is much detailed post about generating self signed <a href="http://www.akadia.com/services/ssh_test_certificate.html" target="_blank">certificates</a>.</p>
						</div>
						
						<div class="info">							
							 
								<div>
									<p class="tags-label">Tags:</p>
									<ul class="tags">
										<li><a href="http://kracekumar.com/tagged/python">python</a></li><li><a href="http://kracekumar.com/tagged/ssl">ssl</a></li><li><a href="http://kracekumar.com/tagged/https">https</a></li><li><a href="http://kracekumar.com/tagged/flask">flask</a></li>
									</ul>
								</div>
							
							<p><a href="http://kracekumar.com/post/54437887454/ssl-for-flask-local-development">Permalink</a>  <span style="float: right;"><a class="dsq-comment-count" href="http://kracekumar.com/post/54437887454/ssl-for-flask-local-development#disqus_thread"></a></span></p>
						</div>
						 
						<!--[if IE]><div class="date-shadow ie-rotate"><![endif]-->
						<!--[if !IE]><!--><div class="date-shadow"><!--<![endif]-->
							<span class="cover"></span>
							<span class="shadow"></span>
							<span class="darker"></span>
						</div>
						
					</div>
					

					
					
					
					
					

					
					
					
					
					
					

		
		
		
		
		
					

					
					
					
					

					
					
					
					
					

					
					
					
					
					
					

					
					
					
					
					


            
                
            
			
						
			
			
					
					<div class="post text">
						 
						<div class="date">
							<p><span class="day">23</span> 6 / 2013</p>
						</div>
						
						
						<div class="content">
							
							<h2 class="link"><a href="http://kracekumar.com/post/53685731325/cp-command-implementation-and-benchmark-in-python-go">cp command implementation and benchmark in python, go, lua</a></h2>
							
		
							<p>I was wondering how much will be the speed difference between <code>cp</code> command, <code>rsync</code> and implementation in <code>python</code>, <code>go</code>, <code>lua</code> and so wrote this <a href="https://github.com/kracekumar/cp-tests" target="_blank">code</a>.</p>

<p><em>Background</em></p>

<ol><li><code>python</code> has two versions one with <code>gevent</code> and without <code>gevent</code>. Both the version uses <code>shutil</code> for copying files and directory tree.      </li>
<li><code>go</code> uses <a href="https://github.com/opesun/copyrecur" target="_blank">https://github.com/opesun/copyrecur</a> for copying recursively.   </li>
<li><code>lua</code> uses <code>lfs - LuaFileSystem</code> module. <code>lfs</code> has support for creating directory but not for files, in order to copy the files low level file opening and writing to file technique is used.    </li>
<li><code>rsync --progress -ah -R</code> was also added to the test.   </li>
</ol><p><em>Code</em></p>

<p>Directory chosen for the test has <code>28</code> repos which are basically python projects, go repos with git version control. Total size of the directory <code>/Users/kracekumarramaraju/code</code> is <code>300M</code>(du -sh /Users/kracekumarramaraju/code) and destination is external disk which supports <code>USB3.0</code>.</p>

<p><code>Python without gevent</code></p>

<pre><code>import sys
import shutil


def cp(source, dest):    
    shutil.copytree(source, dest)


if __name__ == "__main__":
    if len(sys.argv) != 3:
        print("Help")
        print("python cp.py source dest is the format")
        sys.exit(1)
    cp(sys.argv[1], sys.argv[2])
</code></pre>

<p><code>Python with gevent support</code></p>

<pre><code>import sys
import os
import shutil
import gevent


def cp(source, dest):
    shutil.copytree(source, dest)


def cpfile(source, dest):
    shutil.copy2(source, dest)


if __name__ == "__main__":
    if len(sys.argv) != 3:
        print("Help")
        print("python cp.py source dest is the format")
        os.exit(1)
    source, dest = sys.argv[1], sys.argv[2]
    os.mkdir(dest)
    tasks = []
    for name in os.listdir(source):
        source_path, dest_path = os.path.join(source, name), os.path.join(dest, name)
        if os.path.isdir(source_path):
            tasks.append(gevent.spawn(cp, source_path, dest_path))
        else:
            tasks.append(gevent.spawn(cpfile, source_path, dest_path))
    gevent.joinall(tasks)
</code></pre>

<p><code>go</code></p>

<pre><code>package main

import (
    "fmt"
    "github.com/opesun/copyrecur"
    "log"
    "os"
)

func cp(source, dest string) {
    err := copyrecur.CopyDir(source, dest)
    if err != nil {
        log.Fatal(err)
    } else {
        log.Print("Files copied.")
    }
}

func main() {
    if len(os.Args) != 3 {
        fmt.Println("Syntax: go run cp.go source destination")
        os.Exit(1)
    }
    cp(os.Args[1], os.Args[2])
    fmt.Println("cp.go completed")
}
</code></pre>

<p><code>lua</code></p>

<pre><code>require "lfs"


function cp(source, dest)
    -- body
    for filename in lfs.dir(source) do
        if filename ~= '.' and filename ~= '..' then
            local source_path = source .. '/' .. filename
            local attr = lfs.attributes(source_path)
            --print(attr.mode, path)
            if type(attr) == "table" and attr.mode == "directory" then 
                local dest_path = dest .. "/" .. filename
                lfs.mkdir(dest_path)
                cp(source_path, dest_path)
            else
                local f = io.open(source_path, "rb")
                local content = f:read("*all")
                f:close()
                local w = io.open(dest .. "/" .. filename, "wb")
                w:write(content)
                w:close() 
            end
        end
    end
end

if #arg == 2 then
    cp(arg[1], arg[2])
else
    print("Syntax:")
    print("lua lua.go source dest")
end
</code></pre>

<p><code>rsync --progress -ah -R</code>.<br/>
 Plain <code>cp</code> command.</p>

<p><em>Tests</em></p>

<p>Shell <a href="https://github.com/kracekumar/cp-tests/blob/master/test.sh" target="_blank">script</a> to run the tests.</p>

<pre><code>echo "source directory size"
du -sh /Users/kracekumarramaraju/code
echo "cp.py - Python without gevent"
time python cp.py /Users/kracekumarramaraju/code /Volumes/My\ Passport/test/1
du -sh /Volumes/My\ Passport/test/1
echo "cp-gevent.py - Python with gevent"
time python cp-gevent.py /Users/kracekumarramaraju/code /Volumes/My\ Passport/test/2
du -sh /Volumes/My\ Passport/test/2
echo "alias cp='rsync --progress -ah' - Rsync"
time cp -R /Users/kracekumarramaraju/code /Volumes/My\ Passport/test/3
du -sh /Volumes/My\ Passport/test/3
echo "Plain cp command"
time /bin/cp -R /Users/kracekumarramaraju/code /Volumes/My\ Passport/test/4
du -sh /Volumes/My\ Passport/test/4
echo "cp.go - cp in Go lang"
time go run cp.go /Users/kracekumarramaraju/code /Volumes/My\ Passport/test/5
du -sh /Volumes/My\ Passport/test/5
echo "cp.lua - cp in lua"
time lua cp.lua /Users/kracekumarramaraju/code /Volumes/My\ Passport/test/6
du -sh /Volumes/My\ Passport/test/6
</code></pre>

<p><em>Results</em></p>

<pre><code>➜  cp-tests  ./test.sh
source directory size
300M    /Users/kracekumarramaraju/code
cp.py - Python without gevent

real    1m23.354s
user    0m1.818s
sys 0m5.032s
302M    /Volumes/My Passport/test/1
cp-gevent.py - Python with gevent

real    1m24.212s
user    0m1.772s
sys 0m4.748s
302M    /Volumes/My Passport/test/2
alias cp='rsync --progress -ah' - Rsync

real    1m21.145s
user    0m0.230s
sys 0m5.172s
302M    /Volumes/My Passport/test/3
Plain cp command

real    1m24.065s
user    0m0.232s
sys 0m5.174s
302M    /Volumes/My Passport/test/4
cp.go - cp in Go lang
2013/06/23 21:04:38 Files copied.
cp.go completed

real    1m27.786s
user    0m1.106s
sys 0m3.369s
302M    /Volumes/My Passport/test/5
cp.lua - cp in lua

real    1m19.340s
user    0m1.905s
sys 0m3.893s
302M    /Volumes/My Passport/test/6
</code></pre>

<p><em>Conclusion</em></p>

<ol><li>Surprisingly <code>lua</code> was fastest with <code>1m19.340s</code> and next one was <code>rsync</code> with <code>1m21.145s</code>.   </li>
<li>Slowest one was <code>go</code> with <code>1m27.786s</code>, I expected it to be faster than <code>python gevent</code>. Probably extra time was due to compiling go code. </li>
<li><code>Python</code> non <code>gevent</code> version took <code>1m23.354s</code>  and <code>gevent</code> version took <code>1m24.212s</code>,  <code>gevent</code> version spent less time in <code>user</code> and <code>system</code> space. </li>
<li><code>cp</code> command took <code>1m24.065s</code>, which was second slowest.</li>
<li>Since the test was basically I/O there ins&#8217;t much difference in speed of all versions.</li>
</ol><p><em>Further work</em></p>

<ol><li>Benchmark 1GB single file transfer using <code>lua</code> and <code>rsync</code>.    </li>
<li>Add all features of cp command to any one of the implementation and bench mark.</li>
</ol>
						</div>
						
						<div class="info">							
							 
								<div>
									<p class="tags-label">Tags:</p>
									<ul class="tags">
										<li><a href="http://kracekumar.com/tagged/cp">cp</a></li><li><a href="http://kracekumar.com/tagged/go-lang">go-lang</a></li><li><a href="http://kracekumar.com/tagged/python">python</a></li><li><a href="http://kracekumar.com/tagged/gevent">gevent</a></li><li><a href="http://kracekumar.com/tagged/lua">lua</a></li><li><a href="http://kracekumar.com/tagged/rsync">rsync</a></li>
									</ul>
								</div>
							
							<p><a href="http://kracekumar.com/post/53685731325/cp-command-implementation-and-benchmark-in-python-go">Permalink</a> <a href="http://kracekumar.com/post/53685731325/cp-command-implementation-and-benchmark-in-python-go#notes"><span class="notes">2 notes</span></a> <span style="float: right;"><a class="dsq-comment-count" href="http://kracekumar.com/post/53685731325/cp-command-implementation-and-benchmark-in-python-go#disqus_thread"></a></span></p>
						</div>
						 
						<!--[if IE]><div class="date-shadow ie-rotate"><![endif]-->
						<!--[if !IE]><!--><div class="date-shadow"><!--<![endif]-->
							<span class="cover"></span>
							<span class="shadow"></span>
							<span class="darker"></span>
						</div>
						
					</div>
					

					
					
					
					
					

					
					
					
					
					
					

		
		
		
		
		
					

					
					
					
					

					
					
					
					
					

					
					
					
					
					
					

					
					
					
					
					


            
                
            
			
						
			
			
			
			
			<div id="pagination" role="navigation">
				<p>						
					
					<a href="/tagged/python/page/2" class="older">&laquo; Older entries</a>
					
					
					
				</p>
			</div>
			
			
			
			
		</div>				
	</div>

	
	<div id="footer">
		<div class="wrapper">
			<ul class="links" role="navigation">
				<li><a href="/archive">Archive</a></li>
				
                <li><a href="/ask">Ask me anything</a></li>
                
				<li><a href="http://kracekumar.com/rss">RSS</a></li>
			</ul>
			<p class="info-theme" role="contentinfo">Powered by <a href="http://www.tumblr.com">Tumblr</a> and designed by <a href="http://kcmr.tumblr.com">Kcmr</a>.</p>
		</div>
	</div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-28499341-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    
        <script>
            (function() {
                var links = document.getElementsByTagName('a');
                var query = '?';
                for(var i = 0; i < links.length; i++) {
                    if(links[i].href.indexOf('#disqus_thread') >= 0) {
                        query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
                    }
                }
                document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/oolai/get_num_replies.js' + query + '"></' + 'script>');
            })();
        </script>
    
<!-- BEGIN TUMBLR CODE --><iframe id="tumblr_controls" width="1" height="1" frameborder="0" scrolling="no" style="position:absolute; z-index:2147483647; top:0; right:0; border:0; background-color:transparent; overflow:hidden; " src="http://assets.tumblr.com/assets/html/iframe/o.html?_v=7f3ccc52344f6f4db744590e355db381#src=http%3A%2F%2Fkracekumar.com%2Ftagged%2Fpython&amp;lang=en_US&amp;name=kracekumar&amp;avatar=http%3A%2F%2F31.media.tumblr.com%2Favatar_08684c9830f1_64.png&amp;title=Random+stream&amp;url=http%3A%2F%2Fkracekumar.com%2F&amp;page_slide=slide"></iframe><div id="teaser_iframe_container" style="display:none;"><iframe scrolling="no" frameborder="0" src="http://www.tumblr.com/assets/html/iframe/teaser.html#src=http%3A%2F%2Fkracekumar.com%2Ftagged%2Fpython&amp;lang=en_US&amp;name=kracekumar&amp;avatar=http%3A%2F%2F31.media.tumblr.com%2Favatar_08684c9830f1_64.png&amp;title=Random+stream&amp;url=http%3A%2F%2Fkracekumar.com%2F&amp;page_slide=slide" id="teaser_iframe" width="1" height="1"></iframe></div><script type="text/javascript">
    (function(Tumblr){
        var follow_iframe_initialized = false;
        if (Tumblr.FollowTeaser && Tumblr.PostMessageListener) {
            // Don't do anything until the first initialize event
            Tumblr.PostMessageListener.initialize(function(message, origin) {
                if (follow_iframe_initialized || message.length < 2) return;

                if (message[0] === 'follow_iframe' && message[1] === 'enable') {
                    Tumblr.FollowTeaser.current_page = 1;
                    Tumblr.FollowTeaser.infer_infinite_scroll = true;
                    Tumblr.FollowTeaser.create_from_tumblr_controls("http:\/\/assets.tumblr.com\/assets\/html\/iframe\/follow.html?_v=5e68f8079f31e083bf6f7ba6a7b4a52a");
                    Tumblr.FollowTeaser.scroll_listener(true);
                    follow_iframe_initialized = true;
                }
            });
        }
    })(this.Tumblr || (this.Tumblr = {}));
</script><!--[if IE]><script type="text/javascript">document.getElementById('tumblr_controls').allowTransparency=true;</script><![endif]--><iframe onload="javascript:this.contentWindow.postMessage(['tick_google_analytics', '/tagged/python?route=%2Ftagged%2F%3Atag'].join(';'), this.src.split('/analytics.html')[0]);  COMSCORE = true;this.contentWindow.postMessage('enable_comscore;' + window.location, this.src.split('/analytics.html')[0]);" src="http://assets.tumblr.com/analytics.html?dfe9b9d3e783ff1f12fd8ce1b733bdc0" scrolling="no" width="1" height="1" frameborder="0" style="background-color:transparent; overflow:hidden; position:absolute; top:0; left:0 z-index:9999;" id="ga_target"></iframe><script type="text/javascript">
      var _qevents = _qevents || [];

      (function() {
       var elem = document.createElement('script');

       elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
       elem.async = true;
       elem.type = "text/javascript";
       var scpt = document.getElementsByTagName('script')[0];
       scpt.parentNode.insertBefore(elem, scpt);
      })();
    </script><script type="text/javascript">
        _qevents.push( { qacct: 'p-19UtqE8ngoZbM' } );
    </script><noscript><div style="display: none;"><img src="//pixel.quantserve.com/pixel/'p-19UtqE8ngoZbM'.gif" height="1" width="1" alt="Quantcast"/></div></noscript><script type="text/javascript">!function(s){s.src='http://www.tumblr.com/impixu?T=1386440372&J=eyJ0eXBlIjoidXJsIiwidXJsIjoiaHR0cDpcL1wva3JhY2VrdW1hci5jb21cL3RhZ2dlZFwvcHl0aG9uIiwicmVxdHlwZSI6MCwicm91dGUiOiJcL3RhZ2dlZFwvOnRhZyJ9&U=MFHFHOOBCP&K=42f51ad010916013b6fdc9ad01554b0aa74dd49553f94d626eae0d49e52bfb4c&R='.replace(/&R=[^&$]*/,'').concat('&R='+escape(document.referrer)).slice(0,2000).replace(/%.?.?$/,'');}(new Image());</script><noscript><img style="position:absolute;z-index:-3334;top:0px;left:0px;visibility:hidden;" src="http://www.tumblr.com/impixu?T=1386440372&J=eyJ0eXBlIjoidXJsIiwidXJsIjoiaHR0cDpcL1wva3JhY2VrdW1hci5jb21cL3RhZ2dlZFwvcHl0aG9uIiwicmVxdHlwZSI6MCwicm91dGUiOiJcL3RhZ2dlZFwvOnRhZyIsIm5vc2NyaXB0IjoxfQ==&U=MFHFHOOBCP&K=a6241b91fdbb4788b117dda12e509ea5ca0a54d403a075ec949deebe0e4c88f3&R="></noscript><script type="text/javascript">!function(s){s.src='http://www.tumblr.com/impixu?T=1386440372&J=eyJ0eXBlIjoicG9zdCIsInVybCI6Imh0dHA6XC9cL2tyYWNla3VtYXIuY29tXC90YWdnZWRcL3B5dGhvbiIsInJlcXR5cGUiOjAsInJvdXRlIjoiXC90YWdnZWRcLzp0YWciLCJwb3N0cyI6W3sicG9zdGlkIjoiNjc3NjE3MDg5NjYiLCJibG9naWQiOiI1NjUxMTA4Iiwic291cmNlIjozM30seyJwb3N0aWQiOiI2MzgzNDY5NjAxNSIsImJsb2dpZCI6IjU2NTExMDgiLCJzb3VyY2UiOjMzfSx7InBvc3RpZCI6IjYzODMyNzEyMjAyIiwiYmxvZ2lkIjoiNTY1MTEwOCIsInNvdXJjZSI6MzN9LHsicG9zdGlkIjoiNjExMjUwNDA4MTMiLCJibG9naWQiOiI1NjUxMTA4Iiwic291cmNlIjozM30seyJwb3N0aWQiOiI1ODgwMjgzMTg5MiIsImJsb2dpZCI6IjU2NTExMDgiLCJzb3VyY2UiOjMzfSx7InBvc3RpZCI6IjU4NzY2MDQyNjc4IiwiYmxvZ2lkIjoiNTY1MTEwOCIsInNvdXJjZSI6MzN9LHsicG9zdGlkIjoiNTY2MzM2Mzk5NzgiLCJibG9naWQiOiI1NjUxMTA4Iiwic291cmNlIjozM30seyJwb3N0aWQiOiI1NTc5NjM2MzcxMyIsImJsb2dpZCI6IjU2NTExMDgiLCJzb3VyY2UiOjMzfSx7InBvc3RpZCI6IjU0NDM3ODg3NDU0IiwiYmxvZ2lkIjoiNTY1MTEwOCIsInNvdXJjZSI6MzN9LHsicG9zdGlkIjoiNTM2ODU3MzEzMjUiLCJibG9naWQiOiI1NjUxMTA4Iiwic291cmNlIjozM31dfQ==&U=GBINNEPEGK&K=41e989382187bcc8f12d8765a830f9d13637d350fce9634d1d91413967840841&R='.replace(/&R=[^&$]*/,'').concat('&R='+escape(document.referrer)).slice(0,2000).replace(/%.?.?$/,'');}(new Image());</script><noscript><img style="position:absolute;z-index:-3334;top:0px;left:0px;visibility:hidden;" src="http://www.tumblr.com/impixu?T=1386440372&J=eyJ0eXBlIjoicG9zdCIsInVybCI6Imh0dHA6XC9cL2tyYWNla3VtYXIuY29tXC90YWdnZWRcL3B5dGhvbiIsInJlcXR5cGUiOjAsInJvdXRlIjoiXC90YWdnZWRcLzp0YWciLCJwb3N0cyI6W3sicG9zdGlkIjoiNjc3NjE3MDg5NjYiLCJibG9naWQiOiI1NjUxMTA4Iiwic291cmNlIjozM30seyJwb3N0aWQiOiI2MzgzNDY5NjAxNSIsImJsb2dpZCI6IjU2NTExMDgiLCJzb3VyY2UiOjMzfSx7InBvc3RpZCI6IjYzODMyNzEyMjAyIiwiYmxvZ2lkIjoiNTY1MTEwOCIsInNvdXJjZSI6MzN9LHsicG9zdGlkIjoiNjExMjUwNDA4MTMiLCJibG9naWQiOiI1NjUxMTA4Iiwic291cmNlIjozM30seyJwb3N0aWQiOiI1ODgwMjgzMTg5MiIsImJsb2dpZCI6IjU2NTExMDgiLCJzb3VyY2UiOjMzfSx7InBvc3RpZCI6IjU4NzY2MDQyNjc4IiwiYmxvZ2lkIjoiNTY1MTEwOCIsInNvdXJjZSI6MzN9LHsicG9zdGlkIjoiNTY2MzM2Mzk5NzgiLCJibG9naWQiOiI1NjUxMTA4Iiwic291cmNlIjozM30seyJwb3N0aWQiOiI1NTc5NjM2MzcxMyIsImJsb2dpZCI6IjU2NTExMDgiLCJzb3VyY2UiOjMzfSx7InBvc3RpZCI6IjU0NDM3ODg3NDU0IiwiYmxvZ2lkIjoiNTY1MTEwOCIsInNvdXJjZSI6MzN9LHsicG9zdGlkIjoiNTM2ODU3MzEzMjUiLCJibG9naWQiOiI1NjUxMTA4Iiwic291cmNlIjozM31dLCJub3NjcmlwdCI6MX0=&U=GBINNEPEGK&K=98d0dba59aa0494205de6534cd878071885a51f3e5f44ba974a19ff598487204&R="></noscript><script type="text/javascript" src="http://l.yimg.com/ss/rapid-3.9.js"></script><script>
                    (function(YAHOO) {
                        if (YAHOO) {
                            YAHOO.i13n.beacon_server = 'nol.yahoo.com';
                            var keys = { pd:'/tagged/:tag', _li:0, i_rad:0, i_strm:0 };
                            YAHOO.rapid = new YAHOO.i13n.Rapid({spaceid:1197719232, oo:1, client_only:1, yql_enabled:false, keys:keys});
                        }
                    })(window.YAHOO);
                </script><!-- END TUMBLR CODE -->

</body>
</html>