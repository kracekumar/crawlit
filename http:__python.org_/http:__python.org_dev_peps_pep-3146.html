<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>PEP 3146 -- Merging Unladen Swallow into CPython</title>
  <meta name="keywords" content="PEP 3146 -- Merging Unladen Swallow into CPython" />
  <meta name="description" content="PEP 3146 -- Merging Unladen Swallow into CPython" />
  <link rel="alternate" type="application/rss+xml" title="Community Events"
        href="http://www.python.org/channews.rdf" />
  <link rel="alternate" type="application/rss+xml" title="Python Recipes"
        href="http://aspn.activestate.com/ASPN/Cookbook/Python/index_rss" />
  <link rel="alternate" type="application/rss+xml" title="Usergroup News"
        href="http://python-groups.blogspot.com/feeds/posts/default" />
  <link rel="alternate" type="application/rss+xml" title="Python Screencasts"
        href="http://www.showmedo.com/latestVideoFeed/rss2.0?tag=python" />
  <link rel="alternate" type="application/rss+xml" title="Python Podcasts"
        href="http://www.awaretek.com/python/index.xml" />
  <link rel="alternate" type="application/rss+xml" title="Foundation News"
        href="http://feeds.feedburner.com/PythonSoftwareFoundationNews" />
  <link rel="alternate" type="application/rss+xml" title="Python Enhancement Proposals"
        href="http://www.python.org/dev/peps/peps.rss" />
  <link rel="alternate" type="application/rss+xml" title="Python Job Opportunities"
        href="http://www.python.org/community/jobs/jobs.rss" />
  <link rel="alternate" type="application/rss+xml" title="Reddit Feed of Python What's New Online"
        href="http://www.reddit.com/r/Python/.rss" />
  <link rel="alternate" type="application/rss+xml" title="Python Insider"
        href="http://feeds.feedburner.com/PythonInsider" />

  <link rel="stylesheet" type="text/css" media="screen" id="screen-switcher-stylesheet"
        href="/styles/screen-switcher-default.css" />
  <link rel="stylesheet" type="text/css" media="sc&#82;een"
        href="/styles/netscape4.css" />
  <link rel="stylesheet" type="text/css" media="print"
        href="/styles/print.css" />
  <link rel="alternate stylesheet" type="text/css" media="screen"
        href="/styles/largestyles.css" title="large text" />
  <link rel="alternate stylesheet" type="text/css" media="screen"
        href="/styles/defaultfonts.css" title="default fonts" />

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search under the www.python.org Domain"
        href="/search-pysite.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search within the Python Wiki"
        href="/search-pywiki.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search within Python Books at Google Book Search"
        href="/search-pybooks.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search within the Python Documentation"
        href="/search-pydocs.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search for a Module in the Standard Library"
        href="/search-pymodules.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search for Packages inside the Cheeseshop (PyPI)"
        href="/search-pycheese.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search Archives of the Main Python Mailing List"
        href="/search-pythonlist.xml"/>

  <script type="text/javascript" src="/js/iotbs2-key-directors-load.js"></script>
  <script type="text/javascript" src="/js/iotbs2-directors.js"></script>
  <script type="text/javascript" src="/js/iotbs2-core.js"></script>

</head>


<body>
  <!-- Logo -->
  <h1 id="logoheader">
    <a href="/" id="logolink" accesskey="1"><img id="logo" src="/images/python-logo.gif" alt="homepage" border="0" /></a>
  </h1>
  <!-- Skip to Navigation -->
  <div class="skiptonav"><a href="#left-hand-navigation" accesskey="2"><img src="/images/trans.gif" id="skiptonav" alt="skip to navigation" border="0" /></a></div>
  <div class="skiptonav"><a href="#content-body" accesskey="3"><img src="/images/trans.gif" id="skiptocontent" alt="skip to content" border="0" /></a></div>
  <!-- Utility Menu -->
  <div id="utility-menu">
    <!-- Search Box -->
    <div id="searchbox">
      <form method="get" action="http://google.com/search" id="searchform" name="searchform">
        <div id="search">
          <input type="hidden" id="domains" name="domains" value="www.python.org" />
          <input type="hidden" id="sitesearch" name="sitesearch" value="www.python.org" />
          <input type="hidden" id="sourceid" name="sourceid" value="google-search" />
          <input type="text" class="input-text" name="q" id="q" />
          <input type="submit" value="search" class="input-button" name="submit" id="submit" />
          <a href="/search" class="reference">Advanced Search</a>
        </div>
      </form>
    </div>
    <div id="screen-switcher"></div>
  </div>

  <div id="left-hand-navigation">
    <!-- Main Menu -->
    <div id="menu">
      <ul class="level-one">
            <li>
          <a href="/about/" title="About The Python Language">About</a>
        </li>
            <li>
          <a href="/news/" title="Major Happenings Within the Python Community">News</a>
        </li>
            <li>
          <a href="/doc/" title="Tutorials, Library Reference, C API">Documentation</a>
        </li>
            <li>
          <a href="/download/" title="Start Running Python Under Windows, Mac, Linux and Others">Download</a>
        </li>
            <li>
          <a href="/getit/" title="Alternate Download page for China">ä¸è½½</a>
        </li>
            <li>
          <a href="/community/" title="Mailing Lists, Jobs, Conferences, SIGs, Online Chats">Community</a>
        </li>
            <li>
          <a href="/psf/" title="Python Software Foundation">Foundation</a>
        </li>
            <li>
          <a href="http://docs.python.org/devguide/" title="Development of the Python language and website">Core Development</a>
        </li>
      </ul>
    </div>

    <!-- Quick Links -->
    <h4><a style="margin-top:1.5em" href="http://wiki.python.org/moin/">Python Wiki</a></h4>
    <h4><a style="margin-top:1.5em" href="http://blog.python.org/">Python Insider Blog</a></h4>
    <h4><a style="margin-top:1.5em" href="http://wiki.python.org/moin/Python2orPython3">Python 2 or 3?</a></h4>
    <h4><a style="color:#D58228; margin-top:1.5em" href="/psf/donations/">Help Fund Python</a></h4>
    <div style="align:center; padding-top: 0.5em; padding-left: 1em">
      <a href="/psf/donations/"><img width="116" height="42" src="/images/donate.png" alt="" title="" /></a>
    </div>
    <div style="align:center; padding-top: 0.5em; padding-left: 2.5em">
            <a href="http://wiki.python.org/moin/Languages"><img
	      style="align:center"
              width="94" height="46"
	      src="/images/worldmap.jpg" alt="[Python resources in languages other than English]" /></a>
    </div>
    <div style="align:center; padding-top: 0.0em; padding-left: 0em">
       <h4><a href="http://wiki.python.org/moin/Languages">Non-English Resources</a></h4>
    </div>
    <div class="calendar">
        <iframe src="https://www.google.com/calendar/embed?title=Release%20Schedule&amp;showNav=0&amp;showDate=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;src=b6v58qvojllt0i6ql654r1vh00%40group.calendar.google.com&amp;color=%23B1365F&amp;" style=" border-width:0 " width="180" height="300" frameborder="0" scrolling="no">
            <a href="http://www.google.com/calendar/ical/b6v58qvojllt0i6ql654r1vh00%40group.calendar.google.com/public/basic.ics">
                Python Release Schedule iCal Calendar
            </a>
        </iframe>
    </div>
    <div class="calendar">
        <iframe src="https://www.google.com/calendar/embed?title=Events%20Calendar&amp;showNav=0&amp;showDate=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;src=j7gov1cmnqr9tvg14k621j7t5c%40group.calendar.google.com&amp;color=%23B1365F&amp;" style=" border-width:0 " width="180" height="300" frameborder="0" scrolling="no">
            <a href="http://www.google.com/calendar/ical/j7gov1cmnqr9tvg14k621j7t5c%40group.calendar.google.com/public/basic.ics">
                Python Events iCal Calendar
            </a>
        </iframe>
        <p class="level-one"><a href="http://pycon.org/#calendar">Add an event</a> to this calendar.</p>
    </div>
    <div class="calendar">
        <iframe src="https://www.google.com/calendar/embed?title=User%20Group%20Calendar&amp;showNav=0&amp;showDate=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;src=3haig2m9msslkpf2tn1h56nn9g%40group.calendar.google.com&amp;color=%23125A12&amp;" style=" border-width:0 " width="180" height="300" frameborder="0" scrolling="no">
            <a href="http://www.google.com/calendar/ical/3haig2m9msslkpf2tn1h56nn9g%40group.calendar.google.com/public/basic.ics">
                Python User Group iCal Calendar
            </a>
        </iframe>
        <p class="level-one"><a href="http://pycon.org/#calendar">Add an event</a> to this calendar.</p>
    </div>
  </div>

  <div id="content-body">
    <div id="body-main">
      <div id="content">
        
          <div id="breadcrumb">
               <a href="/dev/peps/">PEP Index</a>
               <span class="breadcrumb-separator">&gt;</span>
            
            PEP 3146 -- Merging Unladen Swallow into CPython
          </div>



        <!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">3146</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Merging Unladen Swallow into CPython</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">9efef53331b0</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="http://hg.python.org/peps/file/tip/pep-3146.txt">2011-08-30 20:49:35 +1000 (Tue, 30 Aug 2011)</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Collin Winter &lt;collinwinter&#32;&#97;t&#32;google.com&gt;,
Jeffrey Yasskin &lt;jyasskin&#32;&#97;t&#32;google.com&gt;,
Reid Kleckner &lt;rnk&#32;&#97;t&#32;mit.edu&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Withdrawn</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">1-Jan-2010</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">3.3</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#pep-withdrawal" id="id135">PEP Withdrawal</a></li>
<li><a class="reference internal" href="#abstract" id="id136">Abstract</a></li>
<li><a class="reference internal" href="#rationale-implementation" id="id137">Rationale, Implementation</a><ul>
<li><a class="reference internal" href="#alternatives" id="id138">Alternatives</a></li>
</ul>
</li>
<li><a class="reference internal" href="#performance" id="id139">Performance</a><ul>
<li><a class="reference internal" href="#benchmarks" id="id140">Benchmarks</a></li>
<li><a class="reference internal" href="#performance-vs-cpython-2-6-4" id="id141">Performance vs CPython 2.6.4</a></li>
<li><a class="reference internal" href="#memory-usage" id="id142">Memory Usage</a></li>
<li><a class="reference internal" href="#start-up-time" id="id143">Start-up Time</a></li>
<li><a class="reference internal" href="#binary-size" id="id144">Binary Size</a></li>
<li><a class="reference internal" href="#performance-retrospective" id="id145">Performance Retrospective</a></li>
</ul>
</li>
<li><a class="reference internal" href="#correctness-and-compatibility" id="id146">Correctness and Compatibility</a><ul>
<li><a class="reference internal" href="#known-incompatibilities" id="id147">Known Incompatibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#platform-support" id="id148">Platform Support</a></li>
<li><a class="reference internal" href="#impact-on-cpython-development" id="id149">Impact on CPython Development</a><ul>
<li><a class="reference internal" href="#experimenting-with-changes-to-python-or-cpython-bytecode" id="id150">Experimenting with Changes to Python or CPython Bytecode</a></li>
<li><a class="reference internal" href="#debugging" id="id151">Debugging</a></li>
<li><a class="reference internal" href="#profiling" id="id152">Profiling</a></li>
<li><a class="reference internal" href="#addition-of-c-to-cpython" id="id153">Addition of C++ to CPython</a></li>
<li><a class="reference internal" href="#managing-llvm-releases-c-api-changes" id="id154">Managing LLVM Releases, C++ API Changes</a></li>
<li><a class="reference internal" href="#building-cpython" id="id155">Building CPython</a></li>
</ul>
</li>
<li><a class="reference internal" href="#proposed-merge-plan" id="id156">Proposed Merge Plan</a><ul>
<li><a class="reference internal" href="#contingency-plans" id="id157">Contingency Plans</a></li>
</ul>
</li>
<li><a class="reference internal" href="#future-work" id="id158">Future Work</a></li>
<li><a class="reference internal" href="#unladen-swallow-community" id="id159">Unladen Swallow Community</a></li>
<li><a class="reference internal" href="#licensing" id="id160">Licensing</a></li>
<li><a class="reference internal" href="#references" id="id161">References</a></li>
<li><a class="reference internal" href="#copyright" id="id162">Copyright</a></li>
</ul>
</div>
<div class="section" id="pep-withdrawal">
<h1><a class="toc-backref" href="#id135">PEP Withdrawal</a></h1>
<p>With Unladen Swallow going the way of the Norwegian Blue <a class="footnote-reference" href="#us-post-mortem" id="id1">[1]</a>
<a class="footnote-reference" href="#dead-parrot" id="id2">[2]</a>, this PEP has been deemed to have been withdrawn.</p>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id136">Abstract</a></h1>
<p>This PEP proposes the merger of the Unladen Swallow project <a class="footnote-reference" href="#us" id="id3">[3]</a> into
CPython's source tree. Unladen Swallow is an open-source branch of CPython
focused on performance. Unladen Swallow is source-compatible with valid Python
2.6.4 applications and C extension modules.</p>
<p>Unladen Swallow adds a just-in-time (JIT) compiler to CPython, allowing for the
compilation of selected Python code to optimized machine code. Beyond classical
static compiler optimizations, Unladen Swallow's JIT compiler takes advantage of
data collected at runtime to make checked assumptions about code behaviour,
allowing the production of faster machine code.</p>
<p>This PEP proposes to integrate Unladen Swallow into CPython's development tree
in a separate <tt class="docutils literal"><span class="pre">py3k-jit</span></tt> branch, targeted for eventual merger with the main
<tt class="docutils literal">py3k</tt> branch. While Unladen Swallow is by no means finished or perfect, we
feel that Unladen Swallow has reached sufficient maturity to warrant
incorporation into CPython's roadmap. We have sought to create a stable platform
that the wider CPython development team can build upon, a platform that will
yield increasing performance for years to come.</p>
<p>This PEP will detail Unladen Swallow's implementation and how it differs from
CPython 2.6.4; the benchmarks used to measure performance; the tools used to
ensure correctness and compatibility; the impact on CPython's current platform
support; and the impact on the CPython core development process. The PEP
concludes with a proposed merger plan and brief notes on possible directions
for future work.</p>
<p>We seek the following from the BDFL:</p>
<ul class="simple">
<li>Approval for the overall concept of adding a just-in-time compiler to CPython,
following the design laid out below.</li>
<li>Permission to continue working on the just-in-time compiler in the CPython
source tree.</li>
<li>Permission to eventually merge the just-in-time compiler into the <tt class="docutils literal">py3k</tt>
branch once all blocking issues <a class="footnote-reference" href="#us-punchlist" id="id4">[32]</a> have been addressed.</li>
<li>A pony.</li>
</ul>
</div>
<div class="section" id="rationale-implementation">
<h1><a class="toc-backref" href="#id137">Rationale, Implementation</a></h1>
<p>Many companies and individuals would like Python to be faster, to enable its
use in more projects. Google is one such company.</p>
<p>Unladen Swallow is a Google-sponsored branch of CPython, initiated to improve
the performance of Google's numerous Python libraries, tools and applications.
To make the adoption of Unladen Swallow as easy as possible, the project
initially aimed at four goals:</p>
<ul class="simple">
<li>A performance improvement of 5x over the baseline of CPython 2.6.4 for
single-threaded code.</li>
<li>100% source compatibility with valid CPython 2.6 applications.</li>
<li>100% source compatibility with valid CPython 2.6 C extension modules.</li>
<li>Design for eventual merger back into CPython.</li>
</ul>
<p>We chose 2.6.4 as our baseline because Google uses CPython 2.4 internally, and
jumping directly from CPython 2.4 to CPython 3.x was considered infeasible.</p>
<p>To achieve the desired performance, Unladen Swallow has implemented a
just-in-time (JIT) compiler <a class="footnote-reference" href="#jit" id="id5">[52]</a> in the tradition of Urs Hoelzle's work on
Self <a class="footnote-reference" href="#urs-self" id="id6">[53]</a>, gathering feedback at runtime and using that to inform
compile-time optimizations. This is similar to the approach taken by the current
breed of JavaScript engines <a class="footnote-reference" href="#v8" id="id7">[60]</a>, <a class="footnote-reference" href="#squirrelfishextreme" id="id8">[61]</a>; most Java virtual
machines <a class="footnote-reference" href="#hotspot" id="id9">[65]</a>; Rubinius <a class="footnote-reference" href="#rubinius" id="id10">[62]</a>, MacRuby <a class="footnote-reference" href="#macruby" id="id11">[64]</a>, and other Ruby
implementations; Psyco <a class="footnote-reference" href="#psyco" id="id12">[66]</a>; and others.</p>
<p>We explicitly reject any suggestion that our ideas are original. We have sought
to reuse the published work of other researchers wherever possible. If we have
done any original work, it is by accident. We have tried, as much as possible,
to take good ideas from all corners of the academic and industrial community. A
partial list of the research papers that have informed Unladen Swallow is
available on the Unladen Swallow wiki <a class="footnote-reference" href="#us-relevantpapers" id="id13">[55]</a>.</p>
<p>The key observation about optimizing dynamic languages is that they are only
dynamic in theory; in practice, each individual function or snippet of code is
relatively static, using a stable set of types and child functions. The current
CPython bytecode interpreter assumes the worst about the code it is running,
that at any moment the user might override the <tt class="docutils literal">len()</tt> function or pass a
never-before-seen type into a function. In practice this never happens, but user
code pays for that support. Unladen Swallow takes advantage of the relatively
static nature of user code to improve performance.</p>
<p>At a high level, the Unladen Swallow JIT compiler works by translating a
function's CPython bytecode to platform-specific machine code, using data
collected at runtime, as well as classical compiler optimizations, to improve
the quality of the generated machine code. Because we only want to spend
resources compiling Python code that will actually benefit the runtime of the
program, an online heuristic is used to assess how hot a given function is. Once
the hotness value for a function crosses a given threshold, it is selected for
compilation and optimization. Until a function is judged hot, however, it runs
in the standard CPython eval loop, which in Unladen Swallow has been
instrumented to record interesting data about each bytecode executed. This
runtime data is used to reduce the flexibility of the generated machine code,
allowing us to optimize for the common case. For example, we collect data on</p>
<ul class="simple">
<li>Whether a branch was taken/not taken. If a branch is never taken, we will not
compile it to machine code.</li>
<li>Types used by operators. If we find that <tt class="docutils literal">a + b</tt> is only ever adding
integers, the generated machine code for that snippet will not support adding
floats.</li>
<li>Functions called at each callsite. If we find that a particular <tt class="docutils literal">foo()</tt>
callsite is always calling the same <tt class="docutils literal">foo</tt> function, we can optimize the
call or inline it away</li>
</ul>
<p>Refer to <a class="footnote-reference" href="#us-llvm-notes" id="id14">[56]</a> for a complete list of data points gathered and how
they are used.</p>
<p>However, if by chance the historically-untaken branch is now taken, or some
integer-optimized <tt class="docutils literal">a + b</tt> snippet receives two strings, we must support this.
We cannot change Python semantics. Each of these sections of optimized machine
code is preceded by a <cite>guard</cite>, which checks whether the simplifying assumptions
we made when optimizing still hold. If the assumptions are still valid, we run
the optimized machine code; if they are not, we revert back to the interpreter
and pick up where we left off.</p>
<p>We have chosen to reuse a set of existing compiler libraries called LLVM
<a class="footnote-reference" href="#llvm" id="id15">[4]</a> for code generation and code optimization. This has saved our small
team from needing to understand and debug code generation on multiple machine
instruction sets and from needing to implement a large set of classical compiler
optimizations. The project would not have been possible without such code reuse.
We have found LLVM easy to modify and its community receptive to our suggestions
and modifications.</p>
<p>In somewhat more depth, Unladen Swallow's JIT works by compiling CPython
bytecode to LLVM's own intermediate representation (IR) <a class="footnote-reference" href="#llvm-langref" id="id16">[96]</a>, taking
into account any runtime data from the CPython eval loop. We then run a set of
LLVM's built-in optimization passes, producing a smaller, optimized version of
the original LLVM IR. LLVM then lowers the IR to platform-specific machine code,
performing register allocation, instruction scheduling, and any necessary
relocations. This arrangement of the compilation pipeline allows the LLVM-based
JIT to be easily omitted from a compiled <tt class="docutils literal">python</tt> binary by passing
<tt class="docutils literal"><span class="pre">--without-llvm</span></tt> to <tt class="docutils literal">./configure</tt>; various use cases for this flag are
discussed later.</p>
<p>For a complete detailing of how Unladen Swallow works, consult the Unladen
Swallow documentation <a class="footnote-reference" href="#us-projectplan" id="id17">[54]</a>, <a class="footnote-reference" href="#us-llvm-notes" id="id18">[56]</a>.</p>
<p>Unladen Swallow has focused on improving the performance of single-threaded,
pure-Python code. We have not made an effort to remove CPython's global
interpreter lock (GIL); we feel this is separate from our work, and due to its
sensitivity, is best done in a mainline development branch. We considered
making GIL-removal a part of Unladen Swallow, but were concerned by the
possibility of introducing subtle bugs when porting our work from CPython 2.6
to 3.x.</p>
<p>A JIT compiler is an extremely versatile tool, and we have by no means
exhausted its full potential. We have tried to create a sufficiently flexible
framework that the wider CPython development community can build upon it for
years to come, extracting increased performance in each subsequent release.</p>
<div class="section" id="alternatives">
<h2><a class="toc-backref" href="#id138">Alternatives</a></h2>
<p>There are number of alternative strategies for improving Python performance
which we considered, but found unsatisfactory.</p>
<ul>
<li><p class="first"><em>Cython, Shedskin</em>: Cython <a class="footnote-reference" href="#cython" id="id19">[103]</a> and Shedskin <a class="footnote-reference" href="#shedskin" id="id20">[104]</a> are both
static compilers for Python. We view these as useful-but-limited workarounds
for CPython's historically-poor performance. Shedskin does not support the
full Python standard library <a class="footnote-reference" href="#shedskin-library-limits" id="id21">[105]</a>, while Cython
requires manual Cython-specific annotations for optimum performance.</p>
<p>Static compilers like these are useful for writing extension modules without
worrying about reference counting, but because they are static, ahead-of-time
compilers, they cannot optimize the full range of code under consideration by
a just-in-time compiler informed by runtime data.</p>
</li>
<li><p class="first"><em>IronPython</em>: IronPython <a class="footnote-reference" href="#ironpython" id="id22">[108]</a> is Python on Microsoft's .Net
platform. It is not actively tested on Mono <a class="footnote-reference" href="#mono" id="id23">[109]</a>, meaning that it is
essentially Windows-only, making it unsuitable as a general CPython
replacement.</p>
</li>
<li><p class="first"><em>Jython</em>: Jython <a class="footnote-reference" href="#jython" id="id24">[110]</a> is a complete implementation of Python 2.5, but
is significantly slower than Unladen Swallow (3-5x on measured benchmarks) and
has no support for CPython extension modules <a class="footnote-reference" href="#jython-c-ext" id="id25">[111]</a>, which would
make migration of large applications prohibitively expensive.</p>
</li>
<li><p class="first"><em>Psyco</em>: Psyco <a class="footnote-reference" href="#psyco" id="id26">[66]</a> is a specializing JIT compiler for CPython,
implemented as an extension module. It primarily improves performance for
numerical code. Pros: exists; makes some code faster. Cons: 32-bit only, with
no plans for 64-bit support; supports x86 only; very difficult to maintain;
incompatible with SSE2 optimized code due to alignment issues.</p>
</li>
<li><p class="first"><em>PyPy</em>: PyPy <a class="footnote-reference" href="#pypy" id="id27">[67]</a> has good performance on numerical code, but is slower
than Unladen Swallow on some workloads. Migration of large applications from
CPython to PyPy would be prohibitively expensive: PyPy's JIT compiler supports
only 32-bit x86 code generation; important modules, such as MySQLdb and
pycrypto, do not build against PyPy; PyPy does not offer an embedding API,
much less the same API as CPython.</p>
</li>
<li><p class="first"><em>PyV8</em>: PyV8 <a class="footnote-reference" href="#pyv8" id="id28">[112]</a> is an alpha-stage experimental Python-to-JavaScript
compiler that runs on top of V8. PyV8 does not implement the whole Python
language, and has no support for CPython extension modules.</p>
</li>
<li><p class="first"><em>WPython</em>: WPython <a class="footnote-reference" href="#wpython" id="id29">[106]</a> is a wordcode-based reimplementation of
CPython's interpreter loop. While it provides a modest improvement to
interpreter performance <a class="footnote-reference" href="#wpython-performance" id="id30">[107]</a>, it is not an either-or
substitute for a just-in-time compiler. An interpreter will never be as fast
as optimized machine code. We view WPython and similar interpreter
enhancements as complementary to our work, rather than as competitors.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="performance">
<h1><a class="toc-backref" href="#id139">Performance</a></h1>
<div class="section" id="benchmarks">
<h2><a class="toc-backref" href="#id140">Benchmarks</a></h2>
<p>Unladen Swallow has developed a fairly large suite of benchmarks, ranging from
synthetic microbenchmarks designed to test a single feature up through
whole-application macrobenchmarks. The inspiration for these benchmarks has come
variously from third-party contributors (in the case of the <tt class="docutils literal">html5lib</tt>
benchmark), Google's own internal workloads (<tt class="docutils literal">slowspitfire</tt>, <tt class="docutils literal">pickle</tt>,
<tt class="docutils literal">unpickle</tt>), as well as tools and libraries in heavy use throughout the wider
Python community (<tt class="docutils literal">django</tt>, <tt class="docutils literal">2to3</tt>, <tt class="docutils literal">spambayes</tt>). These benchmarks are run
through a single interface called <tt class="docutils literal">perf.py</tt> that takes care of collecting
memory usage information, graphing performance, and running statistics on the
benchmark results to ensure significance.</p>
<p>The full list of available benchmarks is available on the Unladen Swallow wiki
<a class="footnote-reference" href="#us-benchmarks" id="id31">[44]</a>, including instructions on downloading and running the
benchmarks for yourself. All our benchmarks are open-source; none are
Google-proprietary. We believe this collection of benchmarks serves as a useful
tool to benchmark any complete Python implementation, and indeed, PyPy is
already using these benchmarks for their own performance testing
<a class="footnote-reference" href="#pypy-bmarks" id="id32">[82]</a>, <a class="footnote-reference" href="#us-wider-perf-issue" id="id33">[97]</a>. We welcome this, and we seek
additional workloads for the benchmark suite from the Python community.</p>
<p>We have focused our efforts on collecting macrobenchmarks and benchmarks that
simulate real applications as well as possible, when running a whole application
is not feasible. Along a different axis, our benchmark collection originally
focused on the kinds of workloads seen by Google's Python code (webapps, text
processing), though we have since expanded the collection to include workloads
Google cares nothing about. We have so far shied away from heavily-numerical
workloads, since NumPy <a class="footnote-reference" href="#numpy" id="id34">[81]</a> already does an excellent job on such code and
so improving numerical performance was not an initial high priority for the
team; we have begun to incorporate such benchmarks into the collection
<a class="footnote-reference" href="#us-nbody" id="id35">[98]</a> and have started work on optimizing numerical Python code.</p>
<p>Beyond these benchmarks, there are also a variety of workloads we are explicitly
not interested in benchmarking. Unladen Swallow is focused on improving the
performance of pure-Python code, so the performance of extension modules like
NumPy is uninteresting since NumPy's core routines are implemented in
C. Similarly, workloads that involve a lot of IO like GUIs, databases or
socket-heavy applications would, we feel, fail to accurately measure interpreter
or code generation optimizations. That said, there's certainly room to improve
the performance of C-language extensions modules in the standard library, and
as such, we have added benchmarks for the <tt class="docutils literal">cPickle</tt> and <tt class="docutils literal">re</tt> modules.</p>
</div>
<div class="section" id="performance-vs-cpython-2-6-4">
<h2><a class="toc-backref" href="#id141">Performance vs CPython 2.6.4</a></h2>
<p>The charts below compare the arithmetic mean of multiple benchmark iterations
for CPython 2.6.4 and Unladen Swallow. <tt class="docutils literal">perf.py</tt> gathers more data than this,
and indeed, arithmetic mean is not the whole story; we reproduce only the mean
for the sake of conciseness. We include the <tt class="docutils literal">t</tt> score from the Student's
two-tailed T-test <a class="footnote-reference" href="#students-t-test" id="id36">[45]</a> at the 95% confidence interval to indicate
the significance of the result. Most benchmarks are run for 100 iterations,
though some longer-running whole-application benchmarks are run for fewer
iterations.</p>
<p>A description of each of these benchmarks is available on the Unladen Swallow
wiki <a class="footnote-reference" href="#us-benchmarks" id="id37">[44]</a>.</p>
<p>Command:</p>
<pre class="literal-block">
./perf.py -r -b default,apps ../a/python ../b/python
</pre>
<p>32-bit; gcc 4.0.3; Ubuntu Dapper; Intel Core2 Duo 6600 &#64; 2.4GHz; 2 cores; 4MB L2 cache; 4GB RAM</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="14%" />
<col width="20%" />
<col width="13%" />
<col width="14%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Benchmark</th>
<th class="head">CPython 2.6.4</th>
<th class="head">Unladen Swallow r988</th>
<th class="head">Change</th>
<th class="head">Significance</th>
<th class="head">Timeline</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2to3</td>
<td>25.13 s</td>
<td>24.87 s</td>
<td>1.01x faster</td>
<td>t=8.94</td>
<td><a class="reference external" href="http://tinyurl.com/yamhrpg">http://tinyurl.com/yamhrpg</a></td>
</tr>
<tr><td>django</td>
<td>1.08 s</td>
<td>0.80 s</td>
<td>1.35x faster</td>
<td>t=315.59</td>
<td><a class="reference external" href="http://tinyurl.com/y9mrn8s">http://tinyurl.com/y9mrn8s</a></td>
</tr>
<tr><td>html5lib</td>
<td>14.29 s</td>
<td>13.20 s</td>
<td>1.08x faster</td>
<td>t=2.17</td>
<td><a class="reference external" href="http://tinyurl.com/y8tyslu">http://tinyurl.com/y8tyslu</a></td>
</tr>
<tr><td>nbody</td>
<td>0.51 s</td>
<td>0.28 s</td>
<td>1.84x faster</td>
<td>t=78.007</td>
<td><a class="reference external" href="http://tinyurl.com/y989qhg">http://tinyurl.com/y989qhg</a></td>
</tr>
<tr><td>rietveld</td>
<td>0.75 s</td>
<td>0.55 s</td>
<td>1.37x faster</td>
<td>Insignificant</td>
<td><a class="reference external" href="http://tinyurl.com/ye7mqd3">http://tinyurl.com/ye7mqd3</a></td>
</tr>
<tr><td>slowpickle</td>
<td>0.75 s</td>
<td>0.55 s</td>
<td>1.37x faster</td>
<td>t=20.78</td>
<td><a class="reference external" href="http://tinyurl.com/ybrsfnd">http://tinyurl.com/ybrsfnd</a></td>
</tr>
<tr><td>slowspitfire</td>
<td>0.83 s</td>
<td>0.61 s</td>
<td>1.36x faster</td>
<td>t=2124.66</td>
<td><a class="reference external" href="http://tinyurl.com/yfknhaw">http://tinyurl.com/yfknhaw</a></td>
</tr>
<tr><td>slowunpickle</td>
<td>0.33 s</td>
<td>0.26 s</td>
<td>1.26x faster</td>
<td>t=15.12</td>
<td><a class="reference external" href="http://tinyurl.com/yzlakoo">http://tinyurl.com/yzlakoo</a></td>
</tr>
<tr><td>spambayes</td>
<td>0.31 s</td>
<td>0.34 s</td>
<td>1.10x slower</td>
<td>Insignificant</td>
<td><a class="reference external" href="http://tinyurl.com/yem62ub">http://tinyurl.com/yem62ub</a></td>
</tr>
</tbody>
</table>
<p>64-bit; gcc 4.2.4; Ubuntu Hardy; AMD Opteron 8214 HE &#64; 2.2 GHz; 4 cores; 1MB L2 cache; 8GB RAM</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="14%" />
<col width="20%" />
<col width="13%" />
<col width="14%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Benchmark</th>
<th class="head">CPython 2.6.4</th>
<th class="head">Unladen Swallow r988</th>
<th class="head">Change</th>
<th class="head">Significance</th>
<th class="head">Timeline</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2to3</td>
<td>31.98 s</td>
<td>30.41 s</td>
<td>1.05x faster</td>
<td>t=8.35</td>
<td><a class="reference external" href="http://tinyurl.com/ybcrl3b">http://tinyurl.com/ybcrl3b</a></td>
</tr>
<tr><td>django</td>
<td>1.22 s</td>
<td>0.94 s</td>
<td>1.30x faster</td>
<td>t=106.68</td>
<td><a class="reference external" href="http://tinyurl.com/ybwqll6">http://tinyurl.com/ybwqll6</a></td>
</tr>
<tr><td>html5lib</td>
<td>18.97 s</td>
<td>17.79 s</td>
<td>1.06x faster</td>
<td>t=2.78</td>
<td><a class="reference external" href="http://tinyurl.com/yzlyqvk">http://tinyurl.com/yzlyqvk</a></td>
</tr>
<tr><td>nbody</td>
<td>0.77 s</td>
<td>0.27 s</td>
<td>2.86x faster</td>
<td>t=133.49</td>
<td><a class="reference external" href="http://tinyurl.com/yeyqhbg">http://tinyurl.com/yeyqhbg</a></td>
</tr>
<tr><td>rietveld</td>
<td>0.74 s</td>
<td>0.80 s</td>
<td>1.08x slower</td>
<td>t=-2.45</td>
<td><a class="reference external" href="http://tinyurl.com/yzjc6ff">http://tinyurl.com/yzjc6ff</a></td>
</tr>
<tr><td>slowpickle</td>
<td>0.91 s</td>
<td>0.62 s</td>
<td>1.48x faster</td>
<td>t=28.04</td>
<td><a class="reference external" href="http://tinyurl.com/yf7en6k">http://tinyurl.com/yf7en6k</a></td>
</tr>
<tr><td>slowspitfire</td>
<td>1.01 s</td>
<td>0.72 s</td>
<td>1.40x faster</td>
<td>t=98.70</td>
<td><a class="reference external" href="http://tinyurl.com/yc8pe2o">http://tinyurl.com/yc8pe2o</a></td>
</tr>
<tr><td>slowunpickle</td>
<td>0.51 s</td>
<td>0.34 s</td>
<td>1.51x faster</td>
<td>t=32.65</td>
<td><a class="reference external" href="http://tinyurl.com/yjufu4j">http://tinyurl.com/yjufu4j</a></td>
</tr>
<tr><td>spambayes</td>
<td>0.43 s</td>
<td>0.45 s</td>
<td>1.06x slower</td>
<td>Insignificant</td>
<td><a class="reference external" href="http://tinyurl.com/yztbjfp">http://tinyurl.com/yztbjfp</a></td>
</tr>
</tbody>
</table>
<p>Many of these benchmarks take a hit under Unladen Swallow because the current
version blocks execution to compile Python functions down to machine code. This
leads to the behaviour seen in the timeline graphs for the <tt class="docutils literal">html5lib</tt> and
<tt class="docutils literal">rietveld</tt> benchmarks, for example, and slows down the overall performance of
<tt class="docutils literal">2to3</tt>. We have an active development branch to fix this problem
(<a class="footnote-reference" href="#us-background-thread" id="id38">[47]</a>, <a class="footnote-reference" href="#us-background-thread-issue" id="id39">[48]</a>), but working within
the strictures of CPython's current threading system has complicated the process
and required far more care and time than originally anticipated. We view this
issue as critical to final merger into the <tt class="docutils literal">py3k</tt> branch.</p>
<p>We have obviously not met our initial goal of a 5x performance improvement. A
<a class="reference internal" href="#performance-retrospective">performance retrospective</a> follows, which addresses why we failed to meet our
initial performance goal. We maintain a list of yet-to-be-implemented
performance work <a class="footnote-reference" href="#us-perf-punchlist" id="id40">[51]</a>.</p>
</div>
<div class="section" id="memory-usage">
<h2><a class="toc-backref" href="#id142">Memory Usage</a></h2>
<p>The following table shows maximum memory usage (in kilobytes) for each of
Unladen Swallow's default benchmarks for both CPython 2.6.4 and Unladen Swallow
r988, as well as a timeline of memory usage across the lifetime of the
benchmark. We include tables for both 32- and 64-bit binaries. Memory usage was
measured on Linux 2.6 systems by summing the <tt class="docutils literal">Private_</tt> sections from the
kernel's <tt class="docutils literal"><span class="pre">/proc/$pid/smaps</span></tt> pseudo-files <a class="footnote-reference" href="#smaps" id="id41">[46]</a>.</p>
<p>Command:</p>
<pre class="literal-block">
./perf.py -r --track_memory -b default,apps ../a/python ../b/python
</pre>
<p>32-bit</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="17%" />
<col width="25%" />
<col width="9%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Benchmark</th>
<th class="head">CPython 2.6.4</th>
<th class="head">Unladen Swallow r988</th>
<th class="head">Change</th>
<th class="head">Timeline</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2to3</td>
<td>26396 kb</td>
<td>46896 kb</td>
<td>1.77x</td>
<td><a class="reference external" href="http://tinyurl.com/yhr2h4z">http://tinyurl.com/yhr2h4z</a></td>
</tr>
<tr><td>django</td>
<td>10028 kb</td>
<td>27740 kb</td>
<td>2.76x</td>
<td><a class="reference external" href="http://tinyurl.com/yhan8vs">http://tinyurl.com/yhan8vs</a></td>
</tr>
<tr><td>html5lib</td>
<td>150028 kb</td>
<td>173924 kb</td>
<td>1.15x</td>
<td><a class="reference external" href="http://tinyurl.com/ybt44en">http://tinyurl.com/ybt44en</a></td>
</tr>
<tr><td>nbody</td>
<td>3020 kb</td>
<td>16036 kb</td>
<td>5.31x</td>
<td><a class="reference external" href="http://tinyurl.com/ya8hltw">http://tinyurl.com/ya8hltw</a></td>
</tr>
<tr><td>rietveld</td>
<td>15008 kb</td>
<td>46400 kb</td>
<td>3.09x</td>
<td><a class="reference external" href="http://tinyurl.com/yhd5dra">http://tinyurl.com/yhd5dra</a></td>
</tr>
<tr><td>slowpickle</td>
<td>4608 kb</td>
<td>16656 kb</td>
<td>3.61x</td>
<td><a class="reference external" href="http://tinyurl.com/ybukyvo">http://tinyurl.com/ybukyvo</a></td>
</tr>
<tr><td>slowspitfire</td>
<td>85776 kb</td>
<td>97620 kb</td>
<td>1.13x</td>
<td><a class="reference external" href="http://tinyurl.com/y9vj35z">http://tinyurl.com/y9vj35z</a></td>
</tr>
<tr><td>slowunpickle</td>
<td>3448 kb</td>
<td>13744 kb</td>
<td>3.98x</td>
<td><a class="reference external" href="http://tinyurl.com/yexh4d5">http://tinyurl.com/yexh4d5</a></td>
</tr>
<tr><td>spambayes</td>
<td>7352 kb</td>
<td>46480 kb</td>
<td>6.32x</td>
<td><a class="reference external" href="http://tinyurl.com/yem62ub">http://tinyurl.com/yem62ub</a></td>
</tr>
</tbody>
</table>
<p>64-bit</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="17%" />
<col width="25%" />
<col width="9%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Benchmark</th>
<th class="head">CPython 2.6.4</th>
<th class="head">Unladen Swallow r988</th>
<th class="head">Change</th>
<th class="head">Timeline</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2to3</td>
<td>51596 kb</td>
<td>82340 kb</td>
<td>1.59x</td>
<td><a class="reference external" href="http://tinyurl.com/yljg6rs">http://tinyurl.com/yljg6rs</a></td>
</tr>
<tr><td>django</td>
<td>16020 kb</td>
<td>38908 kb</td>
<td>2.43x</td>
<td><a class="reference external" href="http://tinyurl.com/ylqsebh">http://tinyurl.com/ylqsebh</a></td>
</tr>
<tr><td>html5lib</td>
<td>259232 kb</td>
<td>324968 kb</td>
<td>1.25x</td>
<td><a class="reference external" href="http://tinyurl.com/yha6oee">http://tinyurl.com/yha6oee</a></td>
</tr>
<tr><td>nbody</td>
<td>4296 kb</td>
<td>23012 kb</td>
<td>5.35x</td>
<td><a class="reference external" href="http://tinyurl.com/yztozza">http://tinyurl.com/yztozza</a></td>
</tr>
<tr><td>rietveld</td>
<td>24140 kb</td>
<td>73960 kb</td>
<td>3.06x</td>
<td><a class="reference external" href="http://tinyurl.com/ybg2nq7">http://tinyurl.com/ybg2nq7</a></td>
</tr>
<tr><td>slowpickle</td>
<td>4928 kb</td>
<td>23300 kb</td>
<td>4.73x</td>
<td><a class="reference external" href="http://tinyurl.com/yk5tpbr">http://tinyurl.com/yk5tpbr</a></td>
</tr>
<tr><td>slowspitfire</td>
<td>133276 kb</td>
<td>148676 kb</td>
<td>1.11x</td>
<td><a class="reference external" href="http://tinyurl.com/y8bz2xe">http://tinyurl.com/y8bz2xe</a></td>
</tr>
<tr><td>slowunpickle</td>
<td>4896 kb</td>
<td>16948 kb</td>
<td>3.46x</td>
<td><a class="reference external" href="http://tinyurl.com/ygywwoc">http://tinyurl.com/ygywwoc</a></td>
</tr>
<tr><td>spambayes</td>
<td>10728 kb</td>
<td>84992 kb</td>
<td>7.92x</td>
<td><a class="reference external" href="http://tinyurl.com/yhjban5">http://tinyurl.com/yhjban5</a></td>
</tr>
</tbody>
</table>
<p>The increased memory usage comes from a) LLVM code generation, analysis and
optimization libraries; b) native code; c) memory usage issues or leaks in
LLVM; d) data structures needed to optimize and generate machine code; e)
as-yet uncategorized other sources.</p>
<p>While we have made significant progress in reducing memory usage since the
initial naive JIT implementation <a class="footnote-reference" href="#us-memory-issue" id="id42">[43]</a>, there is obviously more
to do. We believe that there are still memory savings to be made without
sacrificing performance. We have tended to focus on raw performance, and we
have not yet made a concerted push to reduce memory usage. We view reducing
memory usage as a blocking issue for final merger into the <tt class="docutils literal">py3k</tt> branch. We
seek guidance from the community on an acceptable level of increased memory
usage.</p>
</div>
<div class="section" id="start-up-time">
<h2><a class="toc-backref" href="#id143">Start-up Time</a></h2>
<p>Statically linking LLVM's code generation, analysis and optimization libraries
increases the time needed to start the Python binary. C++ static initializers
used by LLVM also increase start-up time, as does importing the collection of
pre-compiled C runtime routines we want to inline to Python code.</p>
<p>Results from Unladen Swallow's <tt class="docutils literal">startup</tt> benchmarks:</p>
<pre class="literal-block">
$ ./perf.py -r -b startup /tmp/cpy-26/bin/python /tmp/unladen/bin/python

### normal_startup ###
Min: 0.219186 -&gt; 0.352075: 1.6063x slower
Avg: 0.227228 -&gt; 0.364384: 1.6036x slower
Significant (t=-51.879098, a=0.95)
Stddev: 0.00762 -&gt; 0.02532: 3.3227x larger
Timeline: http://tinyurl.com/yfe8z3r

### startup_nosite ###
Min: 0.105949 -&gt; 0.264912: 2.5004x slower
Avg: 0.107574 -&gt; 0.267505: 2.4867x slower
Significant (t=-703.557403, a=0.95)
Stddev: 0.00214 -&gt; 0.00240: 1.1209x larger
Timeline: http://tinyurl.com/yajn8fa

### bzr_startup ###
Min: 0.067990 -&gt; 0.097985: 1.4412x slower
Avg: 0.084322 -&gt; 0.111348: 1.3205x slower
Significant (t=-37.432534, a=0.95)
Stddev: 0.00793 -&gt; 0.00643: 1.2330x smaller
Timeline: http://tinyurl.com/ybdm537

### hg_startup ###
Min: 0.016997 -&gt; 0.024997: 1.4707x slower
Avg: 0.026990 -&gt; 0.036772: 1.3625x slower
Significant (t=-53.104502, a=0.95)
Stddev: 0.00406 -&gt; 0.00417: 1.0273x larger
Timeline: http://tinyurl.com/ycout8m
</pre>
<p><tt class="docutils literal">bzr_startup</tt> and <tt class="docutils literal">hg_startup</tt> measure how long it takes Bazaar and
Mercurial, respectively, to display their help screens. <tt class="docutils literal">startup_nosite</tt>
runs <tt class="docutils literal">python <span class="pre">-S</span></tt> many times; usage of the <tt class="docutils literal"><span class="pre">-S</span></tt> option is rare, but we feel
this gives a good indication of where increased startup time is coming from.</p>
<p>Unladen Swallow has made headway toward optimizing startup time, but there is
still more work to do and further optimizations to implement. Improving start-up
time is a high-priority item <a class="footnote-reference" href="#us-issue-startup-time" id="id43">[34]</a> in Unladen Swallow's
merger punchlist.</p>
</div>
<div class="section" id="binary-size">
<h2><a class="toc-backref" href="#id144">Binary Size</a></h2>
<p>Statically linking LLVM's code generation, analysis and optimization libraries
significantly increases the size of the <tt class="docutils literal">python</tt> binary. The tables below
report stripped on-disk binary sizes; the binaries are stripped to better
correspond with the configurations used by system package managers. We feel this
is the most realistic measure of any change in binary size.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="23%" />
<col width="23%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Binary size</th>
<th class="head">CPython 2.6.4</th>
<th class="head">CPython 3.1.1</th>
<th class="head">Unladen Swallow r1041</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>32-bit</td>
<td>1.3M</td>
<td>1.4M</td>
<td>12M</td>
</tr>
<tr><td>64-bit</td>
<td>1.6M</td>
<td>1.6M</td>
<td>12M</td>
</tr>
</tbody>
</table>
<p>The increased binary size is caused by statically linking LLVM's code
generation, analysis and optimization libraries into the <tt class="docutils literal">python</tt> binary.
This can be straightforwardly addressed by modifying LLVM to better support
shared linking and then using that, instead of the current static linking. For
the moment, though, static linking provides an accurate look at the cost of
linking against LLVM.</p>
<p>Even when statically linking, we believe there is still headroom to improve
on-disk binary size by narrowing Unladen Swallow's dependencies on LLVM. This
issue is actively being addressed <a class="footnote-reference" href="#us-binary-size" id="id44">[33]</a>.</p>
</div>
<div class="section" id="performance-retrospective">
<h2><a class="toc-backref" href="#id145">Performance Retrospective</a></h2>
<p>Our initial goal for Unladen Swallow was a 5x performance improvement over
CPython 2.6. We did not hit that, nor to put it bluntly, even come close. Why
did the project not hit that goal, and can an LLVM-based JIT ever hit that goal?</p>
<p>Why did Unladen Swallow not achieve its 5x goal? The primary reason was
that LLVM required more work than we had initially anticipated. Based on the
fact that Apple was shipping products based on LLVM <a class="footnote-reference" href="#llvm-users" id="id45">[83]</a>, and
other high-level languages had successfully implemented LLVM-based JITs
(<a class="footnote-reference" href="#rubinius" id="id46">[62]</a>, <a class="footnote-reference" href="#macruby" id="id47">[64]</a>, <a class="footnote-reference" href="#hlvm" id="id48">[84]</a>), we had assumed that LLVM's JIT was
relatively free of show-stopper bugs.</p>
<p>That turned out to be incorrect. We had to turn our attention away from
performance to fix a number of critical bugs in LLVM's JIT infrastructure (for
example, <a class="footnote-reference" href="#llvm-far-call-issue" id="id49">[85]</a>, <a class="footnote-reference" href="#llvm-jmm-rev" id="id50">[86]</a>) as well as a number of
nice-to-have enhancements that would enable further optimizations along various
axes (for example, <a class="footnote-reference" href="#llvm-globaldce-rev" id="id51">[88]</a>,
<a class="footnote-reference" href="#llvm-memleak-rev" id="id52">[87]</a>, <a class="footnote-reference" href="#llvm-availext-issue" id="id53">[89]</a>). LLVM's static code generation
facilities, tools and optimization passes are stable and stress-tested, but the
just-in-time infrastructure was relatively untested and buggy. We have fixed
this.</p>
<p>(Our hypothesis is that we hit these problems -- problems other projects had
avoided -- because of the complexity and thoroughness of CPython's standard
library test suite.)</p>
<p>We also diverted engineering effort away from performance and into support tools
such as gdb and oProfile. gdb did not work well with JIT compilers at all, and
LLVM previously had no integration with oProfile. Having JIT-aware debuggers and
profilers has been very valuable to the project, and we do not regret
channeling our time in these directions. See the <a class="reference internal" href="#debugging">Debugging</a> and <a class="reference internal" href="#profiling">Profiling</a>
sections for more information.</p>
<p>Can an LLVM-based CPython JIT ever hit the 5x performance target? The benchmark
results for JIT-based JavaScript implementations suggest that 5x is indeed
possible, as do the results PyPy's JIT has delivered for numeric workloads. The
experience of Self-92 <a class="footnote-reference" href="#urs-self" id="id54">[53]</a> is also instructive.</p>
<p>Can LLVM deliver this? We believe that we have only begun to scratch the surface
of what our LLVM-based JIT can deliver. The optimizations we have incorporated
into this system thus far have borne significant fruit (for example,
<a class="footnote-reference" href="#us-specialization-issue" id="id55">[90]</a>, <a class="footnote-reference" href="#us-direct-calling-issue" id="id56">[91]</a>,
<a class="footnote-reference" href="#us-fast-globals-issue" id="id57">[92]</a>). Our experience to date is that the limiting factor
on Unladen Swallow's performance is the engineering cycles needed to implement
the literature. We have found LLVM easy to work with and to modify, and its
built-in optimizations have greatly simplified the task of implementing
Python-level optimizations.</p>
<p>An overview of further performance opportunities is discussed in the
<a class="reference internal" href="#future-work">Future Work</a> section.</p>
</div>
</div>
<div class="section" id="correctness-and-compatibility">
<h1><a class="toc-backref" href="#id146">Correctness and Compatibility</a></h1>
<p>Unladen Swallow's correctness test suite includes CPython's test suite (under
<tt class="docutils literal">Lib/test/</tt>), as well as a number of important third-party applications and
libraries <a class="footnote-reference" href="#tested-apps" id="id58">[6]</a>. A full list of these applications and libraries is
reproduced below. Any dependencies needed by these packages, such as
<tt class="docutils literal">zope.interface</tt> <a class="footnote-reference" href="#zope-interface" id="id59">[35]</a>, are also tested indirectly as a part of
testing the primary package, thus widening the corpus of tested third-party
Python code.</p>
<ul class="simple">
<li>2to3</li>
<li>Cheetah</li>
<li>cvs2svn</li>
<li>Django</li>
<li>Nose</li>
<li>NumPy</li>
<li>PyCrypto</li>
<li>pyOpenSSL</li>
<li>PyXML</li>
<li>Setuptools</li>
<li>SQLAlchemy</li>
<li>SWIG</li>
<li>SymPy</li>
<li>Twisted</li>
<li>ZODB</li>
</ul>
<p>These applications pass all relevant tests when run under Unladen Swallow. Note
that some tests that failed against our baseline of CPython 2.6.4 were disabled,
as were tests that made assumptions about CPython internals such as exact
bytecode numbers or bytecode format. Any package with disabled tests includes
a <tt class="docutils literal">README.unladen</tt> file that details the changes (for example,
<a class="footnote-reference" href="#us-sqlalchemy-readme" id="id60">[38]</a>).</p>
<p>In addition, Unladen Swallow is tested automatically against an array of
internal Google Python libraries and applications. These include Google's
internal Python bindings for BigTable <a class="footnote-reference" href="#bigtable" id="id61">[36]</a>, the Mondrian code review
application <a class="footnote-reference" href="#mondrian" id="id62">[37]</a>, and Google's Python standard library, among others.
The changes needed to run these projects under Unladen Swallow have consistently
broken into one of three camps:</p>
<ul class="simple">
<li>Adding CPython 2.6 C API compatibility. Since Google still primarily uses
CPython 2.4 internally, we have needed to convert uses of <tt class="docutils literal">int</tt> to
<tt class="docutils literal">Py_ssize_t</tt> and similar API changes.</li>
<li>Fixing or disabling explicit, incorrect tests of the CPython version number.</li>
<li>Conditionally disabling code that worked around or depending on bugs in
CPython 2.4 that have since been fixed.</li>
</ul>
<p>Testing against this wide range of public and proprietary applications and
libraries has been instrumental in ensuring the correctness of Unladen Swallow.
Testing has exposed bugs that we have duly corrected. Our automated regression
testing regime has given us high confidence in our changes as we have moved
forward.</p>
<p>In addition to third-party testing, we have added further tests to CPython's
test suite for corner cases of the language or implementation that we felt were
untested or underspecified (for example, <a class="footnote-reference" href="#us-import-tests" id="id63">[49]</a>,
<a class="footnote-reference" href="#us-tracing-tests" id="id64">[50]</a>). These have been especially important when implementing
optimizations, helping make sure we have not accidentally broken the darker
corners of Python.</p>
<p>We have also constructed a test suite focused solely on the LLVM-based JIT
compiler and the optimizations implemented for it <a class="footnote-reference" href="#us-test-llvm" id="id65">[39]</a>. Because of
the complexity and subtlety inherent in writing an optimizing compiler, we have
attempted to exhaustively enumerate the constructs, scenarios and corner cases
we are compiling and optimizing. The JIT tests also include tests for things
like the JIT hotness model, making it easier for future CPython developers to
maintain and improve.</p>
<p>We have recently begun using fuzz testing <a class="footnote-reference" href="#fuzz-testing" id="id66">[40]</a> to stress-test the
compiler. We have used both pyfuzz <a class="footnote-reference" href="#pyfuzz" id="id67">[41]</a> and Fusil <a class="footnote-reference" href="#fusil" id="id68">[42]</a> in the past,
and we recommend they be introduced as an automated part of the CPython testing
process.</p>
<div class="section" id="known-incompatibilities">
<h2><a class="toc-backref" href="#id147">Known Incompatibilities</a></h2>
<p>The only application or library we know to not work with Unladen Swallow that
does work with CPython 2.6.4 is Psyco <a class="footnote-reference" href="#psyco" id="id69">[66]</a>. We are aware of some libraries
such as PyGame <a class="footnote-reference" href="#pygame" id="id70">[80]</a> that work well with CPython 2.6.4, but suffer some
degradation due to changes made in Unladen Swallow. We are tracking this issue
<a class="footnote-reference" href="#us-background-thread-issue" id="id71">[48]</a> and are working to resolve these instances of
degradation.</p>
<p>While Unladen Swallow is source-compatible with CPython 2.6.4, it is not
binary compatible. C extension modules compiled against one will need to be
recompiled to work with the other.</p>
<p>The merger of Unladen Swallow should have minimal impact on long-lived
CPython optimization branches like WPython. WPython <a class="footnote-reference" href="#wpython" id="id72">[106]</a> and Unladen
Swallow are largely orthogonal, and there is no technical reason why both
could not be merged into CPython. The changes needed to make WPython
compatible with a JIT-enhanced version of CPython should be minimal
<a class="footnote-reference" href="#us-wpython-compat" id="id73">[115]</a>. The same should be true for other CPython optimization
projects (for example, <a class="footnote-reference" href="#asher-rotem" id="id74">[116]</a>).</p>
<p>Invasive forks of CPython such as Stackless Python <a class="footnote-reference" href="#stackless" id="id75">[117]</a> are more
challenging to support. Since Stackless is highly unlikely to be merged into
CPython <a class="footnote-reference" href="#stackless-merger" id="id76">[118]</a> and an increased maintenance burden is part and
parcel of any fork, we consider compatibility with Stackless to be relatively
low-priority. JIT-compiled stack frames use the C stack, so Stackless should
be able to treat them the same as it treats calls through extension modules.
If that turns out to be unacceptable, Stackless could either remove the JIT
compiler or improve JIT code generation to better support heap-based stack
frames <a class="footnote-reference" href="#llvm-heap-frames" id="id77">[119]</a>, <a class="footnote-reference" href="#llvm-heap-frames-disc" id="id78">[120]</a>.</p>
</div>
</div>
<div class="section" id="platform-support">
<h1><a class="toc-backref" href="#id148">Platform Support</a></h1>
<p>Unladen Swallow is inherently limited by the platform support provided by LLVM,
especially LLVM's JIT compilation system <a class="footnote-reference" href="#llvm-hardware" id="id79">[7]</a>. LLVM's JIT has the
best support on x86 and x86-64 systems, and these are the platforms where
Unladen Swallow has received the most testing. We are confident in LLVM/Unladen
Swallow's support for x86 and x86-64 hardware. PPC and ARM support exists, but
is not widely used and may be buggy (for example, <a class="footnote-reference" href="#llvm-ppc-eager-jit-issue" id="id80">[101]</a>,
<a class="footnote-reference" href="#llvm-far-call-issue" id="id81">[85]</a>, <a class="footnote-reference" href="#llvm-arm-jit-issue" id="id82">[102]</a>).</p>
<p>Unladen Swallow is known to work on the following operating systems: Linux,
Darwin, Windows. Unladen Swallow has received the most testing on Linux and
Darwin, though it still builds and passes its tests on Windows.</p>
<p>In order to support hardware and software platforms where LLVM's JIT does not
work, Unladen Swallow provides a <tt class="docutils literal">./configure <span class="pre">--without-llvm</span></tt> option. This
flag carves out any part of Unladen Swallow that depends on LLVM, yielding a
Python binary that works and passes its tests, but has no performance
advantages. This configuration is recommended for hardware unsupported by LLVM,
or systems that care more about memory usage than performance.</p>
</div>
<div class="section" id="impact-on-cpython-development">
<h1><a class="toc-backref" href="#id149">Impact on CPython Development</a></h1>
<div class="section" id="experimenting-with-changes-to-python-or-cpython-bytecode">
<h2><a class="toc-backref" href="#id150">Experimenting with Changes to Python or CPython Bytecode</a></h2>
<p>Unladen Swallow's JIT compiler operates on CPython bytecode, and as such, it is
immune to Python language changes that affect only the parser.</p>
<p>We recommend that changes to the CPython bytecode compiler or the semantics of
individual bytecodes be prototyped in the interpreter loop first, then be ported
to the JIT compiler once the semantics are clear. To make this easier, Unladen
Swallow includes a <tt class="docutils literal"><span class="pre">--without-llvm</span></tt> configure-time option that strips out the
JIT compiler and all associated infrastructure. This leaves the current burden
of experimentation unchanged so that developers can prototype in the current
low-barrier-to-entry interpreter loop.</p>
<p>Unladen Swallow began implementing its JIT compiler by doing straightforward,
naive translations from bytecode implementations into LLVM API calls. We found
this process to be easily understood, and we recommend the same approach for
CPython. We include several sample changes from the Unladen Swallow repository
here as examples of this style of development: <a class="footnote-reference" href="#us-r359" id="id83">[26]</a>, <a class="footnote-reference" href="#us-r376" id="id84">[27]</a>,
<a class="footnote-reference" href="#us-r417" id="id85">[28]</a>, <a class="footnote-reference" href="#us-r517" id="id86">[29]</a>.</p>
</div>
<div class="section" id="debugging">
<h2><a class="toc-backref" href="#id151">Debugging</a></h2>
<p>The Unladen Swallow team implemented changes to gdb to make it easier to use gdb
to debug JIT-compiled Python code. These changes were released in gdb 7.0
<a class="footnote-reference" href="#gdb70" id="id87">[17]</a>. They make it possible for gdb to identify and unwind past
JIT-generated call stack frames. This allows gdb to continue to function as
before for CPython development if one is changing, for example, the <tt class="docutils literal">list</tt>
type or builtin functions.</p>
<p>Example backtrace after our changes, where <tt class="docutils literal">baz</tt>, <tt class="docutils literal">bar</tt> and <tt class="docutils literal">foo</tt> are
JIT-compiled:</p>
<pre class="literal-block">
Program received signal SIGSEGV, Segmentation fault.
0x00002aaaabe7d1a8 in baz ()
(gdb) bt
#0 0x00002aaaabe7d1a8 in baz ()
#1 0x00002aaaabe7d12c in bar ()
#2 0x00002aaaabe7d0aa in foo ()
#3 0x00002aaaabe7d02c in main ()
#4 0x0000000000b870a2 in llvm::JIT::runFunction (this=0x1405b70, F=0x14024e0, ArgValues=...)
at /home/rnk/llvm-gdb/lib/ExecutionEngine/JIT/JIT.cpp:395
#5 0x0000000000baa4c5 in llvm::ExecutionEngine::runFunctionAsMain
(this=0x1405b70, Fn=0x14024e0, argv=..., envp=0x7fffffffe3c0)
at /home/rnk/llvm-gdb/lib/ExecutionEngine/ExecutionEngine.cpp:377
#6 0x00000000007ebd52 in main (argc=2, argv=0x7fffffffe3a8,
envp=0x7fffffffe3c0) at /home/rnk/llvm-gdb/tools/lli/lli.cpp:208
</pre>
<p>Previously, the JIT-compiled frames would have caused gdb to unwind incorrectly,
generating lots of obviously-incorrect <tt class="docutils literal">#6 0x00002aaaabe7d0aa in <span class="pre">??</span> ()</tt>-style
stack frames.</p>
<p>Highlights:</p>
<ul class="simple">
<li>gdb 7.0 is able to correctly parse JIT-compiled stack frames, allowing full
use of gdb on non-JIT-compiled functions, that is, the vast majority of the
CPython codebase.</li>
<li>Disassembling inside a JIT-compiled stack frame automatically prints the full
list of instructions making up that function. This is an advance over the
state of gdb before our work: developers needed to guess the starting address
of the function and manually disassemble the assembly code.</li>
<li>Flexible underlying mechanism allows CPython to add more and more information,
and eventually reach parity with C/C++ support in gdb for JIT-compiled machine
code.</li>
</ul>
<p>Lowlights:</p>
<ul class="simple">
<li>gdb cannot print local variables or tell you what line you're currently
executing inside a JIT-compiled function. Nor can it step through
JIT-compiled code, except for one instruction at a time.</li>
<li>Not yet integrated with Apple's gdb or Microsoft's Visual Studio debuggers.</li>
</ul>
<p>The Unladen Swallow team is working with Apple to get these changes
incorporated into their future gdb releases.</p>
</div>
<div class="section" id="profiling">
<h2><a class="toc-backref" href="#id152">Profiling</a></h2>
<p>Unladen Swallow integrates with oProfile 0.9.4 and newer <a class="footnote-reference" href="#oprofile" id="id88">[18]</a> to support
assembly-level profiling on Linux systems. This means that oProfile will
correctly symbolize JIT-compiled functions in its reports.</p>
<p>Example report, where the <tt class="docutils literal">#u#</tt>-prefixed symbol names are JIT-compiled Python
functions:</p>
<pre class="literal-block">
$ opreport -l ./python | less
CPU: Core 2, speed 1600 MHz (estimated)
Counted CPU_CLK_UNHALTED events (Clock cycles when not halted) with a unit mask of 0x00 (Unhalted core cycles) count 100000
samples % image name symbol name
79589 4.2329 python PyString_FromFormatV
62971 3.3491 python PyEval_EvalCodeEx
62713 3.3354 python tupledealloc
57071 3.0353 python _PyEval_CallFunction
50009 2.6597 24532.jo #u#force_unicode
47468 2.5246 python PyUnicodeUCS2_Decode
45829 2.4374 python PyFrame_New
45173 2.4025 python lookdict_string
43082 2.2913 python PyType_IsSubtype
39763 2.1148 24532.jo #u#render5
38145 2.0287 python _PyType_Lookup
37643 2.0020 python PyObject_GC_UnTrack
37105 1.9734 python frame_dealloc
36849 1.9598 python PyEval_EvalFrame
35630 1.8950 24532.jo #u#resolve
33313 1.7717 python PyObject_IsInstance
33208 1.7662 python PyDict_GetItem
33168 1.7640 python PyTuple_New
30458 1.6199 python PyCFunction_NewEx
</pre>
<p>This support is functional, but as-yet unpolished. Unladen Swallow maintains a
punchlist of items we feel are important to improve in our oProfile integration
to make it more useful to core CPython developers <a class="footnote-reference" href="#us-oprofile-punchlist" id="id89">[19]</a>.</p>
<p>Highlights:</p>
<ul class="simple">
<li>Symbolization of JITted frames working in oProfile on Linux.</li>
</ul>
<p>Lowlights:</p>
<ul class="simple">
<li>No work yet invested in improving symbolization of JIT-compiled frames for
Apple's Shark <a class="footnote-reference" href="#shark" id="id90">[20]</a> or Microsoft's Visual Studio profiling tools.</li>
<li>Some polishing still desired for oProfile output.</li>
</ul>
<p>We recommend using oProfile 0.9.5 (and newer) to work around a now-fixed bug on
x86-64 platforms in oProfile. oProfile 0.9.4 will work fine on 32-bit platforms,
however.</p>
<p>Given the ease of integrating oProfile with LLVM <a class="footnote-reference" href="#llvm-oprofile-change" id="id91">[21]</a> and
Unladen Swallow <a class="footnote-reference" href="#us-oprofile-change" id="id92">[22]</a>, other profiling tools should be easy as
well, provided they support a similar JIT interface <a class="footnote-reference" href="#oprofile-jit-interface" id="id93">[23]</a>.</p>
<p>We have documented the process for using oProfile to profile Unladen Swallow
<a class="footnote-reference" href="#oprofile-workflow" id="id94">[24]</a>. This document will be merged into CPython's <cite>Doc/</cite> tree
in the merge.</p>
</div>
<div class="section" id="addition-of-c-to-cpython">
<h2><a class="toc-backref" href="#id153">Addition of C++ to CPython</a></h2>
<p>In order to use LLVM, Unladen Swallow has introduced C++ into the core CPython
tree and build process. This is an unavoidable part of depending on LLVM; though
LLVM offers a C API <a class="footnote-reference" href="#llvm-c-api" id="id95">[8]</a>, it is limited and does not expose the
functionality needed by CPython. Because of this, we have implemented the
internal details of the Unladen Swallow JIT and its supporting infrastructure
in C++. We do not propose converting the entire CPython codebase to C++.</p>
<p>Highlights:</p>
<ul class="simple">
<li>Easy use of LLVM's full, powerful code generation and related APIs.</li>
<li>Convenient, abstract data structures simplify code.</li>
<li>C++ is limited to relatively small corners of the CPython codebase.</li>
<li>C++ can be disabled via <tt class="docutils literal">./configure <span class="pre">--without-llvm</span></tt>, which even omits the
dependency on <tt class="docutils literal">libstdc++</tt>.</li>
</ul>
<p>Lowlights:</p>
<ul class="simple">
<li>Developers must know two related languages, C and C++ to work on the full
range of CPython's internals.</li>
<li>A C++ style guide will need to be developed and enforced. <a class="reference external" href="/dev/peps/pep-0007">PEP 7</a> will be
extended <a class="footnote-reference" href="#pep7-cpp" id="id96">[121]</a> to encompass C++ by taking the relevant parts of
the C++ style guides from Unladen Swallow <a class="footnote-reference" href="#us-styleguide" id="id97">[71]</a>, LLVM
<a class="footnote-reference" href="#llvm-styleguide" id="id98">[72]</a> and Google <a class="footnote-reference" href="#google-styleguide" id="id99">[73]</a>.</li>
<li>Different C++ compilers emit different ABIs; this can cause problems if
CPython is compiled with one C++ compiler and extensions modules are compiled
with a different C++ compiler.</li>
</ul>
</div>
<div class="section" id="managing-llvm-releases-c-api-changes">
<h2><a class="toc-backref" href="#id154">Managing LLVM Releases, C++ API Changes</a></h2>
<p>LLVM is released regularly every six months. This means that LLVM may be
released two or three times during the course of development of a CPython 3.x
release. Each LLVM release brings newer and more powerful optimizations,
improved platform support and more sophisticated code generation.</p>
<p>LLVM releases usually include incompatible changes to the LLVM C++ API; the
release notes for LLVM 2.6 <a class="footnote-reference" href="#llvm-26-whatsnew" id="id100">[9]</a> include a list of
intentionally-introduced incompatibilities. Unladen Swallow has tracked LLVM
trunk closely over the course of development. Our experience has been
that LLVM API changes are obvious and easily or mechanically remedied. We
include two such changes from the Unladen Swallow tree as references here:
<a class="footnote-reference" href="#us-llvm-r820" id="id101">[10]</a>, <a class="footnote-reference" href="#us-llvm-r532" id="id102">[11]</a>.</p>
<p>Due to API incompatibilities, we recommend that an LLVM-based CPython target
compatibility with a single version of LLVM at a time. This will lower the
overhead on the core development team. Pegging to an LLVM version should not be
a problem from a packaging perspective, because pre-built LLVM packages
generally become available via standard system package managers fairly quickly
following an LLVM release, and failing that, llvm.org itself includes binary
releases.</p>
<p>Unladen Swallow has historically included a copy of the LLVM and Clang source
trees in the Unladen Swallow tree; this was done to allow us to closely track
LLVM trunk as we made patches to it. We do not recommend this model of
development for CPython. CPython releases should be based on official LLVM
releases. Pre-built LLVM packages are available from MacPorts <a class="footnote-reference" href="#llvm-macports" id="id103">[12]</a>
for Darwin, and from most major Linux distributions (<a class="footnote-reference" href="#llvm-ubuntu" id="id104">[13]</a>,
<a class="footnote-reference" href="#llvm-debian" id="id105">[14]</a>, <a class="footnote-reference" href="#llvm-fedora" id="id106">[16]</a>). LLVM itself provides additional binaries,
such as for MinGW <a class="footnote-reference" href="#llvm-mingw" id="id107">[25]</a>.</p>
<p>LLVM is currently intended to be statically linked; this means that binary
releases of CPython will include the relevant parts (not all!) of LLVM. This
will increase the binary size, as noted above. To simplify downstream package
management, we will modify LLVM to better support shared linking. This issue
will block final merger <a class="footnote-reference" href="#us-shared-link-issue" id="id108">[99]</a>.</p>
<p>Unladen Swallow has tasked a full-time engineer with fixing any remaining
critical issues in LLVM before LLVM's 2.7 release. We consider it essential that
CPython 3.x be able to depend on a released version of LLVM, rather than closely
tracking LLVM trunk as Unladen Swallow has done. We believe we will finish this
work <a class="footnote-reference" href="#us-llvm-punchlist" id="id109">[100]</a> before the release of LLVM 2.7, expected in May 2010.</p>
</div>
<div class="section" id="building-cpython">
<h2><a class="toc-backref" href="#id155">Building CPython</a></h2>
<p>In addition to a runtime dependency on LLVM, Unladen Swallow includes a
build-time dependency on Clang <a class="footnote-reference" href="#clang" id="id110">[5]</a>, an LLVM-based C/C++ compiler. We use
this to compile parts of the C-language Python runtime to LLVM's intermediate
representation; this allows us to perform cross-language inlining, yielding
increased performance. Clang is not required to run Unladen Swallow. Clang
binary packages are available from most major Linux distributions (for example,
<a class="footnote-reference" href="#clang-debian" id="id111">[15]</a>).</p>
<p>We examined the impact of Unladen Swallow on the time needed to build Python,
including configure, full builds and incremental builds after touching a single
C source file.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="23%" />
<col width="23%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">./configure</th>
<th class="head">CPython 2.6.4</th>
<th class="head">CPython 3.1.1</th>
<th class="head">Unladen Swallow r988</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Run 1</td>
<td>0m20.795s</td>
<td>0m16.558s</td>
<td>0m15.477s</td>
</tr>
<tr><td>Run 2</td>
<td>0m15.255s</td>
<td>0m16.349s</td>
<td>0m15.391s</td>
</tr>
<tr><td>Run 3</td>
<td>0m15.228s</td>
<td>0m16.299s</td>
<td>0m15.528s</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="23%" />
<col width="23%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Full make</th>
<th class="head">CPython 2.6.4</th>
<th class="head">CPython 3.1.1</th>
<th class="head">Unladen Swallow r988</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Run 1</td>
<td>1m30.776s</td>
<td>1m22.367s</td>
<td>1m54.053s</td>
</tr>
<tr><td>Run 2</td>
<td>1m21.374s</td>
<td>1m22.064s</td>
<td>1m49.448s</td>
</tr>
<tr><td>Run 3</td>
<td>1m22.047s</td>
<td>1m23.645s</td>
<td>1m49.305s</td>
</tr>
</tbody>
</table>
<p>Full builds take a hit due to a) additional <tt class="docutils literal">.cc</tt> files needed for LLVM
interaction, b) statically linking LLVM into <tt class="docutils literal">libpython</tt>, c) compiling parts
of the Python runtime to LLVM IR to enable cross-language inlining.</p>
<p>Incremental builds are also somewhat slower than mainline CPython. The table
below shows incremental rebuild times after touching <tt class="docutils literal">Objects/listobject.c</tt>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="23%" />
<col width="23%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Incr make</th>
<th class="head">CPython 2.6.4</th>
<th class="head">CPython 3.1.1</th>
<th class="head">Unladen Swallow r1024</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Run 1</td>
<td>0m1.854s</td>
<td>0m1.456s</td>
<td>0m6.680s</td>
</tr>
<tr><td>Run 2</td>
<td>0m1.437s</td>
<td>0m1.442s</td>
<td>0m5.310s</td>
</tr>
<tr><td>Run 3</td>
<td>0m1.440s</td>
<td>0m1.425s</td>
<td>0m7.639s</td>
</tr>
</tbody>
</table>
<p>As with full builds, this extra time comes from statically linking LLVM
into <tt class="docutils literal">libpython</tt>. If <tt class="docutils literal">libpython</tt> were linked shared against LLVM, this
overhead would go down.</p>
</div>
</div>
<div class="section" id="proposed-merge-plan">
<h1><a class="toc-backref" href="#id156">Proposed Merge Plan</a></h1>
<p>We propose focusing our efforts on eventual merger with CPython's 3.x line of
development. The BDFL has indicated that 2.7 is to be the final release of
CPython's 2.x line of development <a class="footnote-reference" href="#bdfl-27-final" id="id112">[30]</a>, and since 2.7 alpha 1 has
already been released <a class="footnote-reference" href="#cpy-27a1" id="id113">[31]</a>, we have missed the window. Python 3 is the
future, and that is where we will target our performance efforts.</p>
<p>We recommend the following plan for merger of Unladen Swallow into the CPython
source tree:</p>
<ul class="simple">
<li>Creation of a branch in the CPython SVN repository to work in, call it
<tt class="docutils literal"><span class="pre">py3k-jit</span></tt> as a strawman. This will be a branch of the CPython <tt class="docutils literal">py3k</tt>
branch.</li>
<li>We will keep this branch closely integrated to <tt class="docutils literal">py3k</tt>. The further we
deviate, the harder our work will be.</li>
<li>Any JIT-related patches will go into the <tt class="docutils literal"><span class="pre">py3k-jit</span></tt> branch.</li>
<li>Non-JIT-related patches will go into the <tt class="docutils literal">py3k</tt> branch (once reviewed and
approved) and be merged back into the <tt class="docutils literal"><span class="pre">py3k-jit</span></tt> branch.</li>
<li>Potentially-contentious issues, such as the introduction of new command line
flags or environment variables, will be discussed on python-dev.</li>
</ul>
<p>Because Google uses CPython 2.x internally, Unladen Swallow is based on CPython
2.6. We would need to port our compiler to Python 3; this would be done as
patches are applied to the <tt class="docutils literal"><span class="pre">py3k-jit</span></tt> branch, so that the branch remains a
consistent implementation of Python 3 at all times.</p>
<p>We believe this approach will be minimally disruptive to the 3.2 or 3.3 release
process while we iron out any remaining issues blocking final merger into
<tt class="docutils literal">py3k</tt>. Unladen Swallow maintains a punchlist of known issues needed before
final merger <a class="footnote-reference" href="#us-punchlist" id="id114">[32]</a>, which includes all problems mentioned in this
PEP; we trust the CPython community will have its own concerns. This punchlist
is not static; other issues may emerge in the future that will block final
merger into the <tt class="docutils literal">py3k</tt> branch.</p>
<p>Changes will be committed directly to the <tt class="docutils literal"><span class="pre">py3k-jit</span></tt> branch, with only large,
tricky or controversial changes sent for pre-commit code review.</p>
<div class="section" id="contingency-plans">
<h2><a class="toc-backref" href="#id157">Contingency Plans</a></h2>
<p>There is a chance that we will not be able to reduce memory usage or startup
time to a level satisfactory to the CPython community. Our primary contingency
plan for this situation is to shift from a online just-in-time compilation
strategy to an offline ahead-of-time strategy using an instrumented CPython
interpreter loop to obtain feedback. This is the same model used by gcc's
feedback-directed optimizations (<cite>-fprofile-generate</cite>) <a class="footnote-reference" href="#gcc-fdo" id="id115">[113]</a> and
Microsoft Visual Studio's profile-guided optimizations <a class="footnote-reference" href="#msvc-pgo" id="id116">[114]</a>; we will
refer to this as &quot;feedback-directed optimization&quot; here, or FDO.</p>
<p>We believe that an FDO compiler for Python would be inferior to a JIT compiler.
FDO requires a high-quality, representative benchmark suite, which is a relative
rarity in both open- and closed-source development. A JIT compiler can
dynamically find and optimize the hot spots in any application -- benchmark
suite or no -- allowing it to adapt to changes in application bottlenecks
without human intervention.</p>
<p>If an ahead-of-time FDO compiler is required, it should be able to leverage a
large percentage of the code and infrastructure already developed for Unladen
Swallow's JIT compiler. Indeed, these two compilation strategies could exist
side-by-side.</p>
</div>
</div>
<div class="section" id="future-work">
<h1><a class="toc-backref" href="#id158">Future Work</a></h1>
<p>A JIT compiler is an extremely flexible tool, and we have by no means exhausted
its full potential. Unladen Swallow maintains a list of yet-to-be-implemented
performance optimizations <a class="footnote-reference" href="#us-perf-punchlist" id="id117">[51]</a> that the team has not yet
had time to fully implement. Examples:</p>
<ul class="simple">
<li>Python/Python inlining <a class="footnote-reference" href="#inlining" id="id118">[68]</a>. Our compiler currently performs no
inlining between pure-Python functions. Work on this is on-going
<a class="footnote-reference" href="#us-inlining" id="id119">[70]</a>.</li>
<li>Unboxing <a class="footnote-reference" href="#unboxing" id="id120">[69]</a>. Unboxing is critical for numerical performance. PyPy
in particular has demonstrated the value of unboxing to heavily-numeric
workloads.</li>
<li>Recompilation, adaptation. Unladen Swallow currently only compiles a Python
function once, based on its usage pattern up to that point. If the usage
pattern changes, limitations in LLVM <a class="footnote-reference" href="#us-recompile-issue" id="id121">[74]</a> prevent us from
recompiling the function to better serve the new usage pattern.</li>
<li>JIT-compile regular expressions. Modern JavaScript engines reuse their JIT
compilation infrastructure to boost regex performance <a class="footnote-reference" href="#us-regex-perf" id="id122">[75]</a>.
Unladen Swallow has developed benchmarks for Python regular expression
performance (<a class="footnote-reference" href="#us-bm-re-compile" id="id123">[76]</a>, <a class="footnote-reference" href="#us-bm-re-v8" id="id124">[77]</a>, <a class="footnote-reference" href="#us-bm-re-effbot" id="id125">[78]</a>), but
work on regex performance is still at an early stage <a class="footnote-reference" href="#us-regex-issue" id="id126">[79]</a>.</li>
<li>Trace compilation <a class="footnote-reference" href="#traces-waste-of-time" id="id127">[93]</a>, <a class="footnote-reference" href="#traces-explicit-pipeline" id="id128">[94]</a>.
Based on the results of PyPy and Tracemonkey <a class="footnote-reference" href="#tracemonkey" id="id129">[95]</a>, we believe that
a CPython JIT should incorporate trace compilation to some degree. We
initially avoided a purely-tracing JIT compiler in favor of a simpler,
function-at-a-time compiler. However this function-at-a-time compiler has laid
the groundwork for a future tracing compiler implemented in the same terms.</li>
<li>Profile generation/reuse. The runtime data gathered by the JIT could be
persisted to disk and reused by subsequent JIT compilations, or by external
tools such as Cython <a class="footnote-reference" href="#cython" id="id130">[103]</a> or a feedback-enhanced code coverage tool.</li>
</ul>
<p>This list is by no means exhaustive. There is a vast literature on optimizations
for dynamic languages that could and should be implemented in terms of Unladen
Swallow's LLVM-based JIT compiler <a class="footnote-reference" href="#us-relevantpapers" id="id131">[55]</a>.</p>
</div>
<div class="section" id="unladen-swallow-community">
<h1><a class="toc-backref" href="#id159">Unladen Swallow Community</a></h1>
<p>We would like to thank the community of developers who have contributed to
Unladen Swallow, in particular: James Abbatiello, Joerg Blank, Eric Christopher,
Alex Gaynor, Chris Lattner, Nick Lewycky, Evan Phoenix and Thomas Wouters.</p>
</div>
<div class="section" id="licensing">
<h1><a class="toc-backref" href="#id160">Licensing</a></h1>
<p>All work on Unladen Swallow is licensed to the Python Software Foundation (PSF)
under the terms of the Python Software Foundation License v2 <a class="footnote-reference" href="#psf-lic" id="id132">[57]</a> under
the umbrella of Google's blanket Contributor License Agreement with the PSF.</p>
<p>LLVM is licensed <a class="footnote-reference" href="#llvm-lic" id="id133">[58]</a> under the University of llinois/NCSA Open Source
License <a class="footnote-reference" href="#ui-lic" id="id134">[59]</a>, a liberal, OSI-approved license. The University of Illinois
Urbana-Champaign is the sole copyright holder for LLVM.</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id161">References</a></h1>
<table class="docutils footnote" frame="void" id="us-post-mortem" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="http://qinsb.blogspot.com/2011/03/unladen-swallow-retrospective.html">http://qinsb.blogspot.com/2011/03/unladen-swallow-retrospective.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="dead-parrot" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/Dead_Parrot_sketch">http://en.wikipedia.org/wiki/Dead_Parrot_sketch</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/">http://code.google.com/p/unladen-swallow/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id15">[4]</a></td><td><a class="reference external" href="http://llvm.org/">http://llvm.org/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="clang" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id110">[5]</a></td><td><a class="reference external" href="http://clang.llvm.org/">http://clang.llvm.org/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="tested-apps" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id58">[6]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/wiki/Testing">http://code.google.com/p/unladen-swallow/wiki/Testing</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-hardware" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id79">[7]</a></td><td><a class="reference external" href="http://llvm.org/docs/GettingStarted.html#hardware">http://llvm.org/docs/GettingStarted.html#hardware</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-c-api" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id95">[8]</a></td><td><a class="reference external" href="http://llvm.org/viewvc/llvm-project/llvm/trunk/include/llvm-c/">http://llvm.org/viewvc/llvm-project/llvm/trunk/include/llvm-c/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-26-whatsnew" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id100">[9]</a></td><td><a class="reference external" href="http://llvm.org/releases/2.6/docs/ReleaseNotes.html#whatsnew">http://llvm.org/releases/2.6/docs/ReleaseNotes.html#whatsnew</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-llvm-r820" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id101">[10]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/detail?r=820">http://code.google.com/p/unladen-swallow/source/detail?r=820</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-llvm-r532" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id102">[11]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/detail?r=532">http://code.google.com/p/unladen-swallow/source/detail?r=532</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-macports" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id103">[12]</a></td><td><a class="reference external" href="http://trac.macports.org/browser/trunk/dports/lang/llvm/Portfile">http://trac.macports.org/browser/trunk/dports/lang/llvm/Portfile</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-ubuntu" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id104">[13]</a></td><td><a class="reference external" href="http://packages.ubuntu.com/karmic/llvm">http://packages.ubuntu.com/karmic/llvm</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-debian" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id105">[14]</a></td><td><a class="reference external" href="http://packages.debian.org/unstable/devel/llvm">http://packages.debian.org/unstable/devel/llvm</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="clang-debian" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id111">[15]</a></td><td><a class="reference external" href="http://packages.debian.org/sid/clang">http://packages.debian.org/sid/clang</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-fedora" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id106">[16]</a></td><td><a class="reference external" href="http://koji.fedoraproject.org/koji/buildinfo?buildID=134384">http://koji.fedoraproject.org/koji/buildinfo?buildID=134384</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="gdb70" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id87">[17]</a></td><td><a class="reference external" href="http://www.gnu.org/software/gdb/download/ANNOUNCEMENT">http://www.gnu.org/software/gdb/download/ANNOUNCEMENT</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="oprofile" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id88">[18]</a></td><td><a class="reference external" href="http://oprofile.sourceforge.net/news/">http://oprofile.sourceforge.net/news/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-oprofile-punchlist" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id89">[19]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=63">http://code.google.com/p/unladen-swallow/issues/detail?id=63</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="shark" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id90">[20]</a></td><td><a class="reference external" href="http://developer.apple.com/tools/sharkoptimize.html">http://developer.apple.com/tools/sharkoptimize.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-oprofile-change" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id91">[21]</a></td><td><a class="reference external" href="http://llvm.org/viewvc/llvm-project?view=rev&amp;revision=75279">http://llvm.org/viewvc/llvm-project?view=rev&amp;revision=75279</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-oprofile-change" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id92">[22]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/detail?r=986">http://code.google.com/p/unladen-swallow/source/detail?r=986</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="oprofile-jit-interface" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id93">[23]</a></td><td><a class="reference external" href="http://oprofile.sourceforge.net/doc/devel/jit-interface.html">http://oprofile.sourceforge.net/doc/devel/jit-interface.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="oprofile-workflow" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id94">[24]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/wiki/UsingOProfile">http://code.google.com/p/unladen-swallow/wiki/UsingOProfile</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-mingw" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id107">[25]</a></td><td><a class="reference external" href="http://llvm.org/releases/download.html">http://llvm.org/releases/download.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-r359" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id83">[26]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/detail?r=359">http://code.google.com/p/unladen-swallow/source/detail?r=359</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-r376" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id84">[27]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/detail?r=376">http://code.google.com/p/unladen-swallow/source/detail?r=376</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-r417" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id85">[28]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/detail?r=417">http://code.google.com/p/unladen-swallow/source/detail?r=417</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-r517" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id86">[29]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/detail?r=517">http://code.google.com/p/unladen-swallow/source/detail?r=517</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="bdfl-27-final" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id112">[30]</a></td><td><a class="reference external" href="http://mail.python.org/pipermail/python-dev/2010-January/095682.html">http://mail.python.org/pipermail/python-dev/2010-January/095682.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="cpy-27a1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id113">[31]</a></td><td><a class="reference external" href="http://www.python.org/dev/peps/pep-0373/">http://www.python.org/dev/peps/pep-0373/</a></td></tr>
</tbody>
</table>
<!-- [#cpy-32]_
http://www.python.org/dev/peps/pep-0392/ -->
<table class="docutils footnote" frame="void" id="us-punchlist" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[32]</td><td><em>(<a class="fn-backref" href="#id4">1</a>, <a class="fn-backref" href="#id114">2</a>)</em> <a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/list?q=label:Merger">http://code.google.com/p/unladen-swallow/issues/list?q=label:Merger</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-binary-size" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id44">[33]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=118">http://code.google.com/p/unladen-swallow/issues/detail?id=118</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-issue-startup-time" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id43">[34]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=64">http://code.google.com/p/unladen-swallow/issues/detail?id=64</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="zope-interface" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id59">[35]</a></td><td><a class="reference external" href="http://www.zope.org/Products/ZopeInterface">http://www.zope.org/Products/ZopeInterface</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="bigtable" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id61">[36]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/BigTable">http://en.wikipedia.org/wiki/BigTable</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="mondrian" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id62">[37]</a></td><td><a class="reference external" href="http://www.niallkennedy.com/blog/2006/11/google-mondrian.html">http://www.niallkennedy.com/blog/2006/11/google-mondrian.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-sqlalchemy-readme" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id60">[38]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/browse/tests/lib/sqlalchemy/README.unladen">http://code.google.com/p/unladen-swallow/source/browse/tests/lib/sqlalchemy/README.unladen</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-test-llvm" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id65">[39]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/browse/trunk/Lib/test/test_llvm.py">http://code.google.com/p/unladen-swallow/source/browse/trunk/Lib/test/test_llvm.py</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="fuzz-testing" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id66">[40]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/Fuzz_testing">http://en.wikipedia.org/wiki/Fuzz_testing</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="pyfuzz" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id67">[41]</a></td><td><a class="reference external" href="http://bitbucket.org/ebo/pyfuzz/overview/">http://bitbucket.org/ebo/pyfuzz/overview/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="fusil" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id68">[42]</a></td><td><a class="reference external" href="http://lwn.net/Articles/322826/">http://lwn.net/Articles/322826/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-memory-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id42">[43]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=68">http://code.google.com/p/unladen-swallow/issues/detail?id=68</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-benchmarks" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[44]</td><td><em>(<a class="fn-backref" href="#id31">1</a>, <a class="fn-backref" href="#id37">2</a>)</em> <a class="reference external" href="http://code.google.com/p/unladen-swallow/wiki/Benchmarks">http://code.google.com/p/unladen-swallow/wiki/Benchmarks</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="students-t-test" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id36">[45]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/Student's_t-test">http://en.wikipedia.org/wiki/Student's_t-test</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="smaps" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id41">[46]</a></td><td><a class="reference external" href="http://bmaurer.blogspot.com/2006/03/memory-usage-with-smaps.html">http://bmaurer.blogspot.com/2006/03/memory-usage-with-smaps.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-background-thread" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id38">[47]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/browse/branches/background-thread">http://code.google.com/p/unladen-swallow/source/browse/branches/background-thread</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-background-thread-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[48]</td><td><em>(<a class="fn-backref" href="#id39">1</a>, <a class="fn-backref" href="#id71">2</a>)</em> <a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=40">http://code.google.com/p/unladen-swallow/issues/detail?id=40</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-import-tests" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id63">[49]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/detail?r=888">http://code.google.com/p/unladen-swallow/source/detail?r=888</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-tracing-tests" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id64">[50]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/diff?spec=svn576&amp;r=576&amp;format=side&amp;path=/trunk/Lib/test/test_trace.py">http://code.google.com/p/unladen-swallow/source/diff?spec=svn576&amp;r=576&amp;format=side&amp;path=/trunk/Lib/test/test_trace.py</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-perf-punchlist" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[51]</td><td><em>(<a class="fn-backref" href="#id40">1</a>, <a class="fn-backref" href="#id117">2</a>)</em> <a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/list?q=label:Performance">http://code.google.com/p/unladen-swallow/issues/list?q=label:Performance</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="jit" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[52]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/Just-in-time_compilation">http://en.wikipedia.org/wiki/Just-in-time_compilation</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="urs-self" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[53]</td><td><em>(<a class="fn-backref" href="#id6">1</a>, <a class="fn-backref" href="#id54">2</a>)</em> <a class="reference external" href="http://research.sun.com/self/papers/urs-thesis.html">http://research.sun.com/self/papers/urs-thesis.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-projectplan" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id17">[54]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/wiki/ProjectPlan">http://code.google.com/p/unladen-swallow/wiki/ProjectPlan</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-relevantpapers" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[55]</td><td><em>(<a class="fn-backref" href="#id13">1</a>, <a class="fn-backref" href="#id131">2</a>)</em> <a class="reference external" href="http://code.google.com/p/unladen-swallow/wiki/RelevantPapers">http://code.google.com/p/unladen-swallow/wiki/RelevantPapers</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-llvm-notes" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[56]</td><td><em>(<a class="fn-backref" href="#id14">1</a>, <a class="fn-backref" href="#id18">2</a>)</em> <a class="reference external" href="http://code.google.com/p/unladen-swallow/source/browse/trunk/Python/llvm_notes.txt">http://code.google.com/p/unladen-swallow/source/browse/trunk/Python/llvm_notes.txt</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="psf-lic" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id132">[57]</a></td><td><a class="reference external" href="http://www.python.org/psf/license/">http://www.python.org/psf/license/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-lic" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id133">[58]</a></td><td><a class="reference external" href="http://llvm.org/docs/DeveloperPolicy.html#clp">http://llvm.org/docs/DeveloperPolicy.html#clp</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="ui-lic" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id134">[59]</a></td><td><a class="reference external" href="http://www.opensource.org/licenses/UoI-NCSA.php">http://www.opensource.org/licenses/UoI-NCSA.php</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="v8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id7">[60]</a></td><td><a class="reference external" href="http://code.google.com/p/v8/">http://code.google.com/p/v8/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="squirrelfishextreme" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id8">[61]</a></td><td><a class="reference external" href="http://webkit.org/blog/214/introducing-squirrelfish-extreme/">http://webkit.org/blog/214/introducing-squirrelfish-extreme/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="rubinius" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[62]</td><td><em>(<a class="fn-backref" href="#id10">1</a>, <a class="fn-backref" href="#id46">2</a>)</em> <a class="reference external" href="http://rubini.us/">http://rubini.us/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="parrot-on-llvm" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[63]</td><td><a class="reference external" href="http://lists.parrot.org/pipermail/parrot-dev/2009-September/002811.html">http://lists.parrot.org/pipermail/parrot-dev/2009-September/002811.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="macruby" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[64]</td><td><em>(<a class="fn-backref" href="#id11">1</a>, <a class="fn-backref" href="#id47">2</a>)</em> <a class="reference external" href="http://www.macruby.org/">http://www.macruby.org/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="hotspot" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[65]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/HotSpot">http://en.wikipedia.org/wiki/HotSpot</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="psyco" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[66]</td><td><em>(<a class="fn-backref" href="#id12">1</a>, <a class="fn-backref" href="#id26">2</a>, <a class="fn-backref" href="#id69">3</a>)</em> <a class="reference external" href="http://psyco.sourceforge.net/">http://psyco.sourceforge.net/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="pypy" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id27">[67]</a></td><td><a class="reference external" href="http://codespeak.net/pypy/dist/pypy/doc/">http://codespeak.net/pypy/dist/pypy/doc/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="inlining" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id118">[68]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/Inline_expansion">http://en.wikipedia.org/wiki/Inline_expansion</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="unboxing" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id120">[69]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/Object_type_(object-oriented_programming%29">http://en.wikipedia.org/wiki/Object_type_(object-oriented_programming%29</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-inlining" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id119">[70]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=86">http://code.google.com/p/unladen-swallow/issues/detail?id=86</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-styleguide" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id97">[71]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/wiki/StyleGuide">http://code.google.com/p/unladen-swallow/wiki/StyleGuide</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-styleguide" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id98">[72]</a></td><td><a class="reference external" href="http://llvm.org/docs/CodingStandards.html">http://llvm.org/docs/CodingStandards.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="google-styleguide" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id99">[73]</a></td><td><a class="reference external" href="http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml">http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-recompile-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id121">[74]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=41">http://code.google.com/p/unladen-swallow/issues/detail?id=41</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-regex-perf" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id122">[75]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/wiki/ProjectPlan#Regular_Expressions">http://code.google.com/p/unladen-swallow/wiki/ProjectPlan#Regular_Expressions</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-bm-re-compile" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id123">[76]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/browse/tests/performance/bm_regex_compile.py">http://code.google.com/p/unladen-swallow/source/browse/tests/performance/bm_regex_compile.py</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-bm-re-v8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id124">[77]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/browse/tests/performance/bm_regex_v8.py">http://code.google.com/p/unladen-swallow/source/browse/tests/performance/bm_regex_v8.py</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-bm-re-effbot" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id125">[78]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/browse/tests/performance/bm_regex_effbot.py">http://code.google.com/p/unladen-swallow/source/browse/tests/performance/bm_regex_effbot.py</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-regex-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id126">[79]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=13">http://code.google.com/p/unladen-swallow/issues/detail?id=13</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="pygame" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id70">[80]</a></td><td><a class="reference external" href="http://www.pygame.org/">http://www.pygame.org/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="numpy" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id34">[81]</a></td><td><a class="reference external" href="http://numpy.scipy.org/">http://numpy.scipy.org/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="pypy-bmarks" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id32">[82]</a></td><td><a class="reference external" href="http://codespeak.net:8099/plotsummary.html">http://codespeak.net:8099/plotsummary.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-users" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id45">[83]</a></td><td><a class="reference external" href="http://llvm.org/Users.html">http://llvm.org/Users.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="hlvm" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id48">[84]</a></td><td><a class="reference external" href="http://www.ffconsultancy.com/ocaml/hlvm/">http://www.ffconsultancy.com/ocaml/hlvm/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-far-call-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[85]</td><td><em>(<a class="fn-backref" href="#id49">1</a>, <a class="fn-backref" href="#id81">2</a>)</em> <a class="reference external" href="http://llvm.org/PR5201">http://llvm.org/PR5201</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-jmm-rev" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id50">[86]</a></td><td><a class="reference external" href="http://llvm.org/viewvc/llvm-project?view=rev&amp;revision=76828">http://llvm.org/viewvc/llvm-project?view=rev&amp;revision=76828</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-memleak-rev" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id52">[87]</a></td><td><a class="reference external" href="http://llvm.org/viewvc/llvm-project?rev=91611&amp;view=rev">http://llvm.org/viewvc/llvm-project?rev=91611&amp;view=rev</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-globaldce-rev" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id51">[88]</a></td><td><a class="reference external" href="http://llvm.org/viewvc/llvm-project?rev=85182&amp;view=rev">http://llvm.org/viewvc/llvm-project?rev=85182&amp;view=rev</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-availext-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id53">[89]</a></td><td><a class="reference external" href="http://llvm.org/PR5735">http://llvm.org/PR5735</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-specialization-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id55">[90]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=73">http://code.google.com/p/unladen-swallow/issues/detail?id=73</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-direct-calling-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id56">[91]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=88">http://code.google.com/p/unladen-swallow/issues/detail?id=88</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-fast-globals-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id57">[92]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=67">http://code.google.com/p/unladen-swallow/issues/detail?id=67</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="traces-waste-of-time" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id127">[93]</a></td><td><a class="reference external" href="http://www.ics.uci.edu/~franz/Site/pubs-pdf/C44Prepub.pdf">http://www.ics.uci.edu/~franz/Site/pubs-pdf/C44Prepub.pdf</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="traces-explicit-pipeline" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id128">[94]</a></td><td><a class="reference external" href="http://www.ics.uci.edu/~franz/Site/pubs-pdf/ICS-TR-07-12.pdf">http://www.ics.uci.edu/~franz/Site/pubs-pdf/ICS-TR-07-12.pdf</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="tracemonkey" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id129">[95]</a></td><td><a class="reference external" href="https://wiki.mozilla.org/JavaScript:TraceMonkey">https://wiki.mozilla.org/JavaScript:TraceMonkey</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-langref" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id16">[96]</a></td><td><a class="reference external" href="http://llvm.org/docs/LangRef.html">http://llvm.org/docs/LangRef.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-wider-perf-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id33">[97]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=120">http://code.google.com/p/unladen-swallow/issues/detail?id=120</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-nbody" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id35">[98]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/source/browse/tests/performance/bm_nbody.py">http://code.google.com/p/unladen-swallow/source/browse/tests/performance/bm_nbody.py</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-shared-link-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id108">[99]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=130">http://code.google.com/p/unladen-swallow/issues/detail?id=130</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-llvm-punchlist" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id109">[100]</a></td><td><a class="reference external" href="http://code.google.com/p/unladen-swallow/issues/detail?id=131">http://code.google.com/p/unladen-swallow/issues/detail?id=131</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-ppc-eager-jit-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id80">[101]</a></td><td><a class="reference external" href="http://llvm.org/PR4816">http://llvm.org/PR4816</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-arm-jit-issue" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id82">[102]</a></td><td><a class="reference external" href="http://llvm.org/PR6065">http://llvm.org/PR6065</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="cython" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[103]</td><td><em>(<a class="fn-backref" href="#id19">1</a>, <a class="fn-backref" href="#id130">2</a>)</em> <a class="reference external" href="http://www.cython.org/">http://www.cython.org/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="shedskin" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id20">[104]</a></td><td><a class="reference external" href="http://shed-skin.blogspot.com/">http://shed-skin.blogspot.com/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="shedskin-library-limits" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id21">[105]</a></td><td><a class="reference external" href="http://shedskin.googlecode.com/files/shedskin-tutorial-0.3.html">http://shedskin.googlecode.com/files/shedskin-tutorial-0.3.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="wpython" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[106]</td><td><em>(<a class="fn-backref" href="#id29">1</a>, <a class="fn-backref" href="#id72">2</a>)</em> <a class="reference external" href="http://code.google.com/p/wpython/">http://code.google.com/p/wpython/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="wpython-performance" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id30">[107]</a></td><td><a class="reference external" href="http://www.mail-archive.com/python-dev&#64;python.org/msg45143.html">http://www.mail-archive.com/python-dev&#64;python.org/msg45143.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="ironpython" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id22">[108]</a></td><td><a class="reference external" href="http://ironpython.net/">http://ironpython.net/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="mono" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id23">[109]</a></td><td><a class="reference external" href="http://www.mono-project.com/">http://www.mono-project.com/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="jython" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id24">[110]</a></td><td><a class="reference external" href="http://www.jython.org/">http://www.jython.org/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="jython-c-ext" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id25">[111]</a></td><td><a class="reference external" href="http://wiki.python.org/jython/JythonFaq/GeneralInfo">http://wiki.python.org/jython/JythonFaq/GeneralInfo</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="pyv8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id28">[112]</a></td><td><a class="reference external" href="http://code.google.com/p/pyv8/">http://code.google.com/p/pyv8/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="gcc-fdo" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id115">[113]</a></td><td><a class="reference external" href="http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html">http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="msvc-pgo" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id116">[114]</a></td><td><a class="reference external" href="http://msdn.microsoft.com/en-us/library/e7k32f4k.aspx">http://msdn.microsoft.com/en-us/library/e7k32f4k.aspx</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="us-wpython-compat" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id73">[115]</a></td><td><a class="reference external" href="http://www.mail-archive.com/python-dev&#64;python.org/msg44962.html">http://www.mail-archive.com/python-dev&#64;python.org/msg44962.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="asher-rotem" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id74">[116]</a></td><td><a class="reference external" href="http://portal.acm.org/citation.cfm?id=1534530.1534550">http://portal.acm.org/citation.cfm?id=1534530.1534550</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="stackless" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id75">[117]</a></td><td><a class="reference external" href="http://www.stackless.com/">http://www.stackless.com/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="stackless-merger" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id76">[118]</a></td><td><a class="reference external" href="http://mail.python.org/pipermail/python-dev/2004-June/045165.html">http://mail.python.org/pipermail/python-dev/2004-June/045165.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-heap-frames" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id77">[119]</a></td><td><a class="reference external" href="http://www.nondot.org/sabre/LLVMNotes/ExplicitlyManagedStackFrames.txt">http://www.nondot.org/sabre/LLVMNotes/ExplicitlyManagedStackFrames.txt</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="llvm-heap-frames-disc" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id78">[120]</a></td><td><a class="reference external" href="http://old.nabble.com/LLVM-and-coroutines-microthreads-td23080883.html">http://old.nabble.com/LLVM-and-coroutines-microthreads-td23080883.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="pep7-cpp" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id96">[121]</a></td><td><a class="reference external" href="http://www.mail-archive.com/python-dev&#64;python.org/msg45544.html">http://www.mail-archive.com/python-dev&#64;python.org/msg45544.html</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id162">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
coding: utf-8
End: -->
</div>



      </div>

      
      <div id="footer">
	<div id="credits">
 	  <a href="/about/website">Website maintained by the Python community</a><br/>
	  <a href="http://www.xs4all.com/" title="Web and email hosting provided by xs4all, Netherlands">hosting by xs4all</a> /
	  <a href="http://www.timparkin.co.uk/" title="Design by Tim Parkin, Yorkshire man, photographer and developer">design by Tim Parkin</a>
	</div>
	Copyright &copy; 1990-2013, <a href='/psf/'>Python Software Foundation</a><br/>
	<a href="/about/legal">Legal Statements</a>
      </div>


    </div>
  </div>
</body>
</html>






