<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>PEP 3135 -- New Super</title>
  <meta name="keywords" content="PEP 3135 -- New Super" />
  <meta name="description" content="PEP 3135 -- New Super" />
  <link rel="alternate" type="application/rss+xml" title="Community Events"
        href="http://www.python.org/channews.rdf" />
  <link rel="alternate" type="application/rss+xml" title="Python Recipes"
        href="http://aspn.activestate.com/ASPN/Cookbook/Python/index_rss" />
  <link rel="alternate" type="application/rss+xml" title="Usergroup News"
        href="http://python-groups.blogspot.com/feeds/posts/default" />
  <link rel="alternate" type="application/rss+xml" title="Python Screencasts"
        href="http://www.showmedo.com/latestVideoFeed/rss2.0?tag=python" />
  <link rel="alternate" type="application/rss+xml" title="Python Podcasts"
        href="http://www.awaretek.com/python/index.xml" />
  <link rel="alternate" type="application/rss+xml" title="Foundation News"
        href="http://feeds.feedburner.com/PythonSoftwareFoundationNews" />
  <link rel="alternate" type="application/rss+xml" title="Python Enhancement Proposals"
        href="http://www.python.org/dev/peps/peps.rss" />
  <link rel="alternate" type="application/rss+xml" title="Python Job Opportunities"
        href="http://www.python.org/community/jobs/jobs.rss" />
  <link rel="alternate" type="application/rss+xml" title="Reddit Feed of Python What's New Online"
        href="http://www.reddit.com/r/Python/.rss" />
  <link rel="alternate" type="application/rss+xml" title="Python Insider"
        href="http://feeds.feedburner.com/PythonInsider" />

  <link rel="stylesheet" type="text/css" media="screen" id="screen-switcher-stylesheet"
        href="/styles/screen-switcher-default.css" />
  <link rel="stylesheet" type="text/css" media="sc&#82;een"
        href="/styles/netscape4.css" />
  <link rel="stylesheet" type="text/css" media="print"
        href="/styles/print.css" />
  <link rel="alternate stylesheet" type="text/css" media="screen"
        href="/styles/largestyles.css" title="large text" />
  <link rel="alternate stylesheet" type="text/css" media="screen"
        href="/styles/defaultfonts.css" title="default fonts" />

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search under the www.python.org Domain"
        href="/search-pysite.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search within the Python Wiki"
        href="/search-pywiki.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search within Python Books at Google Book Search"
        href="/search-pybooks.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search within the Python Documentation"
        href="/search-pydocs.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search for a Module in the Standard Library"
        href="/search-pymodules.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search for Packages inside the Cheeseshop (PyPI)"
        href="/search-pycheese.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search Archives of the Main Python Mailing List"
        href="/search-pythonlist.xml"/>

  <script type="text/javascript" src="/js/iotbs2-key-directors-load.js"></script>
  <script type="text/javascript" src="/js/iotbs2-directors.js"></script>
  <script type="text/javascript" src="/js/iotbs2-core.js"></script>

</head>


<body>
  <!-- Logo -->
  <h1 id="logoheader">
    <a href="/" id="logolink" accesskey="1"><img id="logo" src="/images/python-logo.gif" alt="homepage" border="0" /></a>
  </h1>
  <!-- Skip to Navigation -->
  <div class="skiptonav"><a href="#left-hand-navigation" accesskey="2"><img src="/images/trans.gif" id="skiptonav" alt="skip to navigation" border="0" /></a></div>
  <div class="skiptonav"><a href="#content-body" accesskey="3"><img src="/images/trans.gif" id="skiptocontent" alt="skip to content" border="0" /></a></div>
  <!-- Utility Menu -->
  <div id="utility-menu">
    <!-- Search Box -->
    <div id="searchbox">
      <form method="get" action="http://google.com/search" id="searchform" name="searchform">
        <div id="search">
          <input type="hidden" id="domains" name="domains" value="www.python.org" />
          <input type="hidden" id="sitesearch" name="sitesearch" value="www.python.org" />
          <input type="hidden" id="sourceid" name="sourceid" value="google-search" />
          <input type="text" class="input-text" name="q" id="q" />
          <input type="submit" value="search" class="input-button" name="submit" id="submit" />
          <a href="/search" class="reference">Advanced Search</a>
        </div>
      </form>
    </div>
    <div id="screen-switcher"></div>
  </div>

  <div id="left-hand-navigation">
    <!-- Main Menu -->
    <div id="menu">
      <ul class="level-one">
            <li>
          <a href="/about/" title="About The Python Language">About</a>
        </li>
            <li>
          <a href="/news/" title="Major Happenings Within the Python Community">News</a>
        </li>
            <li>
          <a href="/doc/" title="Tutorials, Library Reference, C API">Documentation</a>
        </li>
            <li>
          <a href="/download/" title="Start Running Python Under Windows, Mac, Linux and Others">Download</a>
        </li>
            <li>
          <a href="/getit/" title="Alternate Download page for China">ä¸è½½</a>
        </li>
            <li>
          <a href="/community/" title="Mailing Lists, Jobs, Conferences, SIGs, Online Chats">Community</a>
        </li>
            <li>
          <a href="/psf/" title="Python Software Foundation">Foundation</a>
        </li>
            <li>
          <a href="http://docs.python.org/devguide/" title="Development of the Python language and website">Core Development</a>
        </li>
      </ul>
    </div>

    <!-- Quick Links -->
    <h4><a style="margin-top:1.5em" href="http://wiki.python.org/moin/">Python Wiki</a></h4>
    <h4><a style="margin-top:1.5em" href="http://blog.python.org/">Python Insider Blog</a></h4>
    <h4><a style="margin-top:1.5em" href="http://wiki.python.org/moin/Python2orPython3">Python 2 or 3?</a></h4>
    <h4><a style="color:#D58228; margin-top:1.5em" href="/psf/donations/">Help Fund Python</a></h4>
    <div style="align:center; padding-top: 0.5em; padding-left: 1em">
      <a href="/psf/donations/"><img width="116" height="42" src="/images/donate.png" alt="" title="" /></a>
    </div>
    <div style="align:center; padding-top: 0.5em; padding-left: 2.5em">
            <a href="http://wiki.python.org/moin/Languages"><img
	      style="align:center"
              width="94" height="46"
	      src="/images/worldmap.jpg" alt="[Python resources in languages other than English]" /></a>
    </div>
    <div style="align:center; padding-top: 0.0em; padding-left: 0em">
       <h4><a href="http://wiki.python.org/moin/Languages">Non-English Resources</a></h4>
    </div>
    <div class="calendar">
        <iframe src="https://www.google.com/calendar/embed?title=Release%20Schedule&amp;showNav=0&amp;showDate=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;src=b6v58qvojllt0i6ql654r1vh00%40group.calendar.google.com&amp;color=%23B1365F&amp;" style=" border-width:0 " width="180" height="300" frameborder="0" scrolling="no">
            <a href="http://www.google.com/calendar/ical/b6v58qvojllt0i6ql654r1vh00%40group.calendar.google.com/public/basic.ics">
                Python Release Schedule iCal Calendar
            </a>
        </iframe>
    </div>
    <div class="calendar">
        <iframe src="https://www.google.com/calendar/embed?title=Events%20Calendar&amp;showNav=0&amp;showDate=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;src=j7gov1cmnqr9tvg14k621j7t5c%40group.calendar.google.com&amp;color=%23B1365F&amp;" style=" border-width:0 " width="180" height="300" frameborder="0" scrolling="no">
            <a href="http://www.google.com/calendar/ical/j7gov1cmnqr9tvg14k621j7t5c%40group.calendar.google.com/public/basic.ics">
                Python Events iCal Calendar
            </a>
        </iframe>
        <p class="level-one"><a href="http://pycon.org/#calendar">Add an event</a> to this calendar.</p>
    </div>
    <div class="calendar">
        <iframe src="https://www.google.com/calendar/embed?title=User%20Group%20Calendar&amp;showNav=0&amp;showDate=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;src=3haig2m9msslkpf2tn1h56nn9g%40group.calendar.google.com&amp;color=%23125A12&amp;" style=" border-width:0 " width="180" height="300" frameborder="0" scrolling="no">
            <a href="http://www.google.com/calendar/ical/3haig2m9msslkpf2tn1h56nn9g%40group.calendar.google.com/public/basic.ics">
                Python User Group iCal Calendar
            </a>
        </iframe>
        <p class="level-one"><a href="http://pycon.org/#calendar">Add an event</a> to this calendar.</p>
    </div>
  </div>

  <div id="content-body">
    <div id="body-main">
      <div id="content">
        
          <div id="breadcrumb">
               <a href="/dev/peps/">PEP Index</a>
               <span class="breadcrumb-separator">&gt;</span>
            
            PEP 3135 -- New Super
          </div>



        <!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">3135</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">New Super</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">07e52e30e5e3</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="http://hg.python.org/peps/file/tip/pep-3135.txt">2011-08-30 20:50:41 +1000 (Tue, 30 Aug 2011)</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Calvin Spealman &lt;ironfroggy&#32;&#97;t&#32;gmail.com&gt;,
Tim Delaney &lt;timothy.c.delaney&#32;&#97;t&#32;gmail.com&gt;,
Lie Ryan &lt;lie.1296&#32;&#97;t&#32;gmail.com&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Final</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">28-Apr-2007</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">3.0</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">28-Apr-2007, 29-Apr-2007 (1), 29-Apr-2007 (2), 14-May-2007, 12-Mar-2009</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#numbering-note" id="id3">Numbering Note</a></li>
<li><a class="reference internal" href="#abstract" id="id4">Abstract</a></li>
<li><a class="reference internal" href="#rationale" id="id5">Rationale</a></li>
<li><a class="reference internal" href="#specification" id="id6">Specification</a></li>
<li><a class="reference internal" href="#closed-issues" id="id7">Closed Issues</a><ul>
<li><a class="reference internal" href="#determining-the-class-object-to-use" id="id8">Determining the class object to use</a></li>
<li><a class="reference internal" href="#should-super-actually-become-a-keyword" id="id9">Should <tt class="docutils literal">super</tt> actually become a keyword?</a></li>
<li><a class="reference internal" href="#super-used-with-call-attributes" id="id10">super used with __call__ attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alternative-proposals" id="id11">Alternative Proposals</a><ul>
<li><a class="reference internal" href="#no-changes" id="id12">No Changes</a></li>
<li><a class="reference internal" href="#dynamic-attribute-on-super-type" id="id13">Dynamic attribute on super type</a></li>
<li><a class="reference internal" href="#self-super-foo-args" id="id14">self.__super__.foo(*args)</a></li>
<li><a class="reference internal" href="#super-self-args-or-super-self-args" id="id15">super(self, *args) or __super__(self, *args)</a></li>
<li><a class="reference internal" href="#super-foo-self-args" id="id16">super.foo(self, *args)</a></li>
<li><a class="reference internal" href="#super-p-kw" id="id17">super(*p, **kw)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#history" id="id18">History</a></li>
<li><a class="reference internal" href="#references" id="id19">References</a></li>
<li><a class="reference internal" href="#copyright" id="id20">Copyright</a></li>
</ul>
</div>
<div class="section" id="numbering-note">
<h1><a class="toc-backref" href="#id3">Numbering Note</a></h1>
<p>This PEP started its life as <a class="reference external" href="/dev/peps/pep-0367">PEP 367</a>.  Since it is now targeted
for Python 3000, it has been moved into the 3xxx space.</p>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id4">Abstract</a></h1>
<p>This PEP proposes syntactic sugar for use of the <tt class="docutils literal">super</tt> type to automatically
construct instances of the super type binding to the class that a method was
defined in, and the instance (or class object for classmethods) that the method
is currently acting upon.</p>
<p>The premise of the new super usage suggested is as follows:</p>
<pre class="literal-block">
super().foo(1, 2)
</pre>
<p>to replace the old:</p>
<pre class="literal-block">
super(Foo, self).foo(1, 2)
</pre>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id5">Rationale</a></h1>
<p>The current usage of super requires an explicit passing of both the class and
instance it must operate from, requiring a breaking of the DRY (Don't Repeat
Yourself) rule. This hinders any change in class name, and is often considered
a wart by many.</p>
</div>
<div class="section" id="specification">
<h1><a class="toc-backref" href="#id6">Specification</a></h1>
<p>Within the specification section, some special terminology will be used to
distinguish similar and closely related concepts. &quot;super class&quot; will refer to
the actual builtin class named &quot;super&quot;. A &quot;super instance&quot; is simply an
instance of the super class, which is associated with another class and
possibly with an instance of that class.</p>
<p>The new <tt class="docutils literal">super</tt> semantics are only available in Python 3.0.</p>
<p>Replacing the old usage of super, calls to the next class in the MRO (method
resolution order) can be made without explicitly passing the class object
(although doing so will still be supported). Every function
will have a cell named <tt class="docutils literal">__class__</tt> that contains the class object that the
function is defined in.</p>
<p>The new syntax:</p>
<pre class="literal-block">
super()
</pre>
<p>is equivalent to:</p>
<pre class="literal-block">
super(__class__, &lt;firstarg&gt;)
</pre>
<p>where <tt class="docutils literal">__class__</tt> is the class that the method was defined in, and
<tt class="docutils literal">&lt;firstarg&gt;</tt> is the first parameter of the method (normally <tt class="docutils literal">self</tt>
for instance methods, and <tt class="docutils literal">cls</tt> for class methods). For functions
defined outside a class body, <tt class="docutils literal">__class__</tt> is not defined, and will
result in runtime <tt class="docutils literal">SystemError</tt>.</p>
<p>While <tt class="docutils literal">super</tt> is not a reserved word, the parser recognizes the use
of <tt class="docutils literal">super</tt> in a method definition and only passes in the
<tt class="docutils literal">__class__</tt> cell when this is found.  Thus, calling a global alias
of <tt class="docutils literal">super</tt> without arguments will not necessarily work.</p>
</div>
<div class="section" id="closed-issues">
<h1><a class="toc-backref" href="#id7">Closed Issues</a></h1>
<div class="section" id="determining-the-class-object-to-use">
<h2><a class="toc-backref" href="#id8">Determining the class object to use</a></h2>
<p>The class object is taken from a cell named <tt class="docutils literal">__class__</tt>.</p>
</div>
<div class="section" id="should-super-actually-become-a-keyword">
<h2><a class="toc-backref" href="#id9">Should <tt class="docutils literal">super</tt> actually become a keyword?</a></h2>
<p>No. It is not necessary for super to become a keyword.</p>
</div>
<div class="section" id="super-used-with-call-attributes">
<h2><a class="toc-backref" href="#id10">super used with __call__ attributes</a></h2>
<p>It was considered that it might be a problem that instantiating super instances
the classic way, because calling it would lookup the __call__ attribute and
thus try to perform an automatic super lookup to the next class in the MRO.
However, this was found to be false, because calling an object only looks up
the __call__ method directly on the object's type. The following example shows
this in action.</p>
<pre class="literal-block">
class A(object):
    def __call__(self):
        return '__call__'
    def __getattribute__(self, attr):
        if attr == '__call__':
            return lambda: '__getattribute__'
a = A()
assert a() == '__call__'
assert a.__call__() == '__getattribute__'
</pre>
<p>In any case, this issue goes away entirely because classic calls to
<tt class="docutils literal"><span class="pre">super(&lt;class&gt;,</span> &lt;instance&gt;)</tt> are still supported with the same meaning.</p>
</div>
</div>
<div class="section" id="alternative-proposals">
<h1><a class="toc-backref" href="#id11">Alternative Proposals</a></h1>
<div class="section" id="no-changes">
<h2><a class="toc-backref" href="#id12">No Changes</a></h2>
<p>Although its always attractive to just keep things how they are, people have
sought a change in the usage of super calling for some time, and for good
reason, all mentioned previously.</p>
<ul class="simple">
<li>Decoupling from the class name (which might not even be bound to the
right class anymore!)</li>
<li>Simpler looking, cleaner super calls would be better</li>
</ul>
</div>
<div class="section" id="dynamic-attribute-on-super-type">
<h2><a class="toc-backref" href="#id13">Dynamic attribute on super type</a></h2>
<p>The proposal adds a dynamic attribute lookup to the super type, which will
automatically determine the proper class and instance parameters. Each super
attribute lookup identifies these parameters and performs the super lookup on
the instance, as the current super implementation does with the explicit
invokation of a super instance upon a class and instance.</p>
<p>This proposal relies on sys._getframe(), which is not appropriate for anything
except a prototype implementation.</p>
</div>
<div class="section" id="self-super-foo-args">
<h2><a class="toc-backref" href="#id14">self.__super__.foo(*args)</a></h2>
<p>The __super__ attribute is mentioned in this PEP in several places, and could
be a candidate for the complete solution, actually using it explicitly instead
of any super usage directly. However, double-underscore names are usually an
internal detail, and attempted to be kept out of everyday code.</p>
</div>
<div class="section" id="super-self-args-or-super-self-args">
<h2><a class="toc-backref" href="#id15">super(self, *args) or __super__(self, *args)</a></h2>
<p>This solution only solves the problem of the type indication, does not handle
differently named super methods, and is explicit about the name of the
instance. It is less flexable without being able to enacted on other method
names, in cases where that is needed. One use case this fails is where a base-
class has a factory classmethod and a subclass has two factory classmethods,
both of which needing to properly make super calls to the one in the base-
class.</p>
</div>
<div class="section" id="super-foo-self-args">
<h2><a class="toc-backref" href="#id16">super.foo(self, *args)</a></h2>
<p>This variation actually eliminates the problems with locating the proper
instance, and if any of the alternatives were pushed into the spotlight, I
would want it to be this one.</p>
</div>
<div class="section" id="super-p-kw">
<h2><a class="toc-backref" href="#id17">super(*p, **kw)</a></h2>
<p>There has been the proposal that directly calling <tt class="docutils literal"><span class="pre">super(*p,</span> **kw)</tt> would
be equivalent to calling the method on the <tt class="docutils literal">super</tt> object with the same name
as the method currently being executed i.e. the following two methods would be
equivalent:</p>
<pre class="literal-block">
def f(self, *p, **kw):
    super.f(*p, **kw)
</pre>
<pre class="literal-block">
def f(self, *p, **kw):
    super(*p, **kw)
</pre>
<p>There is strong sentiment for and against this, but implementation and style
concerns are obvious. Guido has suggested that this should be excluded from
this PEP on the principle of KISS (Keep It Simple Stupid).</p>
</div>
</div>
<div class="section" id="history">
<h1><a class="toc-backref" href="#id18">History</a></h1>
<p>12-Mar-2009 - Updated to reflect the current state of implementation.</p>
<dl class="docutils">
<dt>29-Apr-2007 - Changed title from &quot;Super As A Keyword&quot; to &quot;New Super&quot;</dt>
<dd><ul class="first last simple">
<li>Updated much of the language and added a terminology section
for clarification in confusing places.</li>
<li>Added reference implementation and history sections.</li>
</ul>
</dd>
<dt>06-May-2007 - Updated by Tim Delaney to reflect discussions on the python-3000</dt>
<dd>and python-dev mailing lists.</dd>
</dl>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id19">References</a></h1>
<table class="docutils footnote" frame="void" id="id1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Fixing super anyone?
(<a class="reference external" href="http://mail.python.org/pipermail/python-3000/2007-April/006667.html">http://mail.python.org/pipermail/python-3000/2007-April/006667.html</a>)</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><a class="reference external" href="/dev/peps/pep-3130">PEP 3130</a>: Access to Module/Class/Function Currently Being Defined (this)
(<a class="reference external" href="http://mail.python.org/pipermail/python-ideas/2007-April/000542.html">http://mail.python.org/pipermail/python-ideas/2007-April/000542.html</a>)</td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id20">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
coding: utf-8
End: -->
</div>



      </div>

      
      <div id="footer">
	<div id="credits">
 	  <a href="/about/website">Website maintained by the Python community</a><br/>
	  <a href="http://www.xs4all.com/" title="Web and email hosting provided by xs4all, Netherlands">hosting by xs4all</a> /
	  <a href="http://www.timparkin.co.uk/" title="Design by Tim Parkin, Yorkshire man, photographer and developer">design by Tim Parkin</a>
	</div>
	Copyright &copy; 1990-2013, <a href='/psf/'>Python Software Foundation</a><br/>
	<a href="/about/legal">Legal Statements</a>
      </div>


    </div>
  </div>
</body>
</html>






