<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>PEP 3147 -- PYC Repository Directories</title>
  <meta name="keywords" content="PEP 3147 -- PYC Repository Directories" />
  <meta name="description" content="PEP 3147 -- PYC Repository Directories" />
  <link rel="alternate" type="application/rss+xml" title="Community Events"
        href="http://www.python.org/channews.rdf" />
  <link rel="alternate" type="application/rss+xml" title="Python Recipes"
        href="http://aspn.activestate.com/ASPN/Cookbook/Python/index_rss" />
  <link rel="alternate" type="application/rss+xml" title="Usergroup News"
        href="http://python-groups.blogspot.com/feeds/posts/default" />
  <link rel="alternate" type="application/rss+xml" title="Python Screencasts"
        href="http://www.showmedo.com/latestVideoFeed/rss2.0?tag=python" />
  <link rel="alternate" type="application/rss+xml" title="Python Podcasts"
        href="http://www.awaretek.com/python/index.xml" />
  <link rel="alternate" type="application/rss+xml" title="Foundation News"
        href="http://feeds.feedburner.com/PythonSoftwareFoundationNews" />
  <link rel="alternate" type="application/rss+xml" title="Python Enhancement Proposals"
        href="http://www.python.org/dev/peps/peps.rss" />
  <link rel="alternate" type="application/rss+xml" title="Python Job Opportunities"
        href="http://www.python.org/community/jobs/jobs.rss" />
  <link rel="alternate" type="application/rss+xml" title="Reddit Feed of Python What's New Online"
        href="http://www.reddit.com/r/Python/.rss" />
  <link rel="alternate" type="application/rss+xml" title="Python Insider"
        href="http://feeds.feedburner.com/PythonInsider" />

  <link rel="stylesheet" type="text/css" media="screen" id="screen-switcher-stylesheet"
        href="/styles/screen-switcher-default.css" />
  <link rel="stylesheet" type="text/css" media="sc&#82;een"
        href="/styles/netscape4.css" />
  <link rel="stylesheet" type="text/css" media="print"
        href="/styles/print.css" />
  <link rel="alternate stylesheet" type="text/css" media="screen"
        href="/styles/largestyles.css" title="large text" />
  <link rel="alternate stylesheet" type="text/css" media="screen"
        href="/styles/defaultfonts.css" title="default fonts" />

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search under the www.python.org Domain"
        href="/search-pysite.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search within the Python Wiki"
        href="/search-pywiki.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search within Python Books at Google Book Search"
        href="/search-pybooks.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search within the Python Documentation"
        href="/search-pydocs.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search for a Module in the Standard Library"
        href="/search-pymodules.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search for Packages inside the Cheeseshop (PyPI)"
        href="/search-pycheese.xml"/>

  <link rel="search" type="application/opensearchdescription+xml"
        title="Search Archives of the Main Python Mailing List"
        href="/search-pythonlist.xml"/>

  <script type="text/javascript" src="/js/iotbs2-key-directors-load.js"></script>
  <script type="text/javascript" src="/js/iotbs2-directors.js"></script>
  <script type="text/javascript" src="/js/iotbs2-core.js"></script>

</head>


<body>
  <!-- Logo -->
  <h1 id="logoheader">
    <a href="/" id="logolink" accesskey="1"><img id="logo" src="/images/python-logo.gif" alt="homepage" border="0" /></a>
  </h1>
  <!-- Skip to Navigation -->
  <div class="skiptonav"><a href="#left-hand-navigation" accesskey="2"><img src="/images/trans.gif" id="skiptonav" alt="skip to navigation" border="0" /></a></div>
  <div class="skiptonav"><a href="#content-body" accesskey="3"><img src="/images/trans.gif" id="skiptocontent" alt="skip to content" border="0" /></a></div>
  <!-- Utility Menu -->
  <div id="utility-menu">
    <!-- Search Box -->
    <div id="searchbox">
      <form method="get" action="http://google.com/search" id="searchform" name="searchform">
        <div id="search">
          <input type="hidden" id="domains" name="domains" value="www.python.org" />
          <input type="hidden" id="sitesearch" name="sitesearch" value="www.python.org" />
          <input type="hidden" id="sourceid" name="sourceid" value="google-search" />
          <input type="text" class="input-text" name="q" id="q" />
          <input type="submit" value="search" class="input-button" name="submit" id="submit" />
          <a href="/search" class="reference">Advanced Search</a>
        </div>
      </form>
    </div>
    <div id="screen-switcher"></div>
  </div>

  <div id="left-hand-navigation">
    <!-- Main Menu -->
    <div id="menu">
      <ul class="level-one">
            <li>
          <a href="/about/" title="About The Python Language">About</a>
        </li>
            <li>
          <a href="/news/" title="Major Happenings Within the Python Community">News</a>
        </li>
            <li>
          <a href="/doc/" title="Tutorials, Library Reference, C API">Documentation</a>
        </li>
            <li>
          <a href="/download/" title="Start Running Python Under Windows, Mac, Linux and Others">Download</a>
        </li>
            <li>
          <a href="/getit/" title="Alternate Download page for China">ä¸è½½</a>
        </li>
            <li>
          <a href="/community/" title="Mailing Lists, Jobs, Conferences, SIGs, Online Chats">Community</a>
        </li>
            <li>
          <a href="/psf/" title="Python Software Foundation">Foundation</a>
        </li>
            <li>
          <a href="http://docs.python.org/devguide/" title="Development of the Python language and website">Core Development</a>
        </li>
      </ul>
    </div>

    <!-- Quick Links -->
    <h4><a style="margin-top:1.5em" href="http://wiki.python.org/moin/">Python Wiki</a></h4>
    <h4><a style="margin-top:1.5em" href="http://blog.python.org/">Python Insider Blog</a></h4>
    <h4><a style="margin-top:1.5em" href="http://wiki.python.org/moin/Python2orPython3">Python 2 or 3?</a></h4>
    <h4><a style="color:#D58228; margin-top:1.5em" href="/psf/donations/">Help Fund Python</a></h4>
    <div style="align:center; padding-top: 0.5em; padding-left: 1em">
      <a href="/psf/donations/"><img width="116" height="42" src="/images/donate.png" alt="" title="" /></a>
    </div>
    <div style="align:center; padding-top: 0.5em; padding-left: 2.5em">
            <a href="http://wiki.python.org/moin/Languages"><img
	      style="align:center"
              width="94" height="46"
	      src="/images/worldmap.jpg" alt="[Python resources in languages other than English]" /></a>
    </div>
    <div style="align:center; padding-top: 0.0em; padding-left: 0em">
       <h4><a href="http://wiki.python.org/moin/Languages">Non-English Resources</a></h4>
    </div>
    <div class="calendar">
        <iframe src="https://www.google.com/calendar/embed?title=Release%20Schedule&amp;showNav=0&amp;showDate=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;src=b6v58qvojllt0i6ql654r1vh00%40group.calendar.google.com&amp;color=%23B1365F&amp;" style=" border-width:0 " width="180" height="300" frameborder="0" scrolling="no">
            <a href="http://www.google.com/calendar/ical/b6v58qvojllt0i6ql654r1vh00%40group.calendar.google.com/public/basic.ics">
                Python Release Schedule iCal Calendar
            </a>
        </iframe>
    </div>
    <div class="calendar">
        <iframe src="https://www.google.com/calendar/embed?title=Events%20Calendar&amp;showNav=0&amp;showDate=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;src=j7gov1cmnqr9tvg14k621j7t5c%40group.calendar.google.com&amp;color=%23B1365F&amp;" style=" border-width:0 " width="180" height="300" frameborder="0" scrolling="no">
            <a href="http://www.google.com/calendar/ical/j7gov1cmnqr9tvg14k621j7t5c%40group.calendar.google.com/public/basic.ics">
                Python Events iCal Calendar
            </a>
        </iframe>
        <p class="level-one"><a href="http://pycon.org/#calendar">Add an event</a> to this calendar.</p>
    </div>
    <div class="calendar">
        <iframe src="https://www.google.com/calendar/embed?title=User%20Group%20Calendar&amp;showNav=0&amp;showDate=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;src=3haig2m9msslkpf2tn1h56nn9g%40group.calendar.google.com&amp;color=%23125A12&amp;" style=" border-width:0 " width="180" height="300" frameborder="0" scrolling="no">
            <a href="http://www.google.com/calendar/ical/3haig2m9msslkpf2tn1h56nn9g%40group.calendar.google.com/public/basic.ics">
                Python User Group iCal Calendar
            </a>
        </iframe>
        <p class="level-one"><a href="http://pycon.org/#calendar">Add an event</a> to this calendar.</p>
    </div>
  </div>

  <div id="content-body">
    <div id="body-main">
      <div id="content">
        
          <div id="breadcrumb">
               <a href="/dev/peps/">PEP Index</a>
               <span class="breadcrumb-separator">&gt;</span>
            
            PEP 3147 -- PYC Repository Directories
          </div>



        <!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">3147</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">PYC Repository Directories</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">0ba53b64e50e</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="http://hg.python.org/peps/file/tip/pep-3147.txt">2010-08-09 09:46:08 +0000 (Mon, 09 Aug 2010)</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Barry Warsaw &lt;barry&#32;&#97;t&#32;python.org&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Final</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">2009-12-16</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">3.2</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">2010-01-30, 2010-02-25, 2010-03-03, 2010-04-12</td>
</tr>
<tr class="field"><th class="field-name">Resolution:</th><td class="field-body"><a class="reference external" href="http://mail.python.org/pipermail/python-dev/2010-April/099414.html">http://mail.python.org/pipermail/python-dev/2010-April/099414.html</a></td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id50">Abstract</a></li>
<li><a class="reference internal" href="#background" id="id51">Background</a></li>
<li><a class="reference internal" href="#rationale" id="id52">Rationale</a></li>
<li><a class="reference internal" href="#proposal" id="id53">Proposal</a><ul>
<li><a class="reference internal" href="#examples" id="id54">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-behavior" id="id55">Python behavior</a><ul>
<li><a class="reference internal" href="#case-0-the-steady-state" id="id56">Case 0: The steady state</a></li>
<li><a class="reference internal" href="#case-1-the-first-import" id="id57">Case 1: The first import</a></li>
<li><a class="reference internal" href="#case-2-the-second-import" id="id58">Case 2: The second import</a></li>
<li><a class="reference internal" href="#case-3-pycache-foo-magic-pyc-with-no-source" id="id59">Case 3: __pycache__/foo.&lt;magic&gt;.pyc with no source</a></li>
<li><a class="reference internal" href="#case-4-legacy-pyc-files-and-source-less-imports" id="id60">Case 4: legacy pyc files and source-less imports</a></li>
<li><a class="reference internal" href="#case-5-read-only-file-systems" id="id61">Case 5: read-only file systems</a></li>
</ul>
</li>
<li><a class="reference internal" href="#flow-chart" id="id62">Flow chart</a></li>
<li><a class="reference internal" href="#alternative-python-implementations" id="id63">Alternative Python implementations</a></li>
<li><a class="reference internal" href="#implementation-strategy" id="id64">Implementation strategy</a></li>
<li><a class="reference internal" href="#effects-on-existing-code" id="id65">Effects on existing code</a><ul>
<li><a class="reference internal" href="#detecting-pep-3147-availability" id="id66">Detecting PEP 3147 availability</a></li>
<li><a class="reference internal" href="#file" id="id67">__file__</a></li>
<li><a class="reference internal" href="#py-compile-and-compileall" id="id68">py_compile and compileall</a></li>
<li><a class="reference internal" href="#bdist-wininst-and-the-windows-installer" id="id69">bdist_wininst and the Windows installer</a></li>
<li><a class="reference internal" href="#file-extension-checks" id="id70">File extension checks</a></li>
<li><a class="reference internal" href="#backports" id="id71">Backports</a></li>
<li><a class="reference internal" href="#makefiles-and-other-dependency-tools" id="id72">Makefiles and other dependency tools</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alternatives" id="id73">Alternatives</a><ul>
<li><a class="reference internal" href="#hexadecimal-magic-tags" id="id74">Hexadecimal magic tags</a></li>
<li><a class="reference internal" href="#pep-304" id="id75">PEP 304</a></li>
<li><a class="reference internal" href="#fat-byte-compilation-files" id="id76">Fat byte compilation files</a></li>
<li><a class="reference internal" href="#multiple-file-extensions" id="id77">Multiple file extensions</a></li>
<li><a class="reference internal" href="#pyc" id="id78">.pyc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reference-implementation" id="id79">Reference implementation</a></li>
<li><a class="reference internal" href="#references" id="id80">References</a></li>
<li><a class="reference internal" href="#acknowledgments" id="id81">ACKNOWLEDGMENTS</a></li>
<li><a class="reference internal" href="#copyright" id="id82">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id50">Abstract</a></h1>
<p>This PEP describes an extension to Python's import mechanism which
improves sharing of Python source code files among multiple installed
different versions of the Python interpreter.  It does this by
allowing more than one byte compilation file (.pyc files) to be
co-located with the Python source file (.py file).  The extension
described here can also be used to support different Python
compilation caches, such as JIT output that may be produced by an
Unladen Swallow <a class="footnote-reference" href="#id26" id="id1">[1]</a> enabled C Python.</p>
</div>
<div class="section" id="background">
<h1><a class="toc-backref" href="#id51">Background</a></h1>
<p>CPython compiles its source code into &quot;byte code&quot;, and for performance
reasons, it caches this byte code on the file system whenever the
source file has changes.  This makes loading of Python modules much
faster because the compilation phase can be bypassed.  When your
source file is <cite>foo.py</cite>, CPython caches the byte code in a <cite>foo.pyc</cite>
file right next to the source.</p>
<p>Byte code files contain two 32-bit big-endian numbers followed by the
marshaled <a class="footnote-reference" href="#id27" id="id2">[2]</a> code object.  The 32-bit numbers represent a magic
number and a timestamp.  The magic number changes whenever Python
changes the byte code format, e.g. by adding new byte codes to its
virtual machine.  This ensures that pyc files built for previous
versions of the VM won't cause problems.  The timestamp is used to
make sure that the pyc file match the py file that was used to create
it.  When either the magic number or timestamp do not match, the py
file is recompiled and a new pyc file is written.</p>
<p>In practice, it is well known that pyc files are not compatible across
Python major releases.  A reading of import.c <a class="footnote-reference" href="#id28" id="id3">[3]</a> in the Python
source code proves that within recent memory, every new CPython major
release has bumped the pyc magic number.</p>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id52">Rationale</a></h1>
<p>Linux distributions such as Ubuntu <a class="footnote-reference" href="#id29" id="id4">[4]</a> and Debian <a class="footnote-reference" href="#id30" id="id5">[5]</a> provide more
than one Python version at the same time to their users.  For example,
Ubuntu 9.10 Karmic Koala users can install Python 2.5, 2.6, and 3.1,
with Python 2.6 being the default.</p>
<p>This causes a conflict for third party Python source files installed
by the system, because you cannot compile a single Python source file
for more than one Python version at a time.  When Python finds a <cite>pyc</cite>
file with a non-matching magic number, it falls back to the slower
process of recompiling the source.  Thus if your system installed a
<cite>/usr/share/python/foo.py</cite>, two different versions of Python would
fight over the <cite>pyc</cite> file and rewrite it each time the source is
compiled.  (The standard library is unaffected by this, since multiple
versions of the stdlib <em>are</em> installed on such distributions..)</p>
<p>Furthermore, in order to ease the burden on operating system packagers
for these distributions, the distribution packages do not contain
Python version numbers <a class="footnote-reference" href="#id31" id="id6">[6]</a>; they are shared across all Python
versions installed on the system.  Putting Python version numbers in
the packages would be a maintenance nightmare, since all the packages
- <em>and their dependencies</em> - would have to be updated every time a new
Python release was added or removed from the distribution.  Because of
the sheer number of packages available, this amount of work is
infeasible.</p>
<p>(<a class="reference external" href="/dev/peps/pep-0384">PEP 384</a> <a class="footnote-reference" href="#id32" id="id7">[7]</a> has been proposed to address binary compatibility issues
of third party extension modules across different versions of Python.)</p>
<p>Because these distributions cannot share pyc files, elaborate
mechanisms have been developed to put the resulting pyc files in
non-shared locations while the source code is still shared.  Examples
include the symlink-based Debian regimes python-support <a class="footnote-reference" href="#id33" id="id8">[8]</a> and
python-central <a class="footnote-reference" href="#id34" id="id9">[9]</a>.  These approaches make for much more complicated,
fragile, inscrutable, and fragmented policies for delivering Python
applications to a wide range of users.  Arguably more users get Python
from their operating system vendor than from upstream tarballs.  Thus,
solving this pyc sharing problem for CPython is a high priority for
such vendors.</p>
<p>This PEP proposes a solution to this problem.</p>
</div>
<div class="section" id="proposal">
<h1><a class="toc-backref" href="#id53">Proposal</a></h1>
<p>Python's import machinery is extended to write and search for byte
code cache files in a single directory inside every Python package
directory.  This directory will be called <cite>__pycache__</cite>.</p>
<p>Further, pyc file names will contain a magic string (called a &quot;tag&quot;)
that differentiates the Python version they were compiled for.  This
allows multiple byte compiled cache files to co-exist for a single
Python source file.</p>
<p>The magic tag is implementation defined, but should contain the
implementation name and a version number shorthand, e.g. <cite>cpython-32</cite>.
It must be unique among all versions of Python, and whenever the magic
number is bumped, a new magic tag must be defined.  An example <cite>pyc</cite>
file for Python 3.2 is thus <cite>foo.cpython-32.pyc</cite>.</p>
<p>The magic tag is available in the <cite>imp</cite> module via the <cite>get_tag()</cite>
function.  This is parallel to the <cite>imp.get_magic()</cite> function.</p>
<p>This scheme has the added benefit of reducing the clutter in a Python
package directory.</p>
<p>When a Python source file is imported for the first time, a
<cite>__pycache__</cite> directory will be created in the package directory, if
one does not already exist.  The pyc file for the imported source will
be written to the <cite>__pycache__</cite> directory, using the magic-tag
formatted name.  If either the creation of the <cite>__pycache__</cite> directory
or the pyc file inside that fails, the import will still succeed, just
as it does in a pre-PEP-3147 world.</p>
<p>If the py source file is missing, the pyc file inside <cite>__pycache__</cite>
will be ignored.  This eliminates the problem of accidental stale pyc
file imports.</p>
<p>For backward compatibility, Python will still support pyc-only
distributions, however it will only do so when the pyc file lives in
the directory where the py file <em>would</em> have been, i.e. not in the
<cite>__pycache__</cite> directory.  pyc file outside of <cite>__pycache__</cite> will only
be imported if the py source file is missing.</p>
<p>Tools such as <cite>py_compile</cite> <a class="footnote-reference" href="#id40" id="id10">[15]</a> and <cite>compileall</cite> <a class="footnote-reference" href="#id41" id="id11">[16]</a> will be
extended to create <a class="reference external" href="/dev/peps/pep-3147">PEP 3147</a> formatted layouts automatically, but will
have an option to create pyc-only distribution layouts.</p>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id54">Examples</a></h2>
<p>What would this look like in practice?</p>
<p>Let's say we have a Python package named <cite>alpha</cite> which contains a
sub-package name <cite>beta</cite>.  The source directory layout before byte
compilation might look like this:</p>
<pre class="literal-block">
alpha/
    __init__.py
    one.py
    two.py
    beta/
        __init__.py
        three.py
        four.py
</pre>
<p>After byte compiling this package with Python 3.2, you would see the
following layout:</p>
<pre class="literal-block">
alpha/
    __pycache__/
        __init__.cpython-32.pyc
        one.cpython-32.pyc
        two.cpython-32.pyc
    __init__.py
    one.py
    two.py
    beta/
        __pycache__/
            __init__.cpython-32.pyc
            three.cpython-32.pyc
            four.cpython-32.pyc
        __init__.py
        three.py
        four.py
</pre>
<p><em>Note: listing order may differ depending on the platform.</em></p>
<p>Let's say that two new versions of Python are installed, one is Python
3.3 and another is Unladen Swallow.  After byte compilation, the file
system would look like this:</p>
<pre class="literal-block">
alpha/
    __pycache__/
        __init__.cpython-32.pyc
        __init__.cpython-33.pyc
        __init__.unladen-10.pyc
        one.cpython-32.pyc
        one.cpython-33.pyc
        one.unladen-10.pyc
        two.cpython-32.pyc
        two.cpython-33.pyc
        two.unladen-10.pyc
    __init__.py
    one.py
    two.py
    beta/
        __pycache__/
            __init__.cpython-32.pyc
            __init__.cpython-33.pyc
            __init__.unladen-10.pyc
            three.cpython-32.pyc
            three.cpython-33.pyc
            three.unladen-10.pyc
            four.cpython-32.pyc
            four.cpython-33.pyc
            four.unladen-10.pyc
        __init__.py
        three.py
        four.py
</pre>
<p>As you can see, as long as the Python version identifier string is
unique, any number of pyc files can co-exist.  These identifier
strings are described in more detail below.</p>
<p>A nice property of this layout is that the <cite>__pycache__</cite> directories
can generally be ignored, such that a normal directory listing would
show something like this:</p>
<pre class="literal-block">
alpha/
    __pycache__/
    __init__.py
    one.py
    two.py
    beta/
        __pycache__/
        __init__.py
        three.py
        four.py
</pre>
<p>This is much less cluttered than even today's Python.</p>
</div>
</div>
<div class="section" id="python-behavior">
<h1><a class="toc-backref" href="#id55">Python behavior</a></h1>
<p>When Python searches for a module to import (say <cite>foo</cite>), it may find
one of several situations.  As per current Python rules, the term
&quot;matching pyc&quot; means that the magic number matches the current
interpreter's magic number, and the source file's timestamp matches
the timestamp in the <cite>pyc</cite> file exactly.</p>
<div class="section" id="case-0-the-steady-state">
<h2><a class="toc-backref" href="#id56">Case 0: The steady state</a></h2>
<p>When Python is asked to import module <cite>foo</cite>, it searches for a
<cite>foo.py</cite> file (or <cite>foo</cite> package, but that's not important for this
discussion) along its <cite>sys.path</cite>.  If found, Python looks to see if
there is a matching <cite>__pycache__/foo.&lt;magic&gt;.pyc</cite> file, and if so,
that <cite>pyc</cite> file is loaded.</p>
</div>
<div class="section" id="case-1-the-first-import">
<h2><a class="toc-backref" href="#id57">Case 1: The first import</a></h2>
<p>When Python locates the <cite>foo.py</cite>, if the <cite>__pycache__/foo.&lt;magic&gt;.pyc</cite>
file is missing, Python will create it, also creating the
<cite>__pycache__</cite> directory if necessary.  Python will parse and byte
compile the <cite>foo.py</cite> file and save the byte code in
<cite>__pycache__/foo.&lt;magic&gt;.pyc</cite>.</p>
</div>
<div class="section" id="case-2-the-second-import">
<h2><a class="toc-backref" href="#id58">Case 2: The second import</a></h2>
<p>When Python is asked to import module <cite>foo</cite> a second time (in a
different process of course), it will again search for the <cite>foo.py</cite>
file along its <cite>sys.path</cite>.  When Python locates the <cite>foo.py</cite> file, it
looks for a matching <cite>__pycache__/foo.&lt;magic&gt;.pyc</cite> and finding this,
it reads the byte code and continues as usual.</p>
</div>
<div class="section" id="case-3-pycache-foo-magic-pyc-with-no-source">
<h2><a class="toc-backref" href="#id59">Case 3: __pycache__/foo.&lt;magic&gt;.pyc with no source</a></h2>
<p>It's possible that the <cite>foo.py</cite> file somehow got removed, while
leaving the cached pyc file still on the file system.  If the
<cite>__pycache__/foo.&lt;magic&gt;.pyc</cite> file exists, but the <cite>foo.py</cite> file used
to create it does not, Python will raise an <cite>ImportError</cite> when asked
to import foo.  In other words, Python will not import a pyc file from
the cache directory unless the source file exists.</p>
</div>
<div class="section" id="case-4-legacy-pyc-files-and-source-less-imports">
<h2><a class="toc-backref" href="#id60">Case 4: legacy pyc files and source-less imports</a></h2>
<p>Python will ignore all legacy pyc files when a source file exists next
to it.  In other words, if a <cite>foo.pyc</cite> file exists next to the
<cite>foo.py</cite> file, the pyc file will be ignored in all cases</p>
<p>In order to continue to support source-less distributions though, if
the source file is missing, Python will import a lone pyc file if it
lives where the source file would have been.</p>
</div>
<div class="section" id="case-5-read-only-file-systems">
<h2><a class="toc-backref" href="#id61">Case 5: read-only file systems</a></h2>
<p>When the source lives on a read-only file system, or the <cite>__pycache__</cite>
directory or pyc file cannot otherwise be written, all the same rules
apply.  This is also the case when <cite>__pycache__</cite> happens to be written
with permissions which do not allow for writing containing pyc files.</p>
</div>
</div>
<div class="section" id="flow-chart">
<h1><a class="toc-backref" href="#id62">Flow chart</a></h1>
<p>Here is a flow chart describing how modules are loaded:</p>
<img alt="pep-3147-1.png" src="pep-3147-1.png" />
</div>
<div class="section" id="alternative-python-implementations">
<h1><a class="toc-backref" href="#id63">Alternative Python implementations</a></h1>
<p>Alternative Python implementations such as Jython <a class="footnote-reference" href="#id36" id="id12">[11]</a>, IronPython
<a class="footnote-reference" href="#id37" id="id13">[12]</a>, PyPy <a class="footnote-reference" href="#id38" id="id14">[13]</a>, Pynie <a class="footnote-reference" href="#id39" id="id15">[14]</a>, and Unladen Swallow can also use the
<cite>__pycache__</cite> directory to store whatever compilation artifacts make
sense for their platforms.  For example, Jython could store the class
file for the module in <cite>__pycache__/foo.jython-32.class</cite>.</p>
</div>
<div class="section" id="implementation-strategy">
<h1><a class="toc-backref" href="#id64">Implementation strategy</a></h1>
<p>This feature is targeted for Python 3.2, solving the problem for those
and all future versions.  It may be back-ported to Python 2.7.
Vendors are free to backport the changes to earlier distributions as
they see fit.  For backports of this feature to Python 2, when the
<cite>-U</cite> flag is used, a file such as <cite>foo.cpython-27u.pyc</cite> can be
written.</p>
</div>
<div class="section" id="effects-on-existing-code">
<h1><a class="toc-backref" href="#id65">Effects on existing code</a></h1>
<p>Adoption of this PEP will affect existing code and idioms, both inside
Python and outside.  This section enumerates some of these effects.</p>
<div class="section" id="detecting-pep-3147-availability">
<h2>Detecting <a class="reference external" href="/dev/peps/pep-3147">PEP 3147</a> availability</h2>
<p>The easiest way to detect whether your version of Python provides <a class="reference external" href="/dev/peps/pep-3147">PEP
3147</a> functionality is to do the following check:</p>
<pre class="literal-block">
&gt;&gt;&gt; import imp
&gt;&gt;&gt; has3147 = hasattr(imp, 'get_tag')
</pre>
</div>
<div class="section" id="file">
<h2><a class="toc-backref" href="#id67">__file__</a></h2>
<p>In Python 3, when you import a module, its <cite>__file__</cite> attribute points
to its source <cite>py</cite> file (in Python 2, it points to the <cite>pyc</cite> file).  A
package's <cite>__file__</cite> points to the <cite>py</cite> file for its <cite>__init__.py</cite>.
E.g.:</p>
<pre class="literal-block">
&gt;&gt;&gt; import foo
&gt;&gt;&gt; foo.__file__
'foo.py'
# baz is a package
&gt;&gt;&gt; import baz
&gt;&gt;&gt; baz.__file__
'baz/__init__.py'
</pre>
<p>Nothing in this PEP would change the semantics of <cite>__file__</cite>.</p>
<p>This PEP proposes the addition of an <cite>__cached__</cite> attribute to
modules, which will always point to the actual <cite>pyc</cite> file that was
read or written.  When the environment variable
<cite>$PYTHONDONTWRITEBYTECODE</cite> is set, or the <cite>-B</cite> option is given, or if
the source lives on a read-only filesystem, then the <cite>__cached__</cite>
attribute will point to the location that the <cite>pyc</cite> file <em>would</em> have
been written to if it didn't exist.  This location of course includes
the <cite>__pycache__</cite> subdirectory in its path.</p>
<p>For alternative Python implementations which do not support <cite>pyc</cite>
files, the <cite>__cached__</cite> attribute may point to whatever information
makes sense.  E.g. on Jython, this might be the <cite>.class</cite> file for the
module: <cite>__pycache__/foo.jython-32.class</cite>.  Some implementations may
use multiple compiled files to create the module, in which case
<cite>__cached__</cite> may be a tuple.  The exact contents of <cite>__cached__</cite> are
Python implementation specific.</p>
<p>It is recommended that when nothing sensible can be calculated,
implementations should set the <cite>__cached__</cite> attribute to <cite>None</cite>.</p>
</div>
<div class="section" id="py-compile-and-compileall">
<h2><a class="toc-backref" href="#id68">py_compile and compileall</a></h2>
<p>Python comes with two modules, <cite>py_compile</cite> <a class="footnote-reference" href="#id40" id="id16">[15]</a> and <cite>compileall</cite>
<a class="footnote-reference" href="#id41" id="id17">[16]</a> which support compiling Python modules external to the built-in
import machinery.  <cite>py_compile</cite> in particular has intimate knowledge
of byte compilation, so these will be updated to understand the new
layout.  The <cite>-b</cite> flag is added to <cite>compileall</cite> for writing legacy
<cite>.pyc</cite> byte-compiled file path names.</p>
</div>
<div class="section" id="bdist-wininst-and-the-windows-installer">
<h2><a class="toc-backref" href="#id69">bdist_wininst and the Windows installer</a></h2>
<p>These tools also compile modules explicitly on installation.  If they
do not use <cite>py_compile</cite> and <cite>compileall</cite>, then they would also have to
be modified to understand the new layout.</p>
</div>
<div class="section" id="file-extension-checks">
<h2><a class="toc-backref" href="#id70">File extension checks</a></h2>
<p>There exists some code which checks for files ending in <cite>.pyc</cite> and
simply chops off the last character to find the matching <cite>.py</cite> file.
This code will obviously fail once this PEP is implemented.</p>
<p>To support this use case, we'll add two new methods to the <cite>imp</cite>
package <a class="footnote-reference" href="#id42" id="id18">[17]</a>:</p>
<blockquote>
<ul class="simple">
<li><cite>imp.cache_from_source(py_path)</cite> -&gt; <cite>pyc_path</cite></li>
<li><cite>imp.source_from_cache(pyc_path)</cite> -&gt; <cite>py_path</cite></li>
</ul>
</blockquote>
<p>Alternative implementations are free to override these functions to
return reasonable values based on their own support for this PEP.
These methods are allowed to return <cite>None</cite> when the implementation (or
<a class="reference external" href="/dev/peps/pep-0302">PEP 302</a> loader <a class="footnote-reference" href="#id43" id="id19">[18]</a> in effect) for whatever reason cannot calculate
the appropriate file name.  They should not raise exceptions.</p>
</div>
<div class="section" id="backports">
<h2><a class="toc-backref" href="#id71">Backports</a></h2>
<p>For versions of Python earlier than 3.2 (and possibly 2.7), it is
possible to backport this PEP.  However, in Python 3.2 (and possibly
2.7), this behavior will be turned on by default, and in fact, it will
replace the old behavior.  Backports will need to support the old
layout by default.  We suggest supporting <a class="reference external" href="/dev/peps/pep-3147">PEP 3147</a> through the use of
an environment variable called <cite>$PYTHONENABLECACHEDIR</cite> or the command
line switch <cite>-Xenablecachedir</cite> to enable the feature.</p>
</div>
<div class="section" id="makefiles-and-other-dependency-tools">
<h2><a class="toc-backref" href="#id72">Makefiles and other dependency tools</a></h2>
<p>Makefiles and other tools which calculate dependencies on <cite>.pyc</cite> files
(e.g. to byte-compile the source if the <cite>.pyc</cite> is missing) will have
to be updated to check the new paths.</p>
</div>
</div>
<div class="section" id="alternatives">
<h1><a class="toc-backref" href="#id73">Alternatives</a></h1>
<p>This section describes some alternative approaches or details that
were considered and rejected during the PEP's development.</p>
<div class="section" id="hexadecimal-magic-tags">
<h2><a class="toc-backref" href="#id74">Hexadecimal magic tags</a></h2>
<p>pyc files inside of the <cite>__pycache__</cite> directories contain a magic tag
in their file names.  These are mnemonic tags for the actual magic
numbers used by the importer.  We could have used the hexadecimal
representation <a class="footnote-reference" href="#id35" id="id20">[10]</a> of the binary magic number as a unique
identifier.  For example, in Python 3.2:</p>
<pre class="literal-block">
&gt;&gt;&gt; from binascii import hexlify
&gt;&gt;&gt; from imp import get_magic
&gt;&gt;&gt; 'foo.{}.pyc'.format(hexlify(get_magic()).decode('ascii'))
'foo.580c0d0a.pyc'
</pre>
<p>This isn't particularly human friendly though, thus the magic tag
proposed in this PEP.</p>
</div>
<div class="section" id="pep-304">
<h2><a class="reference external" href="/dev/peps/pep-0304">PEP 304</a></h2>
<p>There is some overlap between the goals of this PEP and <a class="reference external" href="/dev/peps/pep-0304">PEP 304</a> <a class="footnote-reference" href="#id44" id="id21">[19]</a>,
which has been withdrawn.  However <a class="reference external" href="/dev/peps/pep-0304">PEP 304</a> would allow a user to
create a shadow file system hierarchy in which to store <cite>pyc</cite> files.
This concept of a shadow hierarchy for <cite>pyc</cite> files could be used to
satisfy the aims of this PEP.  Although the <a class="reference external" href="/dev/peps/pep-0304">PEP 304</a> does not indicate
why it was withdrawn, shadow directories have a number of problems.
The location of the shadow <cite>pyc</cite> files would not be easily discovered
and would depend on the proper and consistent use of the
<cite>$PYTHONBYTECODE</cite> environment variable both by the system and by end
users.  There are also global implications, meaning that while the
system might want to shadow <cite>pyc</cite> files, users might not want to, but
the PEP defines only an all-or-nothing approach.</p>
<p>As an example of the problem, a common (though fragile) Python idiom
for locating data files is to do something like this:</p>
<pre class="literal-block">
from os import dirname, join
import foo.bar
data_file = join(dirname(foo.bar.__file__), 'my.dat')
</pre>
<p>This would be problematic since <cite>foo.bar.__file__</cite> will give the
location of the <cite>pyc</cite> file in the shadow directory, and it may not be
possible to find the <cite>my.dat</cite> file relative to the source directory
from there.</p>
</div>
<div class="section" id="fat-byte-compilation-files">
<h2><a class="toc-backref" href="#id76">Fat byte compilation files</a></h2>
<p>An earlier version of this PEP described &quot;fat&quot; Python byte code files.
These files would contain the equivalent of multiple <cite>pyc</cite> files in a
single <cite>pyf</cite> file, with a lookup table keyed off the appropriate magic
number.  This was an extensible file format so that the first 5
parallel Python implementations could be supported fairly efficiently,
but with extension lookup tables available to scale <cite>pyf</cite> byte code
objects as large as necessary.</p>
<p>The fat byte compilation files were fairly complex, and inherently
introduced difficult race conditions, so the current simplification of
using directories was suggested.  The same problem applies to using
zip files as the fat pyc file format.</p>
</div>
<div class="section" id="multiple-file-extensions">
<h2><a class="toc-backref" href="#id77">Multiple file extensions</a></h2>
<p>The PEP author also considered an approach where multiple thin byte
compiled files lived in the same place, but used different file
extensions to designate the Python version.  E.g. foo.pyc25,
foo.pyc26, foo.pyc31 etc.  This was rejected because of the clutter
involved in writing so many different files.  The multiple extension
approach makes it more difficult (and an ongoing task) to update any
tools that are dependent on the file extension.</p>
</div>
<div class="section" id="pyc">
<h2><a class="toc-backref" href="#id78">.pyc</a></h2>
<p>A proposal was floated to call the <cite>__pycache__</cite> directory <cite>.pyc</cite> or
some other dot-file name.  This would have the effect on *nix systems
of hiding the directory.  There are many reasons why this was
rejected by the BDFL <a class="footnote-reference" href="#id45" id="id22">[20]</a> including the fact that dot-files are only
special on some platforms, and we actually do <em>not</em> want to hide these
completely from users.</p>
</div>
</div>
<div class="section" id="reference-implementation">
<h1><a class="toc-backref" href="#id79">Reference implementation</a></h1>
<p>Work on this code is tracked in a Bazaar branch on Launchpad <a class="footnote-reference" href="#id47" id="id23">[22]</a>
until it's ready for merge into Python 3.2.  The work-in-progress diff
can also be viewed <a class="footnote-reference" href="#id48" id="id24">[23]</a> and is updated automatically as new changes
are uploaded.</p>
<p>A Rietveld code review issue <a class="footnote-reference" href="#id49" id="id25">[24]</a> has been opened as of 2010-04-01 (no,
this is not an April Fools joke :).</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id80">References</a></h1>
<table class="docutils footnote" frame="void" id="id26" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="/dev/peps/pep-3146">PEP 3146</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id27" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>The marshal module:
<a class="reference external" href="http://www.python.org/doc/current/library/marshal.html">http://www.python.org/doc/current/library/marshal.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id28" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>import.c:
<a class="reference external" href="http://svn.python.org/view/python/branches/py3k/Python/import.c?view=markup">http://svn.python.org/view/python/branches/py3k/Python/import.c?view=markup</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id29" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[4]</a></td><td>Ubuntu: &lt;<a class="reference external" href="http://www.ubuntu.com">http://www.ubuntu.com</a>&gt;</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id30" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[5]</a></td><td>Debian: &lt;<a class="reference external" href="http://www.debian.org">http://www.debian.org</a>&gt;</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id31" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[6]</a></td><td>Debian Python Policy:
<a class="reference external" href="http://www.debian.org/doc/packaging-manuals/python-policy/">http://www.debian.org/doc/packaging-manuals/python-policy/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id32" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id7">[7]</a></td><td><a class="reference external" href="/dev/peps/pep-0384">PEP 384</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id33" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id8">[8]</a></td><td>python-support:
<a class="reference external" href="http://wiki.debian.org/DebianPythonFAQ#Whatispython-support.3F">http://wiki.debian.org/DebianPythonFAQ#Whatispython-support.3F</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id34" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[9]</a></td><td>python-central:
<a class="reference external" href="http://wiki.debian.org/DebianPythonFAQ#Whatispython-central.3F">http://wiki.debian.org/DebianPythonFAQ#Whatispython-central.3F</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id35" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id20">[10]</a></td><td>binascii.hexlify():
<a class="reference external" href="http://www.python.org/doc/current/library/binascii.html#binascii.hexlify">http://www.python.org/doc/current/library/binascii.html#binascii.hexlify</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id36" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id12">[11]</a></td><td>Jython: <a class="reference external" href="http://www.jython.org/">http://www.jython.org/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id37" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id13">[12]</a></td><td>IronPython: <a class="reference external" href="http://ironpython.net/">http://ironpython.net/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id38" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id14">[13]</a></td><td>PyPy: <a class="reference external" href="http://codespeak.net/pypy/dist/pypy/doc/">http://codespeak.net/pypy/dist/pypy/doc/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id39" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id15">[14]</a></td><td>Pynie: <a class="reference external" href="http://code.google.com/p/pynie/">http://code.google.com/p/pynie/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id40" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[15]</td><td><em>(<a class="fn-backref" href="#id10">1</a>, <a class="fn-backref" href="#id16">2</a>)</em> py_compile: <a class="reference external" href="http://docs.python.org/library/py_compile.html">http://docs.python.org/library/py_compile.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id41" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[16]</td><td><em>(<a class="fn-backref" href="#id11">1</a>, <a class="fn-backref" href="#id17">2</a>)</em> compileall: <a class="reference external" href="http://docs.python.org/library/compileall.html">http://docs.python.org/library/compileall.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id42" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id18">[17]</a></td><td>imp: <a class="reference external" href="http://www.python.org/doc/current/library/imp.html">http://www.python.org/doc/current/library/imp.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id43" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id19">[18]</a></td><td><a class="reference external" href="/dev/peps/pep-0302">PEP 302</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id44" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id21">[19]</a></td><td><a class="reference external" href="/dev/peps/pep-0304">PEP 304</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id45" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id22">[20]</a></td><td><a class="reference external" href="http://www.mail-archive.com/python-dev&#64;python.org/msg45203.html">http://www.mail-archive.com/python-dev&#64;python.org/msg45203.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id46" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[21]</td><td>importlib: <a class="reference external" href="http://docs.python.org/3.1/library/importlib.html">http://docs.python.org/3.1/library/importlib.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id47" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id23">[22]</a></td><td><a class="reference external" href="https://code.launchpad.net/~barry/python/pep3147">https://code.launchpad.net/~barry/python/pep3147</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id48" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id24">[23]</a></td><td><a class="reference external" href="https://code.launchpad.net/~barry/python/pep3147/+merge/22648">https://code.launchpad.net/~barry/python/pep3147/+merge/22648</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id49" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id25">[24]</a></td><td><a class="reference external" href="http://codereview.appspot.com/842043/show">http://codereview.appspot.com/842043/show</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="acknowledgments">
<h1><a class="toc-backref" href="#id81">ACKNOWLEDGMENTS</a></h1>
<p>Barry Warsaw's original idea was for fat Python byte code files.
Martin von Loewis reviewed an early draft of the PEP and suggested the
simplification to store traditional <cite>pyc</cite> and <cite>pyo</cite> files in a
directory.  Many other people reviewed early versions of this PEP and
provided useful feedback including but not limited to:</p>
<ul class="simple">
<li>David Malcolm</li>
<li>Josselin Mouette</li>
<li>Matthias Klose</li>
<li>Michael Hudson</li>
<li>Michael Vogt</li>
<li>Piotr OÅ¼arowski</li>
<li>Scott Kitterman</li>
<li>Toshio Kuratomi</li>
</ul>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id82">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
coding: utf-8
End: -->
</div>



      </div>

      
      <div id="footer">
	<div id="credits">
 	  <a href="/about/website">Website maintained by the Python community</a><br/>
	  <a href="http://www.xs4all.com/" title="Web and email hosting provided by xs4all, Netherlands">hosting by xs4all</a> /
	  <a href="http://www.timparkin.co.uk/" title="Design by Tim Parkin, Yorkshire man, photographer and developer">design by Tim Parkin</a>
	</div>
	Copyright &copy; 1990-2013, <a href='/psf/'>Python Software Foundation</a><br/>
	<a href="/about/legal">Legal Statements</a>
      </div>


    </div>
  </div>
</body>
</html>






